var Vx=Object.defineProperty,Ux=Object.defineProperties,Bx=Object.getOwnPropertyDescriptors,NN=Object.getOwnPropertySymbols,jx=Object.prototype.hasOwnProperty,$x=Object.prototype.propertyIsEnumerable,ON=(We,ve,N)=>ve in We?Vx(We,ve,{enumerable:!0,configurable:!0,writable:!0,value:N}):We[ve]=N,ec=(We,ve)=>{for(var N in ve||(ve={}))jx.call(ve,N)&&ON(We,N,ve[N]);if(NN)for(var N of NN(ve))$x.call(ve,N)&&ON(We,N,ve[N]);return We},xN=(We,ve)=>Ux(We,Bx(ve));(self.webpackChunkphysics_n2048=self.webpackChunkphysics_n2048||[]).push([[179],{8255:We=>{function ve(N){return Promise.resolve().then(()=>{var h=new Error("Cannot find module '"+N+"'");throw h.code="MODULE_NOT_FOUND",h})}ve.keys=()=>[],ve.resolve=ve,ve.id=8255,We.exports=ve},7716:(We,ve,N)=>{"use strict";N.d(ve,{deG:()=>n_,tb:()=>Am,AFp:()=>Of,ip1:()=>Nf,CZH:()=>Ol,hGG:()=>_R,z2F:()=>Mm,sBO:()=>IA,Sil:()=>kf,_Vd:()=>pd,EJc:()=>qS,SBq:()=>Ko,qLn:()=>wa,vpe:()=>Yo,gxx:()=>pl,tBr:()=>el,XFs:()=>$e,OlP:()=>Nn,zs3:()=>qn,ZZ4:()=>rm,aQg:()=>gv,soG:()=>dE,YKP:()=>_v,v3s:()=>cR,h0i:()=>Ou,PXZ:()=>ST,R0b:()=>os,FiY:()=>ui,Lbi:()=>Id,g9A:()=>WS,Qsj:()=>dA,FYo:()=>em,JOm:()=>Bo,Tiy:()=>tm,q3G:()=>In,tp0:()=>Oo,EAV:()=>NT,Rgc:()=>cf,dDg:()=>vE,DyG:()=>mc,q4F:()=>nm,GfV:()=>sw,s_b:()=>Sl,ifc:()=>Le,eFA:()=>TE,G48:()=>CT,Gpc:()=>$,X6Q:()=>wE,_c5:()=>Sd,VLi:()=>EE,c2e:()=>zS,zSh:()=>yu,wAp:()=>yt,vHH:()=>xe,EiD:()=>yn,mCW:()=>il,qzn:()=>Vo,JVY:()=>Tp,pB0:()=>lh,eBb:()=>m_,L6k:()=>Jt,LAX:()=>rl,cg1:()=>ef,Tjo:()=>Vm,kL8:()=>wl,yhl:()=>wp,dqk:()=>Gt,sIi:()=>Lh,CqO:()=>El,QGY:()=>Go,F4k:()=>yg,RDi:()=>Bd,AaK:()=>te,z3N:()=>ro,qOj:()=>sg,TTD:()=>qs,_Bn:()=>Vs,xp6:()=>G0,uIk:()=>lg,ekj:()=>zy,Suo:()=>Zw,Xpm:()=>Ln,lG2:()=>mt,Yz7:()=>an,cJS:()=>ct,oAB:()=>we,Yjl:()=>Zt,Y36:()=>Oa,_UZ:()=>xs,BQk:()=>qh,ynx:()=>_g,qZA:()=>Zn,TgZ:()=>My,EpF:()=>Oy,n5z:()=>Zd,Ikx:()=>ev,LFG:()=>bn,$8M:()=>tu,NdJ:()=>vg,CRH:()=>ym,oxw:()=>KC,Hsn:()=>ky,F$t:()=>ZC,Q6J:()=>sd,iGM:()=>Pl,MAs:()=>dg,CHM:()=>Ys,LSH:()=>sl,kYT:()=>je,YNc:()=>cg,_uU:()=>Yy,Oqu:()=>Ig,hij:()=>ao,Gf:()=>ho});var h=N(9765),U=N(5319),O=N(7574),ue=N(6682),ee=N(8345);function J(r){for(let i in r)if(r[i]===J)return i;throw Error("Could not find renamed property on target object.")}function oe(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function te(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(te).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function X(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const V=J({__forward_ref__:J});function $(r){return r.__forward_ref__=$,r.toString=function(){return te(this())},r}function G(r){return ge(r)?r():r}function ge(r){return"function"==typeof r&&r.hasOwnProperty(V)&&r.__forward_ref__===$}class xe extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function ae(r){return"string"==typeof r?r:null==r?"":String(r)}function de(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():ae(r)}function vt(r,i){const o=i?` in ${i}`:"";throw new xe("201",`No provider for ${de(r)} found${o}`)}function Wt(r,i){null==r&&function(r,i,o,l){throw new Error(`ASSERTION ERROR: ${r}`+(null==l?"":` [Expected=> ${o} ${l} ${i} <=Actual]`))}(i,r,null,"!=")}function an(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ct(r){return{providers:r.providers||[],imports:r.imports||[]}}function Nt(r){return pt(r,Oe)||pt(r,mn)}function pt(r,i){return r.hasOwnProperty(i)?r[i]:null}function rr(r){return r&&(r.hasOwnProperty(hn)||r.hasOwnProperty(kn))?r[hn]:null}const Oe=J({\u0275prov:J}),hn=J({\u0275inj:J}),mn=J({ngInjectableDef:J}),kn=J({ngInjectorDef:J});var $e=(()=>(($e=$e||{})[$e.Default=0]="Default",$e[$e.Host=1]="Host",$e[$e.Self=2]="Self",$e[$e.SkipSelf=4]="SkipSelf",$e[$e.Optional=8]="Optional",$e))();let Tt;function wn(r){const i=Tt;return Tt=r,i}function Qe(r,i,o){const l=Nt(r);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&$e.Optional?null:void 0!==i?i:void vt(te(r),"Injector")}function Rt(r){return{toString:r}.toString()}var kt=(()=>((kt=kt||{})[kt.OnPush=0]="OnPush",kt[kt.Default=1]="Default",kt))(),Le=(()=>((Le=Le||{})[Le.Emulated=0]="Emulated",Le[Le.None=2]="None",Le[Le.ShadowDom=3]="ShadowDom",Le))();const Je="undefined"!=typeof globalThis&&globalThis,pr="undefined"!=typeof window&&window,fn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=Je||"undefined"!=typeof global&&global||pr||fn,z={},H=[],Y=J({\u0275cmp:J}),De=J({\u0275dir:J}),le=J({\u0275pipe:J}),qe=J({\u0275mod:J}),ot=J({\u0275loc:J}),Ft=J({\u0275fac:J}),_n=J({__NG_ELEMENT_ID__:J});let Fn=0;function Ln(r){return Rt(()=>{const o={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||H,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Le.Emulated,id:"c",styles:r.styles||H,_:null,setInput:null,schemas:r.schemas||null,tView:null},u=r.directives,d=r.features,g=r.pipes;return l.id+=Fn++,l.inputs=gt(r.inputs,o),l.outputs=gt(r.outputs),d&&d.forEach(_=>_(l)),l.directiveDefs=u?()=>("function"==typeof u?u():u).map(fe):null,l.pipeDefs=g?()=>("function"==typeof g?g():g).map(Q):null,l})}function fe(r){return zt(r)||function(r){return r[De]||null}(r)}function Q(r){return function(r){return r[le]||null}(r)}const K={};function we(r){return Rt(()=>{const i={type:r.type,bootstrap:r.bootstrap||H,declarations:r.declarations||H,imports:r.imports||H,exports:r.exports||H,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(K[r.id]=r.type),i})}function je(r,i){return Rt(()=>{const o=ut(r,!0);o.declarations=i.declarations||H,o.imports=i.imports||H,o.exports=i.exports||H})}function gt(r,i){if(null==r)return z;const o={};for(const l in r)if(r.hasOwnProperty(l)){let u=r[l],d=u;Array.isArray(u)&&(d=u[1],u=u[0]),o[u]=l,i&&(i[u]=d)}return o}const mt=Ln;function Zt(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function zt(r){return r[Y]||null}function ut(r,i){const o=r[qe]||null;if(!o&&!0===i)throw new Error(`Type ${te(r)} does not have '\u0275mod' property.`);return o}function vi(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ar(r){return Array.isArray(r)&&!0===r[1]}function Ts(r){return 0!=(8&r.flags)}function zs(r){return 2==(2&r.flags)}function ls(r){return 1==(1&r.flags)}function ai(r){return null!==r.template}function R(r){return 0!=(512&r[2])}function Li(r,i){return r.hasOwnProperty(Ft)?r[Ft]:null}class us{constructor(i,o,l){this.previousValue=i,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function qs(){return $l}function $l(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ud),Ci}function Ci(){const r=Jo(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===z)r.previous=i;else for(let l in i)o[l]=i[l];r.current=null,this.ngOnChanges(i)}}function Ud(r,i,o,l){const u=Jo(r)||function(r,i){return r[Ga]=i}(r,{previous:z,current:null}),d=u.current||(u.current={}),g=u.previous,_=this.declaredInputs[o],E=g[_];d[_]=new us(E&&E.currentValue,i,g===z),r[l]=i}qs.ngInherit=!0;const Ga="__ngSimpleChanges__";function Jo(r){return r[Ga]||null}let qi;function Bd(r){qi=r}function Qn(r){return!!r.listen}const Fr={createRenderer:(r,i)=>void 0!==qi?qi:"undefined"!=typeof document?document:void 0};function Sn(r){for(;Array.isArray(r);)r=r[0];return r}function _o(r,i){return Sn(i[r])}function bi(r,i){return Sn(i[r.index])}function Gl(r,i){return r.data[i]}function Yr(r,i){const o=i[r];return vi(o)?o:o[0]}function zl(r){return 4==(4&r[2])}function Ks(r){return 128==(128&r[2])}function cs(r,i){return null==i?null:r[i]}function yo(r){r[18]=0}function Zs(r,i){r[5]+=i;let o=r,l=r[3];for(;null!==l&&(1===i&&1===o[5]||-1===i&&0===o[5]);)l[5]+=i,o=l,l=l[3]}const _t={lFrame:Qa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ql(){return _t.bindingsEnabled}function Pe(){return _t.lFrame.lView}function Yt(){return _t.lFrame.tView}function Ys(r){return _t.lFrame.contextLView=r,r[8]}function Hn(){let r=Qs();for(;null!==r&&64===r.type;)r=r.parent;return r}function Qs(){return _t.lFrame.currentTNode}function Qr(r,i){const o=_t.lFrame;o.currentTNode=r,o.isParent=i}function ra(){return _t.lFrame.isParent}function Ds(){_t.lFrame.isParent=!1}function Kl(){return _t.isInCheckNoChangesMode}function ia(r){_t.isInCheckNoChangesMode=r}function Ui(){return _t.lFrame.bindingIndex++}function ac(r,i){const o=_t.lFrame;o.bindingIndex=o.bindingRootIndex=r,Za(i)}function Za(r){_t.lFrame.currentDirectiveIndex=r}function Ya(){return _t.lFrame.currentQueryIndex}function Zi(r){_t.lFrame.currentQueryIndex=r}function Zl(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Js(r,i,o){if(o&$e.SkipSelf){let u=i,d=r;for(;!(u=u.parent,null!==u||o&$e.Host||(u=Zl(d),null===u||(d=d[15],10&u.type))););if(null===u)return!1;i=u,r=d}const l=_t.lFrame=vo();return l.currentTNode=i,l.lView=r,!0}function la(r){const i=vo(),o=r[1];_t.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function vo(){const r=_t.lFrame,i=null===r?null:r.child;return null===i?Qa(r):i}function Qa(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Wd(){const r=_t.lFrame;return _t.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Yl=Wd;function Ja(){const r=Wd();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function sr(){return _t.lFrame.selectedIndex}function Yi(r){_t.lFrame.selectedIndex=r}function or(){const r=_t.lFrame;return Gl(r.tView,r.selectedIndex)}function eo(r,i){for(let o=i.directiveStart,l=i.directiveEnd;o<l;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:_,ngAfterViewInit:E,ngAfterViewChecked:w,ngOnDestroy:D}=d;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),_&&((r.contentHooks||(r.contentHooks=[])).push(o,_),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,_)),E&&(r.viewHooks||(r.viewHooks=[])).push(-o,E),w&&((r.viewHooks||(r.viewHooks=[])).push(o,w),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,w)),null!=D&&(r.destroyHooks||(r.destroyHooks=[])).push(o,D)}}function Co(r,i,o){A(r,i,3,o)}function bo(r,i,o,l){(3&r[2])===o&&A(r,i,o,l)}function Xl(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function A(r,i,o,l){const d=null!=l?l:-1,g=i.length-1;let _=0;for(let E=void 0!==l?65535&r[18]:0;E<g;E++)if("number"==typeof i[E+1]){if(_=i[E],null!=l&&_>=l)break}else i[E]<0&&(r[18]+=65536),(_<d||-1==d)&&(S(r,o,i,E),r[18]=(4294901760&r[18])+E+2),E++}function S(r,i,o,l){const u=o[l]<0,d=o[l+1],_=r[u?-o[l]:o[l]];if(u){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(_)}finally{}}}else try{d.call(_)}finally{}}const j=-1;class re{constructor(i,o,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function li(r,i,o){const l=Qn(r);let u=0;for(;u<o.length;){const d=o[u];if("number"==typeof d){if(0!==d)break;u++;const g=o[u++],_=o[u++],E=o[u++];l?r.setAttribute(i,_,E,g):i.setAttributeNS(g,_,E)}else{const g=d,_=o[++u];wi(g)?l&&r.setProperty(i,g,_):l?r.setAttribute(i,g,_):i.setAttribute(g,_),u++}}return u}function Rr(r){return 3===r||4===r||6===r}function wi(r){return 64===r.charCodeAt(0)}function ua(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let l=0;l<i.length;l++){const u=i[l];"number"==typeof u?o=u:0===o||ca(r,o,u,null,-1===o||2===o?i[++l]:null)}}return r}function ca(r,i,o,l,u){let d=0,g=r.length;if(-1===i)g=-1;else for(;d<r.length;){const _=r[d++];if("number"==typeof _){if(_===i){g=-1;break}if(_>i){g=d-1;break}}}for(;d<r.length;){const _=r[d];if("number"==typeof _)break;if(_===o){if(null===l)return void(null!==u&&(r[d+1]=u));if(l===r[d+1])return void(r[d+2]=u)}d++,null!==l&&d++,null!==u&&d++}-1!==g&&(r.splice(g,0,i),d=g+1),r.splice(d++,0,o),null!==l&&r.splice(d++,0,l),null!==u&&r.splice(d++,0,u)}function hs(r){return r!==j}function ei(r){return 32767&r}function da(r,i){let o=function(r){return r>>16}(r),l=i;for(;o>0;)l=l[15],o--;return l}let np=!0;function dc(r){const i=np;return np=r,i}let ip=0;function wo(r,i){const o=hc(r,i);if(-1!==o)return o;const l=i[1];l.firstCreatePass&&(r.injectorIndex=i.length,qd(l.data,r),qd(i,null),qd(l.blueprint,null));const u=fc(r,i),d=r.injectorIndex;if(hs(u)){const g=ei(u),_=da(u,i),E=_[1].data;for(let w=0;w<8;w++)i[d+w]=_[g+w]|E[g+w]}return i[d+8]=u,d}function qd(r,i){r.push(0,0,0,0,0,0,0,0,i)}function hc(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function fc(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,l=null,u=i;for(;null!==u;){const d=u[1],g=d.type;if(l=2===g?d.declTNode:1===g?u[6]:null,null===l)return j;if(o++,u=u[15],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return j}function Ji(r,i,o){!function(r,i,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(_n)&&(l=o[_n]),null==l&&(l=o[_n]=ip++);const u=255&l;i.data[r+(u>>5)]|=1<<u}(r,i,o)}function Xa(r,i,o){if(o&$e.Optional)return r;vt(i,"NodeInjector")}function e0(r,i,o,l){if(o&$e.Optional&&void 0===l&&(l=null),0==(o&($e.Self|$e.Host))){const u=r[9],d=wn(void 0);try{return u?u.get(i,l,o&$e.Optional):Qe(i,l,o&$e.Optional)}finally{wn(d)}}return Xa(l,i,o)}function eu(r,i,o,l=$e.Default,u){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(_n)?r[_n]:void 0;return"number"==typeof i?i>=0?255&i:t0:i}(o);if("function"==typeof d){if(!Js(i,r,l))return l&$e.Host?Xa(u,o,l):e0(i,o,l,u);try{const g=d(l);if(null!=g||l&$e.Optional)return g;vt(o)}finally{Yl()}}else if("number"==typeof d){let g=null,_=hc(r,i),E=j,w=l&$e.Host?i[16][6]:null;for((-1===_||l&$e.SkipSelf)&&(E=-1===_?fc(r,i):i[_+8],E!==j&&t_(l,!1)?(g=i[1],_=ei(E),i=da(E,i)):_=-1);-1!==_;){const D=i[1];if(Kd(d,_,D.data)){const M=pc(_,i,o,g,l,w);if(M!==fs)return M}E=i[_+8],E!==j&&t_(l,i[1].data[_+8]===w)&&Kd(d,_,i)?(g=D,_=ei(E),i=da(E,i)):_=-1}}}return e0(i,o,l,u)}const fs={};function t0(){return new ha(Hn(),Pe())}function pc(r,i,o,l,u,d){const g=i[1],_=g.data[r+8],D=To(_,g,o,null==l?zs(_)&&np:l!=g&&0!=(3&_.type),u&$e.Host&&d===_);return null!==D?cr(i,g,D,_):fs}function To(r,i,o,l,u){const d=r.providerIndexes,g=i.data,_=1048575&d,E=r.directiveStart,D=d>>20,F=u?_+D:r.directiveEnd;for(let W=l?_:_+D;W<F;W++){const ie=g[W];if(W<E&&o===ie||W>=E&&ie.type===o)return W}if(u){const W=g[E];if(W&&ai(W)&&W.type===o)return E}return null}function cr(r,i,o,l){let u=r[o];const d=i.data;if(function(r){return r instanceof re}(u)){const g=u;g.resolving&&function(r,i){throw new xe("200",`Circular dependency in DI detected for ${r}`)}(de(d[o]));const _=dc(g.canSeeViewProviders);g.resolving=!0;const E=g.injectImpl?wn(g.injectImpl):null;Js(r,l,$e.Default);try{u=r[o]=g.factory(void 0,d,r,l),i.firstCreatePass&&o>=l.directiveStart&&function(r,i,o){const{ngOnChanges:l,ngOnInit:u,ngDoCheck:d}=i.type.prototype;if(l){const g=$l(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}u&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,u),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==E&&wn(E),dc(_),g.resolving=!1,Yl()}}return u}function Kd(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function t_(r,i){return!(r&$e.Self||r&$e.Host&&i)}class ha{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,l){return eu(this._tNode,this._lView,i,l,o)}}function Zd(r){return Rt(()=>{const i=r.prototype.constructor,o=i[Ft]||Io(i),l=Object.prototype;let u=Object.getPrototypeOf(r.prototype).constructor;for(;u&&u!==l;){const d=u[Ft]||Io(u);if(d&&d!==o)return d;u=Object.getPrototypeOf(u)}return d=>new d})}function Io(r){return ge(r)?()=>{const i=Io(G(r));return i&&i()}:Li(r)}function tu(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const l=o.length;let u=0;for(;u<l;){const d=o[u];if(Rr(d))break;if(0===d)u+=2;else if("number"==typeof d)for(u++;u<l&&"string"==typeof o[u];)u++;else{if(d===i)return o[u+1];u+=2}}}return null}(Hn(),r)}const As="__parameters__";function Jn(r,i,o){return Rt(()=>{const l=function(r){return function(...o){if(r){const l=r(...o);for(const u in l)this[u]=l[u]}}}(i);function u(...d){if(this instanceof u)return l.apply(this,d),this;const g=new u(...d);return _.annotation=g,_;function _(E,w,D){const M=E.hasOwnProperty(As)?E[As]:Object.defineProperty(E,As,{value:[]})[As];for(;M.length<=D;)M.push(null);return(M[D]=M[D]||[]).push(g),E}}return o&&(u.prototype=Object.create(o.prototype)),u.prototype.ngMetadataName=r,u.annotationCls=u,u})}class Nn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=an({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const n_=new Nn("AnalyzeForEntryComponents"),mc=Function;function Tn(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let l=r[o];Array.isArray(l)?(i===r&&(i=r.slice(0,o)),Tn(l,i)):i!==r&&i.push(l)}return i}function wr(r,i){r.forEach(o=>Array.isArray(o)?wr(o,i):i(o))}function ps(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function pa(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function Ro(r,i){const o=[];for(let l=0;l<r;l++)o.push(i);return o}function Gn(r,i,o){let l=Po(r,i);return l>=0?r[1|l]=o:(l=~l,function(r,i,o,l){let u=r.length;if(u==i)r.push(o,l);else if(1===u)r.push(l,r[0]),r[0]=o;else{for(u--,r.push(r[u-1],r[u]);u>i;)r[u]=r[u-2],u--;r[i]=o,r[i+1]=l}}(r,l,i,o)),l}function yc(r,i){const o=Po(r,i);if(o>=0)return r[1|o]}function Po(r,i){return function(r,i,o){let l=0,u=r.length>>o;for(;u!==l;){const d=l+(u-l>>1),g=r[d<<o];if(i===g)return d<<o;g>i?u=d:l=d+1}return~(u<<o)}(r,i,1)}const ou={},Mo="__NG_DI_FLAG__",Ti="ngTempTokenPath",u_=/\n/gm,No="__source",nh=J({provide:String,useValue:J});let _a;function ya(r){const i=_a;return _a=r,i}function dp(r,i=$e.Default){if(void 0===_a)throw new Error("inject() must be called from an injection context");return null===_a?Qe(r,void 0,i):_a.get(r,i&$e.Optional?null:void 0,i)}function bn(r,i=$e.Default){return(Tt||dp)(G(r),i)}function no(r){const i=[];for(let o=0;o<r.length;o++){const l=G(r[o]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let u,d=$e.Default;for(let g=0;g<l.length;g++){const _=l[g],E=rh(_);"number"==typeof E?-1===E?u=_.token:d|=E:u=_}i.push(bn(u,d))}else i.push(bn(l))}return i}function Rs(r,i){return r[Mo]=i,r.prototype[Mo]=i,r}function rh(r){return r[Mo]}function fp(r,i,o,l){const u=r[Ti];throw i[No]&&u.unshift(i[No]),r.message=function(r,i,o,l=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let u=te(i);if(Array.isArray(i))u=i.map(te).join(" -> ");else if("object"==typeof i){let d=[];for(let g in i)if(i.hasOwnProperty(g)){let _=i[g];d.push(g+":"+("string"==typeof _?JSON.stringify(_):te(_)))}u=`{${d.join(", ")}}`}return`${o}${l?"("+l+")":""}[${u}]: ${r.replace(u_,"\n  ")}`}("\n"+r.message,u,o,l),r.ngTokenPath=u,r[Ti]=null,r}const el=Rs(Jn("Inject",r=>({token:r})),-1),ui=Rs(Jn("Optional"),8),Oo=Rs(Jn("SkipSelf"),4);let Ea;function nl(r){var i;return(null===(i=function(){if(void 0===Ea&&(Ea=null,Gt.trustedTypes))try{Ea=Gt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Ea}())||void 0===i?void 0:i.createHTML(r))||r}class Ca{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class f_ extends Ca{getTypeName(){return"HTML"}}class p_ extends Ca{getTypeName(){return"Style"}}class Cp extends Ca{getTypeName(){return"Script"}}class bp extends Ca{getTypeName(){return"URL"}}class g_ extends Ca{getTypeName(){return"ResourceURL"}}function ro(r){return r instanceof Ca?r.changingThisBreaksApplicationSecurity:r}function Vo(r,i){const o=wp(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function wp(r){return r instanceof Ca&&r.getTypeName()||null}function Tp(r){return new f_(r)}function Jt(r){return new p_(r)}function m_(r){return new Cp(r)}function rl(r){return new bp(r)}function lh(r){return new g_(r)}class __{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(nl(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class y_{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const l=this.inertDocument.createElement("body");o.appendChild(l)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=nl(i),o;const l=this.inertDocument.createElement("body");return l.innerHTML=nl(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(i){const o=i.attributes;for(let u=o.length-1;0<u;u--){const g=o.item(u).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let l=i.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Xi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function il(r){return(r=String(r)).match(Xi)||r.match(Tc)?r:"unsafe:"+r}function zn(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function ni(...r){const i={};for(const o of r)for(const l in o)o.hasOwnProperty(l)&&(i[l]=!0);return i}const Dp=zn("area,br,col,hr,img,wbr"),uh=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ic=zn("rp,rt"),ch=ni(Dp,ni(uh,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ni(Ic,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ni(Ic,uh)),v=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),p=zn("srcset"),I=ni(v,p,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),P=zn("script,style,template");class se{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,l=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?l=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,l&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let u=this.checkClobberedElement(o,o.nextSibling);if(u){o=u;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!ch.hasOwnProperty(o))return this.sanitizedSomething=!0,!P.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const l=i.attributes;for(let u=0;u<l.length;u++){const d=l.item(u),g=d.name,_=g.toLowerCase();if(!I.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let E=d.value;v[_]&&(E=il(E)),p[_]&&(r=E,E=(r=String(r)).split(",").map(i=>il(i.trim())).join(", ")),this.buf.push(" ",g,'="',Be(E),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();ch.hasOwnProperty(o)&&!Dp.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(Be(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Te=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ze=/([^\#-~ |!])/g;function Be(r){return r.replace(/&/g,"&amp;").replace(Te,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Ze,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let at;function yn(r,i){let o=null;try{at=at||function(r){const i=new y_(r);return function(){try{return!!(new window.DOMParser).parseFromString(nl(""),"text/html")}catch(r){return!1}}()?new __(i):i}(r);let l=i?String(i):"";o=at.getInertBodyElement(l);let u=5,d=l;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,l=d,d=o.innerHTML,o=at.getInertBodyElement(l)}while(l!==d);return nl((new se).sanitizeChildren(vn(o)||o))}finally{if(o){const l=vn(o)||o;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function vn(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var In=(()=>((In=In||{})[In.NONE=0]="NONE",In[In.HTML=1]="HTML",In[In.STYLE=2]="STYLE",In[In.SCRIPT=3]="SCRIPT",In[In.URL=4]="URL",In[In.RESOURCE_URL=5]="RESOURCE_URL",In))();function sl(r){const i=function(){const r=Pe();return r&&r[12]}();return i?i.sanitize(In.URL,r)||"":Vo(r,"URL")?ro(r):il(ae(r))}const T_="__ngContext__";function ri(r,i){r[T_]=i}function io(r){const i=function(r){return r[T_]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function Np(r){return r.ngOriginalError}function yI(r,...i){r.error(...i)}class wa{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),l=this._findContext(i),u=(r=i)&&r.ngErrorLogger||yI;var r;u(this._console,"ERROR",i),o&&u(this._console,"ORIGINAL ERROR",o),l&&u(this._console,"ERROR CONTEXT",l)}_findContext(i){return i?i.ngDebugContext||this._findContext(Np(i)):null}_findOriginalError(i){let o=i&&Np(i);for(;o&&Np(o);)o=Np(o);return o||null}}const Op=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function Uo(r){return r instanceof Function?r():r}var Bo=(()=>((Bo=Bo||{})[Bo.Important=1]="Important",Bo[Bo.DashCase=2]="DashCase",Bo))();function M_(r,i){return undefined(r,i)}function vh(r){const i=r[3];return Ar(i)?i[3]:i}function kp(r){return w0(r[13])}function Fp(r){return w0(r[4])}function w0(r){for(;null!==r&&!Ar(r);)r=r[4];return r}function al(r,i,o,l,u){if(null!=l){let d,g=!1;Ar(l)?d=l:vi(l)&&(g=!0,l=l[0]);const _=Sn(l);0===r&&null!==o?null==u?S0(i,o,_):pu(i,o,_,u||null,!0):1===r&&null!==o?pu(i,o,_,u||null,!0):2===r?function(r,i,o){const l=$p(r,i);l&&function(r,i,o,l){Qn(r)?r.removeChild(i,o,l):i.removeChild(o)}(r,l,i,o)}(i,_,g):3===r&&i.destroyNode(_),null!=d&&function(r,i,o,l,u){const d=o[7];d!==Sn(o)&&al(i,r,l,d,u);for(let _=10;_<o.length;_++){const E=o[_];Ch(E[1],E,r,i,l,d)}}(i,r,d,o,u)}}function Mc(r,i,o){return Qn(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function O_(r,i){const o=r[9],l=o.indexOf(i),u=i[3];1024&i[2]&&(i[2]&=-1025,Zs(u,-1)),o.splice(l,1)}function Up(r,i){if(r.length<=10)return;const o=10+i,l=r[o];if(l){const u=l[17];null!==u&&u!==r&&O_(u,l),i>0&&(r[o-1][4]=l[4]);const d=pa(r,10+i);!function(r,i){Ch(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const g=d[19];null!==g&&g.detachView(d[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Nc(r,i){if(!(256&i[2])){const o=i[11];Qn(o)&&o.destroyNode&&Ch(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return Bp(r[1],r);for(;i;){let o=null;if(vi(i))o=i[13];else{const l=i[10];l&&(o=l)}if(!o){for(;i&&!i[4]&&i!==r;)vi(i)&&Bp(i[1],i),i=i[3];null===i&&(i=r),vi(i)&&Bp(i[1],i),o=i&&i[4]}i=o}}(i)}}function Bp(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let l=0;l<o.length;l+=2){const u=i[o[l]];if(!(u instanceof re)){const d=o[l+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const _=u[d[g]],E=d[g+1];try{E.call(_)}finally{}}else try{d.call(u)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,l=i[7];let u=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],_="function"==typeof g?g(i):Sn(i[g]),E=l[u=o[d+2]],w=o[d+3];"boolean"==typeof w?_.removeEventListener(o[d],E,w):w>=0?l[u=w]():l[u=-w].unsubscribe(),d+=2}else{const g=l[u=o[d+1]];o[d].call(g)}if(null!==l){for(let d=u+1;d<l.length;d++)l[d]();i[7]=null}}(r,i),1===i[1].type&&Qn(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&Ar(i[3])){o!==i[3]&&O_(o,i);const l=i[19];null!==l&&l.detachView(r)}}}function D0(r,i,o){return function(r,i,o){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return o[0];if(2&l.flags){const u=r.data[l.directiveStart].encapsulation;if(u===Le.None||u===Le.Emulated)return null}return bi(l,o)}(r,i.parent,o)}function pu(r,i,o,l,u){Qn(r)?r.insertBefore(i,o,l,u):i.insertBefore(o,l,u)}function S0(r,i,o){Qn(r)?r.appendChild(i,o):i.appendChild(o)}function R0(r,i,o,l,u){null!==l?pu(r,i,o,l,u):S0(r,i,o)}function $p(r,i){return Qn(r)?r.parentNode(i):i.parentNode}function Eh(r,i,o){return N0(r,i,o)}let N0=function(r,i,o){return 40&r.type?bi(r,o):null};function ll(r,i,o,l){const u=D0(r,l,i),d=i[11],_=Eh(l.parent||i[6],l,i);if(null!=u)if(Array.isArray(o))for(let E=0;E<o.length;E++)R0(d,u,o[E],_,!1);else R0(d,u,o,_,!1)}function Hp(r,i){if(null!==i){const o=i.type;if(3&o)return bi(i,r);if(4&o)return gu(-1,r[i.index]);if(8&o){const l=i.child;if(null!==l)return Hp(r,l);{const u=r[i.index];return Ar(u)?gu(-1,u):Sn(u)}}if(32&o)return M_(i,r)()||Sn(r[i.index]);{const l=x0(r,i);return null!==l?Array.isArray(l)?l[0]:Hp(vh(r[16]),l):Hp(r,i.next)}}return null}function x0(r,i){return null!==i?r[16][6].projection[i.projection]:null}function gu(r,i){const o=10+r+1;if(o<i.length){const l=i[o],u=l[1].firstChild;if(null!==u)return Hp(l,u)}return i[7]}function k_(r,i,o,l,u,d,g){for(;null!=o;){const _=l[o.index],E=o.type;if(g&&0===i&&(_&&ri(Sn(_),l),o.flags|=4),64!=(64&o.flags))if(8&E)k_(r,i,o.child,l,u,d,!1),al(i,r,u,_,d);else if(32&E){const w=M_(o,l);let D;for(;D=w();)al(i,r,u,D,d);al(i,r,u,_,d)}else 16&E?F0(r,i,l,o,u,d):al(i,r,u,_,d);o=g?o.projectionNext:o.next}}function Ch(r,i,o,l,u,d){k_(o,l,r.firstChild,i,u,d,!1)}function F0(r,i,o,l,u,d){const g=o[16],E=g[6].projection[l.projection];if(Array.isArray(E))for(let w=0;w<E.length;w++)al(i,r,u,E[w],d);else k_(r,i,E,g[3],u,d,!0)}function L0(r,i,o){Qn(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function F_(r,i,o){Qn(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function L_(r,i,o){let l=r.length;for(;;){const u=r.indexOf(i,o);if(-1===u)return u;if(0===u||r.charCodeAt(u-1)<=32){const d=i.length;if(u+d===l||r.charCodeAt(u+d)<=32)return u}o=u+1}}const V0="ng-template";function MI(r,i,o){let l=0;for(;l<r.length;){let u=r[l++];if(o&&"class"===u){if(u=r[l],-1!==L_(u.toLowerCase(),i,0))return!0}else if(1===u){for(;l<r.length&&"string"==typeof(u=r[l++]);)if(u.toLowerCase()===i)return!0;return!1}}return!1}function U0(r){return 4===r.type&&r.value!==V0}function NI(r,i,o){return i===(4!==r.type||o?r.value:V0)}function B0(r,i,o){let l=4;const u=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(Rr(r[i]))return i;return r.length}(u);let g=!1;for(let _=0;_<i.length;_++){const E=i[_];if("number"!=typeof E){if(!g)if(4&l){if(l=2|1&l,""!==E&&!NI(r,E,o)||""===E&&1===i.length){if(jo(l))return!1;g=!0}}else{const w=8&l?E:i[++_];if(8&l&&null!==r.attrs){if(!MI(r.attrs,w,o)){if(jo(l))return!1;g=!0}continue}const M=j0(8&l?"class":E,u,U0(r),o);if(-1===M){if(jo(l))return!1;g=!0;continue}if(""!==w){let F;F=M>d?"":u[M+1].toLowerCase();const W=8&l?F:null;if(W&&-1!==L_(W,w,0)||2&l&&w!==F){if(jo(l))return!1;g=!0}}}}else{if(!g&&!jo(l)&&!jo(E))return!1;if(g&&jo(E))continue;g=!1,l=E|1&l}}return jo(l)||g}function jo(r){return 0==(1&r)}function j0(r,i,o,l){if(null===i)return-1;let u=0;if(l||!o){let d=!1;for(;u<i.length;){const g=i[u];if(g===r)return u;if(3===g||6===g)d=!0;else{if(1===g||2===g){let _=i[++u];for(;"string"==typeof _;)_=i[++u];continue}if(4===g)break;if(0===g){u+=4;continue}}u+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const l=r[o];if("number"==typeof l)return-1;if(l===i)return o;o++}return-1}(i,r)}function V_(r,i,o=!1){for(let l=0;l<i.length;l++)if(B0(r,i[l],o))return!0;return!1}function xI(r,i){e:for(let o=0;o<i.length;o++){const l=i[o];if(r.length===l.length){for(let u=0;u<r.length;u++)if(r[u]!==l[u])continue e;return!0}}return!1}function W0(r,i){return r?":not("+i.trim()+")":i}function kI(r){let i=r[0],o=1,l=2,u="",d=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&l){const _=r[++o];u+="["+g+(_.length>0?'="'+_+'"':"")+"]"}else 8&l?u+="."+g:4&l&&(u+=" "+g);else""!==u&&!jo(g)&&(i+=W0(d,u),u=""),l=g,d=d||!jo(l);o++}return""!==u&&(i+=W0(d,u)),i}const Vt={};function G0(r){z0(Yt(),Pe(),sr()+r,Kl())}function z0(r,i,o,l){if(!l)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Co(i,d,o)}else{const d=r.preOrderHooks;null!==d&&bo(i,d,0,o)}Yi(o)}function xc(r,i){return r<<17|i<<2}function Ms(r){return r>>17&32767}function B_(r){return 2|r}function Ia(r){return(131068&r)>>2}function j_(r,i){return-131069&r|i<<2}function Wp(r){return 1|r}function Aa(r,i){const o=r.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const u=o[l],d=o[l+1];if(-1!==d){const g=r.data[d];Zi(u),g.contentQueries(2,i[d],d)}}}function Dh(r,i,o,l,u,d,g,_,E,w){const D=i.blueprint.slice();return D[0]=u,D[2]=140|l,yo(D),D[3]=D[15]=r,D[8]=o,D[10]=g||r&&r[10],D[11]=_||r&&r[11],D[12]=E||r&&r[12]||null,D[9]=w||r&&r[9]||null,D[6]=d,D[16]=2==i.type?r[16]:D,D}function Vc(r,i,o,l,u){let d=r.data[i];if(null===d)d=function(r,i,o,l,u){const d=Qs(),g=ra(),E=r.data[i]=function(r,i,o,l,u,d){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,i,l,u);return null===r.firstChild&&(r.firstChild=E),null!==d&&(g?null==d.child&&null!==E.parent&&(d.child=E):null===d.next&&(d.next=E)),E}(r,i,o,l,u),_t.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=l,d.attrs=u;const g=function(){const r=_t.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return Qr(d,!0),d}function Uc(r,i,o,l){if(0===o)return-1;const u=i.length;for(let d=0;d<o;d++)i.push(l),r.blueprint.push(l),r.data.push(null);return u}function Ah(r,i,o){la(i);try{const l=r.viewQuery;null!==l&&Jp(1,l,o);const u=r.template;null!==u&&rC(r,i,u,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Aa(r,i),r.staticViewQueries&&Jp(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)Q_(r,i[o])}(i,d)}catch(l){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),l}finally{i[2]&=-5,Ja()}}function Bc(r,i,o,l){const u=i[2];if(256==(256&u))return;la(i);const d=Kl();try{yo(i),function(r){_t.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&rC(r,i,o,2,l);const g=3==(3&u);if(!d)if(g){const w=r.preOrderCheckHooks;null!==w&&Co(i,w,null)}else{const w=r.preOrderHooks;null!==w&&bo(i,w,0,null),Xl(i,0)}if(function(r){for(let i=kp(r);null!==i;i=Fp(i)){if(!i[2])continue;const o=i[9];for(let l=0;l<o.length;l++){const u=o[l],d=u[3];0==(1024&u[2])&&Zs(d,1),u[2]|=1024}}}(i),function(r){for(let i=kp(r);null!==i;i=Fp(i))for(let o=10;o<i.length;o++){const l=i[o],u=l[1];Ks(l)&&Bc(u,l,u.template,l[8])}}(i),null!==r.contentQueries&&Aa(r,i),!d)if(g){const w=r.contentCheckHooks;null!==w&&Co(i,w)}else{const w=r.contentHooks;null!==w&&bo(i,w,1),Xl(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const u=o[l];if(u<0)Yi(~u);else{const d=u,g=o[++l],_=o[++l];ac(g,d),_(2,i[d])}}}finally{Yi(-1)}}(r,i);const _=r.components;null!==_&&function(r,i){for(let o=0;o<i.length;o++)nD(r,i[o])}(i,_);const E=r.viewQuery;if(null!==E&&Jp(2,E,l),!d)if(g){const w=r.viewCheckHooks;null!==w&&Co(i,w)}else{const w=r.viewHooks;null!==w&&bo(i,w,2),Xl(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Zs(i[3],-1))}finally{Ja()}}function WI(r,i,o,l){const u=i[10],d=!Kl(),g=zl(i);try{d&&!g&&u.begin&&u.begin(),g&&Ah(r,i,l),Bc(r,i,o,l)}finally{d&&!g&&u.end&&u.end()}}function rC(r,i,o,l,u){const d=sr(),g=2&l;try{Yi(-1),g&&i.length>20&&z0(r,i,20,Kl()),o(l,u)}finally{Yi(d)}}function iC(r,i,o){if(Ts(i)){const u=i.directiveEnd;for(let d=i.directiveStart;d<u;d++){const g=r.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}function z_(r,i,o){!ql()||(function(r,i,o,l){const u=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||wo(o,i),ri(l,i);const g=o.initialInputs;for(let _=u;_<d;_++){const E=r.data[_],w=ai(E);w&&JI(i,o,E);const D=cr(i,r,_,o);ri(D,i),null!==g&&uC(0,_-u,D,E,0,g),w&&(Yr(o.index,i)[8]=D)}}(r,i,o,bi(o,i)),128==(128&o.flags)&&function(r,i,o){const l=o.directiveStart,u=o.directiveEnd,g=o.index,_=_t.lFrame.currentDirectiveIndex;try{Yi(g);for(let E=l;E<u;E++){const w=r.data[E],D=i[E];Za(E),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&Ai(w,D)}}finally{Yi(-1),Za(_)}}(r,i,o))}function Un(r,i,o=bi){const l=i.localNames;if(null!==l){let u=i.index+1;for(let d=0;d<l.length;d+=2){const g=l[d+1],_=-1===g?o(i,r):r[g];r[u++]=_}}}function Ns(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=q_(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function q_(r,i,o,l,u,d,g,_,E,w){const D=20+l,M=D+u,F=function(r,i){const o=[];for(let l=0;l<i;l++)o.push(l<r?null:Vt);return o}(D,M),W="function"==typeof w?w():w;return F[1]={type:r,blueprint:F,template:o,queries:null,viewQuery:_,declTNode:i,data:F.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:E,consts:W,incompleteFirstPass:!1}}function qp(r,i,o,l){const u=ty(i);null===o?u.push(l):(u.push(o),r.firstCreatePass&&ny(r).push(l,u.length-1))}function oC(r,i,o){for(let l in r)if(r.hasOwnProperty(l)){const u=r[l];(o=null===o?{}:o).hasOwnProperty(l)?o[l].push(i,u):o[l]=[i,u]}return o}function Hr(r,i,o,l,u,d,g,_){const E=bi(i,o);let D,w=i.inputs;!_&&null!=w&&(D=w[l])?(ry(r,o,D,l,u),zs(i)&&function(r,i){const o=Yr(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(l=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(l),u=null!=g?g(u,i.value||"",l):u,Qn(d)?d.setProperty(E,l,u):wi(l)||(E.setProperty?E.setProperty(l,u):E[l]=u))}function Kp(r,i,o,l){let u=!1;if(ql()){const d=function(r,i,o){const l=r.directiveRegistry;let u=null;if(l)for(let d=0;d<l.length;d++){const g=l[d];V_(o,g.selectors,!1)&&(u||(u=[]),Ji(wo(o,i),r,g.type),ai(g)?(Rh(r,o),u.unshift(g)):u.push(g))}return u}(r,i,o),g=null===l?null:{"":-1};if(null!==d){u=!0,so(o,r.data.length,d.length);for(let D=0;D<d.length;D++){const M=d[D];M.providersResolver&&M.providersResolver(M)}let _=!1,E=!1,w=Uc(r,i,d.length,null);for(let D=0;D<d.length;D++){const M=d[D];o.mergedAttrs=ua(o.mergedAttrs,M.hostAttrs),fl(r,o,i,w,M),Sa(w,M,g),null!==M.contentQueries&&(o.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(o.flags|=128);const F=M.type.prototype;!_&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),_=!0),!E&&(F.ngOnChanges||F.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),E=!0),w++}!function(r,i){const l=i.directiveEnd,u=r.data,d=i.attrs,g=[];let _=null,E=null;for(let w=i.directiveStart;w<l;w++){const D=u[w],M=D.inputs,F=null===d||U0(i)?null:ii(M,d);g.push(F),_=oC(M,w,_),E=oC(D.outputs,w,E)}null!==_&&(_.hasOwnProperty("class")&&(i.flags|=16),_.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=_,i.outputs=E}(r,o)}g&&function(r,i,o){if(i){const l=r.localNames=[];for(let u=0;u<i.length;u+=2){const d=o[i[u+1]];if(null==d)throw new xe("301",`Export of name '${i[u+1]}' not found!`);l.push(i[u],d)}}}(o,l,g)}return o.mergedAttrs=ua(o.mergedAttrs,o.attrs),u}function Wr(r,i,o,l,u,d){const g=d.hostBindings;if(g){let _=r.hostBindingOpCodes;null===_&&(_=r.hostBindingOpCodes=[]);const E=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(_)!=E&&_.push(E),_.push(l,u,g)}}function Ai(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Rh(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function Sa(r,i,o){if(o){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)o[i.exportAs[l]]=r;ai(i)&&(o[""]=r)}}function so(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function fl(r,i,o,l,u){r.data[l]=u;const d=u.factory||(u.factory=Li(u.type)),g=new re(d,ai(u),null);r.blueprint[l]=g,o[l]=g,Wr(r,i,0,l,Uc(r,o,u.hostVars,Vt),u)}function JI(r,i,o){const l=bi(i,r),u=Ns(o),d=r[10],g=Ra(r,Dh(r,u,null,o.onPush?64:16,l,i,d,d.createRenderer(l,o),null,null));r[i.index]=g}function ns(r,i,o,l,u,d){const g=bi(r,i);!function(r,i,o,l,u,d,g){if(null==d)Qn(r)?r.removeAttribute(i,u,o):i.removeAttribute(u);else{const _=null==g?ae(d):g(d,l||"",u);Qn(r)?r.setAttribute(i,u,_,o):o?i.setAttributeNS(o,u,_):i.setAttribute(u,_)}}(i[11],g,d,r.value,o,l,u)}function uC(r,i,o,l,u,d){const g=d[i];if(null!==g){const _=l.setInput;for(let E=0;E<g.length;){const w=g[E++],D=g[E++],M=g[E++];null!==_?l.setInput(o,M,w,D):o[D]=M}}}function ii(r,i){let o=null,l=0;for(;l<i.length;){const u=i[l];if(0!==u)if(5!==u){if("number"==typeof u)break;r.hasOwnProperty(u)&&(null===o&&(o=[]),o.push(u,r[u],i[l+1])),l+=2}else l+=2;else l+=4}return o}function cC(r,i,o,l){return new Array(r,!0,!1,i,null,0,l,o,null,null)}function nD(r,i){const o=Yr(i,r);if(Ks(o)){const l=o[1];80&o[2]?Bc(l,o,l.template,o[8]):o[5]>0&&Zp(o)}}function Zp(r){for(let l=kp(r);null!==l;l=Fp(l))for(let u=10;u<l.length;u++){const d=l[u];if(1024&d[2]){const g=d[1];Bc(g,d,g.template,d[8])}else d[5]>0&&Zp(d)}const o=r[1].components;if(null!==o)for(let l=0;l<o.length;l++){const u=Yr(o[l],r);Ks(u)&&u[5]>0&&Zp(u)}}function Q_(r,i){const o=Yr(i,r),l=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(l,o),Ah(l,o,o[8])}function Ra(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function J_(r){for(;r;){r[2]|=64;const i=vh(r);if(R(r)&&!i)return r;r=i}return null}function ey(r,i,o){const l=i[10];l.begin&&l.begin();try{Bc(r,i,r.template,o)}catch(u){throw Xp(i,u),u}finally{l.end&&l.end()}}function Wc(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],l=io(o),u=l[1];WI(u,l,u.template,o)}}(r[8])}function Jp(r,i,o){Zi(0),i(r,o)}const hC=(()=>Promise.resolve(null))();function ty(r){return r[7]||(r[7]=[])}function ny(r){return r.cleanup||(r.cleanup=[])}function Xp(r,i){const o=r[9],l=o?o.get(wa,null):null;l&&l.handleError(i)}function ry(r,i,o,l,u){for(let d=0;d<o.length;){const g=o[d++],_=o[d++],E=i[g],w=r.data[g];null!==w.setInput?w.setInput(E,u,l,_):E[_]=u}}function Ho(r,i,o){const l=_o(i,r);!function(r,i,o){Qn(r)?r.setValue(i,o):i.textContent=o}(r[11],l,o)}function Gc(r,i,o){let l=o?r.styles:null,u=o?r.classes:null,d=0;if(null!==i)for(let g=0;g<i.length;g++){const _=i[g];"number"==typeof _?d=_:1==d?u=X(u,_):2==d&&(l=X(l,_+": "+i[++g]+";"))}o?r.styles=l:r.stylesWithoutHost=l,o?r.classes=u:r.classesWithoutHost=u}const pl=new Nn("INJECTOR",-1);class eg{get(i,o=ou){if(o===ou){const l=new Error(`NullInjectorError: No provider for ${te(i)}!`);throw l.name="NullInjectorError",l}return o}}const yu=new Nn("Set Injector scope."),Nh={},sD={};let tg;function gC(){return void 0===tg&&(tg=new eg),tg}function mC(r,i=null,o=null,l){return new _C(r,o,i||gC(),l)}class _C{constructor(i,o,l,u=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&wr(o,_=>this.processProvider(_,i,o)),wr([i],_=>this.processInjectorType(_,[],d)),this.records.set(pl,zc(void 0,this));const g=this.records.get(yu);this.scope=null!=g?g.value:null,this.source=u||("object"==typeof i?null:te(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=ou,l=$e.Default){this.assertNotDestroyed();const u=ya(this),d=wn(void 0);try{if(!(l&$e.SkipSelf)){let _=this.records.get(i);if(void 0===_){const E=("function"==typeof(r=i)||"object"==typeof r&&r instanceof Nn)&&Nt(i);_=E&&this.injectableDefInScope(E)?zc(ng(i),Nh):null,this.records.set(i,_)}if(null!=_)return this.hydrate(i,_)}return(l&$e.Self?gC():this.parent).get(i,o=l&$e.Optional&&o===ou?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[Ti]=g[Ti]||[]).unshift(te(i)),u)throw g;return fp(g,i,"R3InjectorError",this.source)}throw g}finally{wn(d),ya(u)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((l,u)=>i.push(te(u))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,l){if(!(i=G(i)))return!1;let u=rr(i);const d=null==u&&i.ngModule||void 0,g=void 0===d?i:d,_=-1!==l.indexOf(g);if(void 0!==d&&(u=rr(d)),null==u)return!1;if(null!=u.imports&&!_){let D;l.push(g);try{wr(u.imports,M=>{this.processInjectorType(M,o,l)&&(void 0===D&&(D=[]),D.push(M))})}finally{}if(void 0!==D)for(let M=0;M<D.length;M++){const{ngModule:F,providers:W}=D[M];wr(W,ie=>this.processProvider(ie,F,W||H))}}this.injectorDefTypes.add(g);const E=Li(g)||(()=>new g);this.records.set(g,zc(E,Nh));const w=u.providers;if(null!=w&&!_){const D=i;wr(w,M=>this.processProvider(M,D,w))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,l){let u=vu(i=G(i))?i:G(i&&i.provide);const d=EC(r=i)?zc(void 0,r.useValue):zc(vC(r),Nh);var r;if(vu(i)||!0!==i.multi)this.records.get(u);else{let g=this.records.get(u);g||(g=zc(void 0,Nh,!0),g.factory=()=>no(g.multi),this.records.set(u,g)),u=i,g.multi.push(i)}this.records.set(u,d)}hydrate(i,o){return o.value===Nh&&(o.value=sD,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=G(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function ng(r){const i=Nt(r),o=null!==i?i.factory:Li(r);if(null!==o)return o;if(r instanceof Nn)throw new Error(`Token ${te(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const l=Ro(i,"?");throw new Error(`Can't resolve all parameters for ${te(r)}: (${l.join(", ")}).`)}const o=function(r){const i=r&&(r[Oe]||r[mn]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function vC(r,i,o){let l;if(vu(r)){const u=G(r);return Li(u)||ng(u)}if(EC(r))l=()=>G(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))l=()=>r.useFactory(...no(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))l=()=>bn(G(r.useExisting));else{const u=G(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Li(u)||ng(u);l=()=>new u(...no(r.deps))}return l}function zc(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function EC(r){return null!==r&&"object"==typeof r&&nh in r}function vu(r){return"function"==typeof r}const wC=function(r,i,o){return function(r,i=null,o=null,l){const u=mC(r,i,o,l);return u._resolveInjectorDefTypes(),u}({name:o},i,r,o)};let qn=(()=>{class r{static create(o,l){return Array.isArray(o)?wC(o,l,""):wC(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=ou,r.NULL=new eg,r.\u0275prov=an({token:r,providedIn:"any",factory:()=>bn(pl)}),r.__NG_ELEMENT_ID__=-1,r})();function xh(r,i){eo(io(r)[1],Hn())}function sg(r){let i=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const l=[r];for(;i;){let u;if(ai(r))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");u=i.\u0275dir}if(u){if(o){l.push(u);const g=r;g.inputs=gy(r.inputs),g.declaredInputs=gy(r.declaredInputs),g.outputs=gy(r.outputs);const _=u.hostBindings;_&&bu(r,_);const E=u.viewQuery,w=u.contentQueries;if(E&&mD(r,E),w&&kC(r,w),oe(r.inputs,u.inputs),oe(r.declaredInputs,u.declaredInputs),oe(r.outputs,u.outputs),ai(u)&&u.data.animation){const D=r.data;D.animation=(D.animation||[]).concat(u.data.animation)}}const d=u.features;if(d)for(let g=0;g<d.length;g++){const _=d[g];_&&_.ngInherit&&_(r),_===sg&&(o=!1)}}i=Object.getPrototypeOf(i)}!function(r){let i=0,o=null;for(let l=r.length-1;l>=0;l--){const u=r[l];u.hostVars=i+=u.hostVars,u.hostAttrs=ua(u.hostAttrs,o=ua(o,u.hostAttrs))}}(l)}function gy(r){return r===z?{}:r===H?[]:r}function mD(r,i){const o=r.viewQuery;r.viewQuery=o?(l,u)=>{i(l,u),o(l,u)}:i}function kC(r,i){const o=r.contentQueries;r.contentQueries=o?(l,u,d)=>{i(l,u,d),o(l,u,d)}:i}function bu(r,i){const o=r.hostBindings;r.hostBindings=o?(l,u)=>{i(l,u),o(l,u)}:i}let kh=null;function ji(){if(!kh){const r=Gt.Symbol;if(r&&r.iterator)kh=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const l=i[o];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(kh=l)}}}return kh}function Lh(r){return!!Vh(r)&&(Array.isArray(r)||!(r instanceof Map)&&ji()in r)}function Vh(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function hi(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function lg(r,i,o,l){const u=Pe();return hi(u,Ui(),i)&&(Yt(),ns(or(),u,r,i,o,l)),lg}function cg(r,i,o,l,u,d,g,_){const E=Pe(),w=Yt(),D=r+20,M=w.firstCreatePass?function(r,i,o,l,u,d,g,_,E){const w=i.consts,D=Vc(i,r,4,g||null,cs(w,_));Kp(i,o,D,cs(w,E)),eo(i,D);const M=D.tViews=q_(2,D,l,u,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,w);return null!==i.queries&&(i.queries.template(i,D),M.queries=i.queries.embeddedTView(D)),D}(D,w,E,i,o,l,u,d,g):w.data[D];Qr(M,!1);const F=E[11].createComment("");ll(w,E,F,M),ri(F,E),Ra(E,E[D]=cC(F,E,F,M)),ls(M)&&z_(w,E,M),null!=g&&Un(E,M,_)}function dg(r){return function(r,i){return r[i]}(_t.lFrame.contextLView,20+r)}function Oa(r,i=$e.Default){const o=Pe();return null===o?bn(r,i):eu(Hn(),o,G(r),i)}function sd(r,i,o){const l=Pe();return hi(l,Ui(),i)&&Hr(Yt(),or(),l,r,i,l[11],o,!1),sd}function xa(r,i,o,l,u){const g=u?"class":"style";ry(r,o,i.inputs[g],g,l)}function My(r,i,o,l){const u=Pe(),d=Yt(),g=20+r,_=u[11],E=u[g]=Mc(_,i,_t.lFrame.currentNamespace),w=d.firstCreatePass?function(r,i,o,l,u,d,g){const _=i.consts,w=Vc(i,r,2,u,cs(_,d));return Kp(i,o,w,cs(_,g)),null!==w.attrs&&Gc(w,w.attrs,!1),null!==w.mergedAttrs&&Gc(w,w.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,w),w}(g,d,u,0,i,o,l):d.data[g];Qr(w,!0);const D=w.mergedAttrs;null!==D&&li(_,E,D);const M=w.classes;null!==M&&F_(_,E,M);const F=w.styles;null!==F&&L0(_,E,F),64!=(64&w.flags)&&ll(d,u,E,w),0===_t.lFrame.elementDepthCount&&ri(E,u),_t.lFrame.elementDepthCount++,ls(w)&&(z_(d,u,w),iC(d,w,u)),null!==l&&Un(u,w)}function Zn(){let r=Hn();ra()?Ds():(r=r.parent,Qr(r,!1));const i=r;_t.lFrame.elementDepthCount--;const o=Yt();o.firstCreatePass&&(eo(o,r),Ts(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&xa(o,i,Pe(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&xa(o,i,Pe(),i.stylesWithoutHost,!1)}function xs(r,i,o,l){My(r,i,o,l),Zn()}function _g(r,i,o){const l=Pe(),u=Yt(),d=r+20,g=u.firstCreatePass?function(r,i,o,l,u){const d=i.consts,g=cs(d,l),_=Vc(i,r,8,"ng-container",g);return null!==g&&Gc(_,g,!0),Kp(i,o,_,cs(d,u)),null!==i.queries&&i.queries.elementStart(i,_),_}(d,u,l,i,o):u.data[d];Qr(g,!0);const _=l[d]=l[11].createComment("");ll(u,l,_,g),ri(_,l),ls(g)&&(z_(u,l,g),iC(u,g,l)),null!=o&&Un(l,g)}function qh(){let r=Hn();const i=Yt();ra()?Ds():(r=r.parent,Qr(r,!1)),i.firstCreatePass&&(eo(i,r),Ts(r)&&i.queries.elementEnd(r))}function Oy(){return Pe()}function Go(r){return!!r&&"function"==typeof r.then}function yg(r){return!!r&&"function"==typeof r.subscribe}const El=yg;function vg(r,i,o,l){const u=Pe(),d=Yt(),g=Hn();return function(r,i,o,l,u,d,g,_){const E=ls(l),D=r.firstCreatePass&&ny(r),M=i[8],F=ty(i);let W=!0;if(3&l.type||_){const ce=bi(l,i),Fe=_?_(ce):ce,Se=F.length,it=_?It=>_(Sn(It[l.index])):l.index;if(Qn(o)){let It=null;if(!_&&E&&(It=function(r,i,o,l){const u=r.cleanup;if(null!=u)for(let d=0;d<u.length-1;d+=2){const g=u[d];if(g===o&&u[d+1]===l){const _=i[7],E=u[d+2];return _.length>E?_[E]:null}"string"==typeof g&&(d+=2)}return null}(r,i,u,l.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=d,It.__ngLastListenerFn__=d,W=!1;else{d=xy(l,i,M,d,!1);const on=o.listen(Fe,u,d);F.push(d,on),D&&D.push(u,it,Se,Se+1)}}else d=xy(l,i,M,d,!0),Fe.addEventListener(u,d,g),F.push(d),D&&D.push(u,it,Se,g)}else d=xy(l,i,M,d,!1);const ie=l.outputs;let ye;if(W&&null!==ie&&(ye=ie[u])){const ce=ye.length;if(ce)for(let Fe=0;Fe<ce;Fe+=2){const zr=i[ye[Fe]][ye[Fe+1]].subscribe(d),Ws=F.length;F.push(d,zr),D&&D.push(u,l.index,Ws,-(Ws+1))}}}(d,u,u[11],g,r,i,!!o,l),vg}function qC(r,i,o,l){try{return!1!==o(l)}catch(u){return Xp(r,u),!1}}function xy(r,i,o,l,u){return function d(g){if(g===Function)return l;const _=2&r.flags?Yr(r.index,i):i;0==(32&i[2])&&J_(_);let E=qC(i,0,l,g),w=d.__ngNextListenerFn__;for(;w;)E=qC(i,0,w,g)&&E,w=w.__ngNextListenerFn__;return u&&!1===E&&(g.preventDefault(),g.returnValue=!1),E}}function KC(r=1){return function(r){return(_t.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,_t.lFrame.contextLView))[8]}(r)}function SD(r,i){let o=null;const l=function(r){const i=r.attrs;if(null!=i){const o=i.indexOf(5);if(0==(1&o))return i[o+1]}return null}(r);for(let u=0;u<i.length;u++){const d=i[u];if("*"!==d){if(null===l?V_(r,d,!0):xI(l,d))return u}else o=u}return o}function ZC(r){const i=Pe()[16][6];if(!i.projection){const l=i.projection=Ro(r?r.length:1,null),u=l.slice();let d=i.child;for(;null!==d;){const g=r?SD(d,r):0;null!==g&&(u[g]?u[g].projectionNext=d:l[g]=d,u[g]=d),d=d.next}}}function ky(r,i=0,o){const l=Pe(),u=Yt(),d=Vc(u,20+r,16,null,o||null);null===d.projection&&(d.projection=i),Ds(),64!=(64&d.flags)&&function(r,i,o){F0(i[11],0,i,o,D0(r,o,i),Eh(o.parent||i[6],o,i))}(u,l,d)}function jy(r,i,o,l,u){const d=r[o+1],g=null===i;let _=l?Ms(d):Ia(d),E=!1;for(;0!==_&&(!1===E||g);){const D=r[_+1];tb(r[_],i)&&(E=!0,r[_+1]=l?Wp(D):B_(D)),_=l?Ms(D):Ia(D)}E&&(r[o+1]=l?B_(d):Wp(d))}function tb(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&Po(r,i)>=0}function zy(r,i){return function(r,i,o,l){const u=Pe(),d=Yt(),g=function(r){const i=_t.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}(2);d.firstUpdatePass&&function(r,i,o,l){const u=r.data;if(null===u[o+1]){const d=u[sr()],g=function(r,i){return i>=r.expandoStartIndex}(r,o);(function(r,i){return 0!=(r.flags&(i?16:32))})(d,l)&&null===i&&!g&&(i=!1),i=function(r,i,o,l){const u=function(r){const i=_t.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=l?i.residualClasses:i.residualStyles;if(null===u)0===(l?i.classBindings:i.styleBindings)&&(o=Yh(o=wg(null,r,i,o,l),i.attrs,l),d=null);else{const g=i.directiveStylingLast;if(-1===g||r[g]!==u)if(o=wg(u,r,i,o,l),null===d){let E=function(r,i,o){const l=o?i.classBindings:i.styleBindings;if(0!==Ia(l))return r[Ms(l)]}(r,i,l);void 0!==E&&Array.isArray(E)&&(E=wg(null,r,i,E[1],l),E=Yh(E,i.attrs,l),function(r,i,o,l){r[Ms(o?i.classBindings:i.styleBindings)]=l}(r,i,l,E))}else d=function(r,i,o){let l;const u=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<u;d++)l=Yh(l,r[d].hostAttrs,o);return Yh(l,i.attrs,o)}(r,i,l)}return void 0!==d&&(l?i.residualClasses=d:i.residualStyles=d),o}(u,d,i,l),function(r,i,o,l,u,d){let g=d?i.classBindings:i.styleBindings,_=Ms(g),E=Ia(g);r[l]=o;let D,w=!1;if(Array.isArray(o)){const M=o;D=M[1],(null===D||Po(M,D)>0)&&(w=!0)}else D=o;if(u)if(0!==E){const F=Ms(r[_+1]);r[l+1]=xc(F,_),0!==F&&(r[F+1]=j_(r[F+1],l)),r[_+1]=function(r,i){return 131071&r|i<<17}(r[_+1],l)}else r[l+1]=xc(_,0),0!==_&&(r[_+1]=j_(r[_+1],l)),_=l;else r[l+1]=xc(E,0),0===_?_=l:r[E+1]=j_(r[E+1],l),E=l;w&&(r[l+1]=B_(r[l+1])),jy(r,D,l,!0),jy(r,D,l,!1),function(r,i,o,l,u){const d=u?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&Po(d,i)>=0&&(o[l+1]=Wp(o[l+1]))}(i,D,r,l,d),g=xc(_,E),d?i.classBindings=g:i.styleBindings=g}(u,d,i,o,g,l)}}(d,r,g,l),i!==Vt&&hi(u,g,i)&&function(r,i,o,l,u,d,g,_){if(!(3&i.type))return;const E=r.data,w=E[_+1];Tg(function(r){return 1==(1&r)}(w)?fb(E,i,o,u,Ia(w),g):void 0)||(Tg(d)||function(r){return 2==(2&r)}(w)&&(d=fb(E,null,o,u,_,g)),function(r,i,o,l,u){const d=Qn(r);if(i)u?d?r.addClass(o,l):o.classList.add(l):d?r.removeClass(o,l):o.classList.remove(l);else{let g=-1===l.indexOf("-")?void 0:Bo.DashCase;if(null==u)d?r.removeStyle(o,l,g):o.style.removeProperty(l);else{const _="string"==typeof u&&u.endsWith("!important");_&&(u=u.slice(0,-10),g|=Bo.Important),d?r.setStyle(o,l,u,g):o.style.setProperty(l,u,_?"important":"")}}}(l,g,_o(sr(),o),u,d))}(d,d.data[sr()],u,u[11],r,u[g+1]=function(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=te(ro(r)))),r}(i,o),l,g)}(r,i,null,!0),zy}function wg(r,i,o,l,u){let d=null;const g=o.directiveEnd;let _=o.directiveStylingLast;for(-1===_?_=o.directiveStart:_++;_<g&&(d=i[_],l=Yh(l,d.hostAttrs,u),d!==r);)_++;return null!==r&&(o.directiveStylingLast=_),l}function Yh(r,i,o){const l=o?1:2;let u=-1;if(null!==i)for(let d=0;d<i.length;d++){const g=i[d];"number"==typeof g?u=g:u===l&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Gn(r,g,!!o||i[++d]))}return void 0===r?null:r}function fb(r,i,o,l,u,d){const g=null===i;let _;for(;u>0;){const E=r[u],w=Array.isArray(E),D=w?E[1]:E,M=null===D;let F=o[u+1];F===Vt&&(F=M?H:void 0);let W=M?yc(F,l):D===l?F:void 0;if(w&&!Tg(W)&&(W=yc(E,l)),Tg(W)&&(_=W,g))return _;const ie=r[u+1];u=g?Ms(ie):Ia(ie)}if(null!==i){let E=d?i.residualClasses:i.residualStyles;null!=E&&(_=yc(E,l))}return _}function Tg(r){return void 0!==r}function Yy(r,i=""){const o=Pe(),l=Yt(),u=r+20,d=l.firstCreatePass?Vc(l,u,1,i,null):l.data[u],g=o[u]=function(r,i){return Qn(r)?r.createText(i):r.createTextNode(i)}(o[11],i);ll(l,o,g,d),Qr(d,!1)}function Ig(r){return ao("",r,""),Ig}function ao(r,i,o){const l=Pe(),u=function(r,i,o,l){return hi(r,Ui(),o)?i+ae(o)+l:Vt}(l,r,i,o);return u!==Vt&&Ho(l,sr(),u),ao}function ev(r,i,o){const l=Pe();return hi(l,Ui(),i)&&Hr(Yt(),or(),l,r,i,l[11],o,!0),ev}const Su=void 0;var Ab=["en",[["a","p"],["AM","PM"],Su],[["AM","PM"],Su,Su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Su,"{1} 'at' {0}",Su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let bl={};function ef(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=xg(i);if(o)return o;const l=i.split("-")[0];if(o=xg(l),o)return o;if("en"===l)return Ab;throw new Error(`Missing locale data for the locale "${r}".`)}function wl(r){return ef(r)[yt.PluralCase]}function xg(r){return r in bl||(bl[r]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[r]),bl[r]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Tl="en-US";let tf=Tl;function Vg(r){Wt(r,"Expected localeId to be defined"),"string"==typeof r&&(tf=r.toLowerCase().replace(/_/g,"-"))}function fd(r,i,o,l,u){if(r=G(r),Array.isArray(r))for(let d=0;d<r.length;d++)fd(r[d],i,o,l,u);else{const d=Yt(),g=Pe();let _=vu(r)?r:G(r.provide),E=vC(r);const w=Hn(),D=1048575&w.providerIndexes,M=w.directiveStart,F=w.providerIndexes>>20;if(vu(r)||!r.multi){const W=new re(E,u,Oa),ie=Qg(_,i,u?D:D+F,M);-1===ie?(Ji(wo(w,g),d,_),Nu(d,r,i.length),i.push(_),w.directiveStart++,w.directiveEnd++,u&&(w.providerIndexes+=1048576),o.push(W),g.push(W)):(o[ie]=W,g[ie]=W)}else{const W=Qg(_,i,D+F,M),ie=Qg(_,i,D,D+F),ye=W>=0&&o[W],ce=ie>=0&&o[ie];if(u&&!ce||!u&&!ye){Ji(wo(w,g),d,_);const Fe=function(r,i,o,l,u){const d=new re(r,o,Oa);return d.multi=[],d.index=i,d.componentProviders=0,Yg(d,u,l&&!o),d}(u?Jb:Qb,o.length,u,l,E);!u&&ce&&(o[ie].providerFactory=Fe),Nu(d,r,i.length,0),i.push(_),w.directiveStart++,w.directiveEnd++,u&&(w.providerIndexes+=1048576),o.push(Fe),g.push(Fe)}else Nu(d,r,W>-1?W:ie,Yg(o[u?ie:W],E,!u&&l));!u&&l&&ce&&o[ie].componentProviders++}}}function Nu(r,i,o,l){const u=vu(i);if(u||function(r){return!!r.useClass}(i)){const g=(i.useClass||i).prototype.ngOnDestroy;if(g){const _=r.destroyHooks||(r.destroyHooks=[]);if(!u&&i.multi){const E=_.indexOf(o);-1===E?_.push(o,[l,g]):_[E+1].push(l,g)}else _.push(o,g)}}}function Yg(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function Qg(r,i,o,l){for(let u=o;u<l;u++)if(i[u]===r)return u;return-1}function Qb(r,i,o,l){return Jg(this.multi,[])}function Jb(r,i,o,l){const u=this.multi;let d;if(this.providerFactory){const g=this.providerFactory.componentProviders,_=cr(o,o[1],this.providerFactory.index,l);d=_.slice(0,g),Jg(u,d);for(let E=g;E<_.length;E++)d.push(_[E])}else d=[],Jg(u,d);return d}function Jg(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function Vs(r,i=[]){return o=>{o.providersResolver=(l,u)=>function(r,i,o){const l=Yt();if(l.firstCreatePass){const u=ai(r);fd(o,l.data,l.blueprint,u,!0),fd(i,l.data,l.blueprint,u,!1)}}(l,u?u(r):r,i)}}class tw{}const rw="ngComponent";class aA{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${te(r)}. Did you add it to @NgModule.entryComponents?`);return i[rw]=r,i}(i)}}let pd=(()=>{class r{}return r.NULL=new aA,r})();function Xg(...r){}function gd(r,i){return new Ko(bi(r,i))}const cA=function(){return gd(Hn(),Pe())};let Ko=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=cA,r})();function iw(r){return r instanceof Ko?r.nativeElement:r}class em{}let dA=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>co(),r})();const co=function(){const r=Pe(),o=Yr(Hn().index,r);return function(r){return r[11]}(vi(o)?o:r)};let tm=(()=>{class r{}return r.\u0275prov=an({token:r,providedIn:"root",factory:()=>null}),r})();class sw{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const nm=new sw("12.2.15");class ow{constructor(){}supports(i){return Lh(i)}create(i){return new gA(i)}}const pA=(r,i)=>i;class gA{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||pA}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,l=this._removalsHead,u=0,d=null;for(;o||l;){const g=!l||o&&o.currentIndex<lw(l,u,d)?o:l,_=lw(g,u,d),E=g.currentIndex;if(g===l)u--,l=l._nextRemoved;else if(o=o._next,null==g.previousIndex)u++;else{d||(d=[]);const w=_-u,D=E-u;if(w!=D){for(let F=0;F<w;F++){const W=F<d.length?d[F]:d[F]=0,ie=W+F;D<=ie&&ie<w&&(d[F]=W+1)}d[g.previousIndex]=D-w}}_!==E&&i(g,_,E)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Lh(i))throw new Error(`Error trying to diff '${te(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,d,g,o=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let _=0;_<this.length;_++)d=i[_],g=this._trackByFn(_,d),null!==o&&Object.is(o.trackById,g)?(l&&(o=this._verifyReinsertion(o,d,g,_)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,_),l=!0),o=o._next}else u=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[ji()]();let l;for(;!(l=o.next()).done;)i(l.value)}}(i,_=>{g=this._trackByFn(u,_),null!==o&&Object.is(o.trackById,g)?(l&&(o=this._verifyReinsertion(o,_,g,u)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,g,u),l=!0),o=o._next,u++}),this.length=u;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,l,u){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,u))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,u)):i=this._addAfter(new mA(o,l),d,u),i}_verifyReinsertion(i,o,l,u){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==d?i=this._reinsertAfter(d,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,d=i._nextRemoved;return null===u?this._removalsHead=d:u._nextRemoved=d,null===d?this._removalsTail=u:d._prevRemoved=u,this._insertAfter(i,o,l),this._addToMoves(i,l),i}_moveAfter(i,o,l){return this._unlink(i),this._insertAfter(i,o,l),this._addToMoves(i,l),i}_addAfter(i,o,l){return this._insertAfter(i,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,l){const u=null===o?this._itHead:o._next;return i._next=u,i._prev=o,null===u?this._itTail=i:u._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new aw),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,l=i._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class mA{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _A{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const o=i._prevDup,l=i._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class aw{constructor(){this.map=new Map}put(i){const o=i.trackById;let l=this.map.get(o);l||(l=new _A,this.map.set(o,l)),l.add(i)}get(i,o){const u=this.map.get(i);return u?u.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lw(r,i,o){const l=r.previousIndex;if(null===l)return l;let u=0;return o&&l<o.length&&(u=o[l]),l+i+u}class uw{constructor(){}supports(i){return i instanceof Map||Vh(i)}create(){return new yA}}class yA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Vh(i)))throw new Error(`Error trying to diff '${te(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,u)=>{if(o&&o.key===u)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(u,l);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const l=i._prev;return o._next=i,o._prev=l,i._prev=o,l&&(l._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,o);const d=u._prev,g=u._next;return d&&(d._next=g),g&&(g._prev=d),u._next=null,u._prev=null,u}const l=new vA(i);return this._records.set(i,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(l=>o(i[l],l))}}class vA{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cw(){return new rm([new ow])}let rm=(()=>{class r{constructor(o){this.factories=o}static create(o,l){if(null!=l){const u=l.factories.slice();o=o.concat(u)}return new r(o)}static extend(o){return{provide:r,useFactory:l=>r.create(o,l||cw()),deps:[[r,new Oo,new ui]]}}find(o){const l=this.factories.find(u=>u.supports(o));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=an({token:r,providedIn:"root",factory:cw}),r})();function dw(){return new gv([new uw])}let gv=(()=>{class r{constructor(o){this.factories=o}static create(o,l){if(l){const u=l.factories.slice();o=o.concat(u)}return new r(o)}static extend(o){return{provide:r,useFactory:l=>r.create(o,l||dw()),deps:[[r,new Oo,new ui]]}}find(o){const l=this.factories.find(u=>u.supports(o));if(l)return l;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=an({token:r,providedIn:"root",factory:dw}),r})();function mv(r,i,o,l,u=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&l.push(Sn(d)),Ar(d))for(let _=10;_<d.length;_++){const E=d[_],w=E[1].firstChild;null!==w&&mv(E[1],E,w,l)}const g=o.type;if(8&g)mv(r,i,o.child,l);else if(32&g){const _=M_(o,i);let E;for(;E=_();)l.push(E)}else if(16&g){const _=x0(i,o);if(Array.isArray(_))l.push(..._);else{const E=vh(i[16]);mv(E[1],E,_,l,!0)}}o=u?o.projectionNext:o.next}return l}class lf{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return mv(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Ar(i)){const o=i[8],l=o?o.indexOf(this):-1;l>-1&&(Up(i,l),pa(o,l))}this._attachedToViewContainer=!1}Nc(this._lView[1],this._lView)}onDestroy(i){qp(this._lView[1],this._lView,null,i)}markForCheck(){J_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ey(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){ia(!0);try{ey(r,i,o)}finally{ia(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Ch(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class CA extends lf{constructor(i){super(i),this._view=i}detectChanges(){Wc(this._view)}checkNoChanges(){!function(r){ia(!0);try{Wc(r)}finally{ia(!1)}}(this._view)}get context(){return null}}const TA=function(r){return function(r,i,o){if(zs(r)&&!o){const l=Yr(r.index,i);return new lf(l,l)}return 47&r.type?new lf(i[16],i):null}(Hn(),Pe(),16==(16&r))};let IA=(()=>{class r{}return r.__NG_ELEMENT_ID__=TA,r})();const Al=[new uw],vs=new rm([new ow]),uf=new gv(Al),RA=function(){return im(Hn(),Pe())};let cf=(()=>{class r{}return r.__NG_ELEMENT_ID__=RA,r})();const df=cf,PA=class extends df{constructor(i,o,l){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(i){const o=this._declarationTContainer.tViews,l=Dh(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(l[19]=d.createEmbeddedView(o)),Ah(o,l,i),new lf(l)}};function im(r,i){return 4&r.type?new PA(i,r,gd(r,i)):null}class Ou{}class _v{}const yv=function(){return kA(Hn(),Pe())};let Sl=(()=>{class r{}return r.__NG_ELEMENT_ID__=yv,r})();const sm=Sl,xA=class extends sm{constructor(i,o,l){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=l}get element(){return gd(this._hostTNode,this._hostLView)}get injector(){return new ha(this._hostTNode,this._hostLView)}get parentInjector(){const i=fc(this._hostTNode,this._hostLView);if(hs(i)){const o=da(i,this._hostLView),l=ei(i);return new ha(o[1].data[l+8],o)}return new ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=hw(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,l){const u=i.createEmbeddedView(o||{});return this.insert(u,l),u}createComponent(i,o,l,u,d){const g=l||this.parentInjector;if(!d&&null==i.ngModule&&g){const E=g.get(Ou,null);E&&(d=E)}const _=i.create(g,u,void 0,d);return this.insert(_.hostView,o),_}insert(i,o){const l=i._lView,u=l[1];if(Ar(l[3])){const D=this.indexOf(i);if(-1!==D)this.detach(D);else{const M=l[3],F=new xA(M,M[6],M[3]);F.detach(F.indexOf(i))}}const d=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,l){const u=10+l,d=o.length;l>0&&(o[u-1][4]=i),l<d-10?(i[4]=o[u],ps(o,10+l,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const _=i[19];null!==_&&_.insertView(r),i[2]|=128}(u,l,g,d);const _=gu(d,g),E=l[11],w=$p(E,g[7]);return null!==w&&function(r,i,o,l,u,d){l[0]=u,l[6]=i,Ch(r,l,o,1,u,d)}(u,g[6],E,l,w,_),i.attachToViewContainerRef(),ps(hf(g),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=hw(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),l=Up(this._lContainer,o);l&&(pa(hf(this._lContainer),o),Nc(l[1],l))}detach(i){const o=this._adjustIndex(i,-1),l=Up(this._lContainer,o);return l&&null!=pa(hf(this._lContainer),o)?new lf(l):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function hw(r){return r[8]}function hf(r){return r[8]||(r[8]=[])}function kA(r,i){let o;const l=i[r.index];if(Ar(l))o=l;else{let u;if(8&r.type)u=Sn(l);else{const d=i[11];u=d.createComment("");const g=bi(r,i);pu(d,$p(d,g),u,function(r,i){return Qn(r)?r.nextSibling(i):i.nextSibling}(d,g),!1)}i[r.index]=o=cC(l,i,u,r),Ra(i,o)}return new xA(o,r,i)}const bf={};class Rw extends pd{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=zt(i);return new kv(o,this.ngModule)}}function Pw(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const Nw=new Nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Op});class kv extends tw{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(kI).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Pw(this.componentDef.inputs)}get outputs(){return Pw(this.componentDef.outputs)}create(i,o,l,u){const d=(u=u||this.ngModule)?function(r,i){return{get:(o,l,u)=>{const d=r.get(o,bf,u);return d!==bf||l===bf?d:i.get(o,l,u)}}}(i,u.injector):i,g=d.get(em,Fr),_=d.get(tm,null),E=g.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",D=l?function(r,i,o){if(Qn(r))return r.selectRootElement(i,o===Le.ShadowDom);let l="string"==typeof i?r.querySelector(i):i;return l.textContent="",l}(E,l,this.componentDef.encapsulation):Mc(g.createRenderer(null,this.componentDef),w,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(w)),M=this.componentDef.onPush?576:528,F=function(r,i){return{components:[],scheduler:r||Op,clean:hC,playerHandler:i||null,flags:0}}(),W=q_(0,null,null,1,0,null,null,null,null,null),ie=Dh(null,W,F,M,null,null,g,E,_,d);let ye,ce;la(ie);try{const Fe=function(r,i,o,l,u,d){const g=o[1];o[20]=r;const E=Vc(g,20,2,"#host",null),w=E.mergedAttrs=i.hostAttrs;null!==w&&(Gc(E,w,!0),null!==r&&(li(u,r,w),null!==E.classes&&F_(u,r,E.classes),null!==E.styles&&L0(u,r,E.styles)));const D=l.createRenderer(r,i),M=Dh(o,Ns(i),null,i.onPush?64:16,o[20],E,l,D,d||null,null);return g.firstCreatePass&&(Ji(wo(E,o),g,i.type),Rh(g,E),so(E,o.length,1)),Ra(o,M),o[20]=M}(D,this.componentDef,ie,g,E);if(D)if(l)li(E,D,["ng-version",nm.full]);else{const{attrs:Se,classes:it}=function(r){const i=[],o=[];let l=1,u=2;for(;l<r.length;){let d=r[l];if("string"==typeof d)2===u?""!==d&&i.push(d,r[++l]):8===u&&o.push(d);else{if(!jo(u))break;u=d}l++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);Se&&li(E,D,Se),it&&it.length>0&&F_(E,D,it.join(" "))}if(ce=Gl(W,20),void 0!==o){const Se=ce.projection=[];for(let it=0;it<this.ngContentSelectors.length;it++){const It=o[it];Se.push(null!=It?Array.from(It):null)}}ye=function(r,i,o,l,u){const d=o[1],g=function(r,i,o){const l=Hn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),fl(r,l,i,Uc(r,i,1,null),o));const u=cr(i,r,l.directiveStart,l);ri(u,i);const d=bi(l,i);return d&&ri(d,i),u}(d,o,i);if(l.components.push(g),r[8]=g,u&&u.forEach(E=>E(g,i)),i.contentQueries){const E=Hn();i.contentQueries(1,g,E.directiveStart)}const _=Hn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Yi(_.index),Wr(o[1],_,0,_.directiveStart,_.directiveEnd,i),Ai(i,g)),g}(Fe,this.componentDef,ie,F,[xh]),Ah(W,ie,null)}finally{Ja()}return new kw(this.componentType,ye,gd(ce,ie),ie,ce)}}class kw extends class{}{constructor(i,o,l,u,d){super(),this.location=l,this._rootLView=u,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new CA(u),this.componentType=i}get injector(){return new ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const wf=new Map;class Vw extends Ou{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Rw(this);const l=ut(i),u=i[ot]||null;u&&Vg(u),this._bootstrapComponents=Uo(l.bootstrap),this._r3Injector=mC(i,o,[{provide:Ou,useValue:this},{provide:pd,useValue:this.componentFactoryResolver}],te(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=qn.THROW_IF_NOT_FOUND,l=$e.Default){return i===qn||i===Ou||i===pl?this:this._r3Injector.get(i,o,l)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Uu extends _v{constructor(i){super(),this.moduleType=i,null!==ut(i)&&function(r){const i=new Set;!function o(l){const u=ut(l,!0),d=u.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${te(i)} vs ${te(i.name)}`)}(d,wf.get(d),l),wf.set(d,l));const g=Uo(u.imports);for(const _ of g)i.has(_)||(i.add(_),o(_))}(r)}(i)}create(i){return new Vw(this.moduleType,i)}}function Bv(r){return i=>{setTimeout(r,void 0,i)}}const Yo=class extends h.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,l){var u,d,g;let _=i,E=o||(()=>null),w=l;if(i&&"object"==typeof i){const M=i;_=null===(u=M.next)||void 0===u?void 0:u.bind(M),E=null===(d=M.error)||void 0===d?void 0:d.bind(M),w=null===(g=M.complete)||void 0===g?void 0:g.bind(M)}this.__isAsync&&(E=Bv(E),_&&(_=Bv(_)),w&&(w=Bv(w)));const D=super.subscribe({next:_,error:E,complete:w});return i instanceof U.w&&i.add(D),D}};function DS(){return this._results[ji()]()}class mm{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ji(),l=mm.prototype;l[o]||(l[o]=DS)}get changes(){return this._changes||(this._changes=new Yo)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const l=this;l.dirty=!1;const u=Tn(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let l=0;l<r.length;l++){let u=r[l],d=i[l];if(o&&(u=o(u),d=o(d)),d!==u)return!1}return!0}(l._results,u,o))&&(l._results=u,l.length=u.length,l.last=u[this.length-1],l.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Cd{constructor(i){this.queryList=i,this.matches=null}clone(){return new Cd(this.queryList)}setDirty(){this.queryList.setDirty()}}class jv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const l=null!==i.contentQueries?i.contentQueries[0]:o.length,u=[];for(let d=0;d<l;d++){const g=o.getByIndex(d);u.push(this.queries[g.indexInDeclarationView].clone())}return new jv(u)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==Ua(i,o).matches&&this.queries[o].setDirty()}}class Kw{constructor(i,o,l=null){this.predicate=i,this.flags=o,this.read=l}}class $v{constructor(i=[]){this.queries=i}elementStart(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let l=0;l<this.length;l++){const u=null!==o?o.length:0,d=this.getByIndex(l).embeddedTView(i,u);d&&(d.indexInDeclarationView=l,null!==o?o.push(d):o=[d])}return null!==o?new $v(o):null}template(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Hv{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Hv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=l[u];this.matchTNodeWithReadOption(i,o,RS(o,d)),this.matchTNodeWithReadOption(i,o,To(o,i,d,!1,!1))}else l===cf?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,To(o,i,l,!1,!1))}matchTNodeWithReadOption(i,o,l){if(null!==l){const u=this.metadata.read;if(null!==u)if(u===Ko||u===Sl||u===cf&&4&o.type)this.addMatch(o.index,-2);else{const d=To(o,i,u,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,l)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function RS(r,i){const o=r.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===i)return o[l+1];return null}function MS(r,i,o,l){return-1===o?function(r,i){return 11&r.type?gd(r,i):4&r.type?im(r,i):null}(i,r):-2===o?function(r,i,o){return o===Ko?gd(i,r):o===cf?im(i,r):o===Sl?kA(i,r):void 0}(r,i,l):cr(r,r[1],o,i)}function Df(r,i,o,l){const u=i[19].queries[l];if(null===u.matches){const d=r.data,g=o.matches,_=[];for(let E=0;E<g.length;E+=2){const w=g[E];_.push(w<0?null:MS(i,d[w],g[E+1],o.metadata.read))}u.matches=_}return u.matches}function _m(r,i,o,l){const u=r.queries.getByIndex(o),d=u.matches;if(null!==d){const g=Df(r,i,u,o);for(let _=0;_<d.length;_+=2){const E=d[_];if(E>0)l.push(g[_/2]);else{const w=d[_+1],D=i[-E];for(let M=10;M<D.length;M++){const F=D[M];F[17]===F[3]&&_m(F[1],F,w,l)}if(null!==D[9]){const M=D[9];for(let F=0;F<M.length;F++){const W=M[F];_m(W[1],W,w,l)}}}}}return l}function Pl(r){const i=Pe(),o=Yt(),l=Ya();Zi(l+1);const u=Ua(o,l);if(r.dirty&&zl(i)===(2==(2&u.metadata.flags))){if(null===u.matches)r.reset([]);else{const d=u.crossesNgTemplate?_m(o,i,l,[]):Df(o,i,u,l);r.reset(d,iw),r.notifyOnChanges()}return!0}return!1}function ho(r,i,o){const l=Yt();l.firstCreatePass&&(Qw(l,new Kw(r,i,o),-1),2==(2&i)&&(l.staticViewQueries=!0)),Yw(l,Pe(),i)}function Zw(r,i,o,l){const u=Yt();if(u.firstCreatePass){const d=Hn();Qw(u,new Kw(i,o,l),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(u,r),2==(2&o)&&(u.staticContentQueries=!0)}Yw(u,Pe(),o)}function ym(){return r=Pe(),i=Ya(),r[19].queries[i].queryList;var r,i}function Yw(r,i,o){const l=new mm(4==(4&o));qp(r,i,l,l.destroy),null===i[19]&&(i[19]=new jv),i[19].queries.push(new Cd(l))}function Qw(r,i,o){null===r.queries&&(r.queries=new $v),r.queries.track(new Hv(i,o))}function Ua(r,i){return r.queries.getByIndex(i)}const Nf=new Nn("Application Initializer");let Ol=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Xg,this.reject=Xg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,u)=>{this.resolve=l,this.reject=u})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const d=this.appInits[u]();if(Go(d))o.push(d);else if(El(d)){const g=new Promise((_,E)=>{d.subscribe({complete:_,error:E})});o.push(g)}}Promise.all(o).then(()=>{l()}).catch(u=>{this.reject(u)}),0===o.length&&l(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(bn(Nf,8))},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();const Of=new Nn("AppId"),HS={provide:Of,useFactory:function(){return`${cE()}${cE()}${cE()}`},deps:[]};function cE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WS=new Nn("Platform Initializer"),Id=new Nn("Platform ID"),Am=new Nn("appBootstrapListener");let zS=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();const dE=new Nn("LocaleId"),qS=new Nn("DefaultCurrencyCode");class hE{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const Sm=function(r){return new Uu(r)},YS=Sm,JS=function(r){return Promise.resolve(Sm(r))},gT=function(r){const i=Sm(r),l=Uo(ut(r).declarations).reduce((u,d)=>{const g=zt(d);return g&&u.push(new kv(g)),u},[]);return new hE(i,l)},mT=gT,yT=function(r){return Promise.resolve(gT(r))};let kf=(()=>{class r{constructor(){this.compileModuleSync=YS,this.compileModuleAsync=JS,this.compileModuleAndAllComponentsSync=mT,this.compileModuleAndAllComponentsAsync=yT}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();const pE=(()=>Promise.resolve(0))();function gE(r){"undefined"==typeof Zone?pE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class os{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yo(!1),this.onMicrotaskEmpty=new Yo(!1),this.onStable=new Yo(!1),this.onError=new Yo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!l&&o,u.shouldCoalesceRunChangeDetection=l,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let r=Gt.requestAnimationFrame,i=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Gt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,_E(r),r.isCheckStableRunning=!0,Rm(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),_E(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,u,d,g,_)=>{try{return Ff(r),o.invokeTask(u,d,g,_)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),yE(r)}},onInvoke:(o,l,u,d,g,_,E)=>{try{return Ff(r),o.invoke(u,d,g,_,E)}finally{r.shouldCoalesceRunChangeDetection&&i(),yE(r)}},onHasTask:(o,l,u,d)=>{o.hasTask(u,d),l===u&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,_E(r),Rm(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,l,u,d)=>(o.handleError(u,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,l){return this._inner.run(i,o,l)}runTask(i,o,l,u){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+u,i,tR,Xg,Xg);try{return d.runTask(g,o,l)}finally{d.cancelTask(g)}}runGuarded(i,o,l){return this._inner.runGuarded(i,o,l)}runOutsideAngular(i){return this._outer.run(i)}}const tR={};function Rm(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function _E(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Ff(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function yE(r){r._nesting--,Rm(r)}class rR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yo,this.onMicrotaskEmpty=new Yo,this.onStable=new Yo,this.onError=new Yo}run(i,o,l){return i.apply(o,l)}runGuarded(i,o,l){return i.apply(o,l)}runOutsideAngular(i){return i()}runTask(i,o,l,u){return i.apply(o,l)}}let vE=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{os.assertNotInAngularZone(),gE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gE(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,u){let d=-1;l&&l>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:u})}whenStable(o,l,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,l,u){return[]}}return r.\u0275fac=function(o){return new(o||r)(bn(os))},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})(),ET=(()=>{class r{constructor(){this._applications=new Map,Pm.addToWindow(this)}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return Pm.findTestabilityInTree(this,o,l)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();class SM{addToWindow(i){}findTestabilityInTree(i,o,l){return null}}function EE(r){Pm=r}let Pm=new SM,CE=!0,bE=!1;function wE(){return bE=!0,CE}function CT(){if(bE)throw new Error("Cannot enable prod mode after platform setup.");CE=!1}let fo;const AT=new Nn("AllowMultipleToken");class ST{constructor(i,o){this.name=i,this.token=o}}function TE(r,i,o=[]){const l=`Platform: ${i}`,u=new Nn(l);return(d=[])=>{let g=aR();if(!g||g.injector.get(AT,!1))if(r)r(o.concat(d).concat({provide:u,useValue:!0}));else{const _=o.concat(d).concat({provide:u,useValue:!0},{provide:yu,useValue:"platform"});!function(r){if(fo&&!fo.destroyed&&!fo.injector.get(AT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");fo=r.get(IE);const i=r.get(WS,null);i&&i.forEach(o=>o())}(qn.create({providers:_,name:l}))}return function(r){const i=aR();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(u)}}function aR(){return fo&&!fo.destroyed?fo:null}let IE=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const _=function(r,i){let o;return o="noop"===r?new rR:("zone.js"===r?void 0:r)||new os({enableLongStackTrace:wE(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),E=[{provide:os,useValue:_}];return _.run(()=>{const w=qn.create({providers:E,parent:this.injector,name:o.moduleType.name}),D=o.create(w),M=D.injector.get(wa,null);if(!M)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const F=_.onError.subscribe({next:W=>{M.handleError(W)}});D.onDestroy(()=>{RT(this._modules,D),F.unsubscribe()})}),function(r,i,o){try{const l=o();return Go(l)?l.catch(u=>{throw i.runOutsideAngular(()=>r.handleError(u)),u}):l}catch(l){throw i.runOutsideAngular(()=>r.handleError(l)),l}}(M,_,()=>{const F=D.injector.get(Ol);return F.runInitializers(),F.donePromise.then(()=>(Vg(D.injector.get(dE,Tl)||Tl),this._moduleDoBootstrap(D),D))})})}bootstrapModule(o,l=[]){const u=uR({},l);return function(r,i,o){const l=new Uu(o);return Promise.resolve(l)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,u))}_moduleDoBootstrap(o){const l=o.injector.get(Mm);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(u=>l.bootstrap(u));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${te(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(bn(qn))},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();function uR(r,i){return Array.isArray(i)?i.reduce(uR,r):Object.assign(Object.assign({},r),i)}let Mm=(()=>{class r{constructor(o,l,u,d,g){this._zone=o,this._injector=l,this._exceptionHandler=u,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),E=new O.y(w=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{os.assertNotInAngularZone(),gE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{D.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ue.T)(_,E.pipe((0,ee.B)()))}bootstrap(o,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=o instanceof tw?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(u.componentType);const d=function(r){return r.isBoundToModule}(u)?void 0:this._injector.get(Ou),_=u.create(qn.NULL,[],l||u.selector,d),E=_.location.nativeElement,w=_.injector.get(vE,null),D=w&&_.injector.get(ET);return w&&D&&D.registerApplication(E,w),_.onDestroy(()=>{this.detachView(_.hostView),RT(this.components,_),D&&D.unregisterApplication(E)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;RT(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(Am,[]).concat(this._bootstrapListeners).forEach(u=>u(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(bn(os),bn(qn),bn(wa),bn(pd),bn(Ol))},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();function RT(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class cR{}class SE{}const Es={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let NT=(()=>{class r{constructor(o,l){this._compiler=o,this._config=l||Es}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[l,u]=o.split("#");return void 0===u&&(u="default"),N(8255)(l).then(d=>d[u]).then(d=>Om(d,l,u)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[l,u]=o.split("#"),d="NgFactory";return void 0===u&&(u="default",d=""),N(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(g=>g[u+d]).then(g=>Om(g,l,u))}}return r.\u0275fac=function(o){return new(o||r)(bn(kf),bn(SE,8))},r.\u0275prov=an({token:r,factory:r.\u0275fac}),r})();function Om(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const Vm=function(r){return null},Sd=TE(null,"core",[{provide:Id,useValue:"unknown"},{provide:IE,deps:[qn]},{provide:ET,deps:[]},{provide:zS,deps:[]}]),$u=[{provide:Mm,useClass:Mm,deps:[os,qn,wa,pd,Ol]},{provide:Nw,deps:[os],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:Ol,useClass:Ol,deps:[[new ui,Nf]]},{provide:kf,useClass:kf,deps:[]},HS,{provide:rm,useFactory:function(){return vs},deps:[]},{provide:gv,useFactory:function(){return uf},deps:[]},{provide:dE,useFactory:function(r){return Vg(r=r||"undefined"!=typeof $localize&&$localize.locale||Tl),r},deps:[[new el(dE),new ui,new Oo]]},{provide:qS,useValue:"USD"}];let _R=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(bn(Mm))},r.\u0275mod=we({type:r}),r.\u0275inj=ct({providers:$u}),r})()},8939:(We,ve,N)=>{"use strict";N.d(ve,{hO:()=>ge,xv:()=>X,Dh:()=>te,GT:()=>J,cc:()=>Re,on:()=>V,pX:()=>ee});var h=N(7716),U=N(7841),O=N(2785);We=N.hmd(We);const ue=["ngOnDestroy"],ee=(ae,de,Ce,Ne={})=>new Proxy(ae,{get:(Ye,vt)=>Ce.runOutsideAngular(()=>{var St;if(ae[vt])return(null===(St=null==Ne?void 0:Ne.spy)||void 0===St?void 0:St.get)&&Ne.spy.get(vt,ae[vt]),ae[vt];if(ue.indexOf(vt)>-1)return()=>{};const ft=de.toPromise().then(Qt=>{const bt=Qt&&Qt[vt];return"function"==typeof bt?bt.bind(Qt):bt&&bt.then?bt.then(lt=>Ce.run(()=>lt)):Ce.run(()=>bt)});return new Proxy(()=>{},{get:(Qt,bt)=>ft[bt],apply:(Qt,bt,lt)=>ft.then(Mt=>{var st;const wt=Mt&&Mt(...lt);return(null===(st=null==Ne?void 0:Ne.spy)||void 0===st?void 0:st.apply)&&Ne.spy.apply(vt,lt,wt),wt})})})}),J=(ae,de)=>{de.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(Ne=>{Object.defineProperty(ae.prototype,Ne,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,Ne))})})};class oe{constructor(de){return de}}const te=new h.OlP("angularfire2.app.options"),X=new h.OlP("angularfire2.app.name");function V(ae,de,Ce){const Ye="object"==typeof Ce&&Ce||{};Ye.name=Ye.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const St=U.Z.apps.filter(ft=>ft&&ft.name===Ye.name)[0]||de.runOutsideAngular(()=>U.Z.initializeApp(ae,Ye));try{JSON.stringify(ae)!==JSON.stringify(St.options)&&$("error",`${St.name} Firebase App already initialized with different options${We.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ft){}return new oe(St)}const $=(ae,...de)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ae](...de)},G={provide:oe,useFactory:V,deps:[te,h.R0b,[new h.FiY,X]]};let ge=(()=>{class ae{constructor(Ce){U.Z.registerVersion("angularfire",O.q4.full,"core"),U.Z.registerVersion("angularfire",O.q4.full,"app-compat"),U.Z.registerVersion("angular",h.q4F.full,Ce.toString())}static initializeApp(Ce,Ne){return{ngModule:ae,providers:[{provide:te,useValue:Ce},{provide:X,useValue:Ne}]}}}return ae.\u0275fac=function(Ce){return new(Ce||ae)(h.LFG(h.Lbi))},ae.\u0275mod=h.oAB({type:ae}),ae.\u0275inj=h.cJS({providers:[G]}),ae})();function Re(ae,de,Ce,Ne,Ye){const[,vt,St]=globalThis.\u0275AngularfireInstanceCache.find(ft=>ft[0]===ae)||[];if(vt)return function(ae,de){try{return ae.toString()===de.toString()}catch(Ce){return ae===de}}(Ye,St)||(Ee("error",`${de} was already initialized on the ${Ce} Firebase App with different settings.${be?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Ye,was:St})),vt;{const ft=Ne();return globalThis.\u0275AngularfireInstanceCache.push([ae,ft,Ye]),ft}}const be=!!We.hot,Ee=(ae,...de)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ae](...de)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2785:(We,ve,N)=>{"use strict";N.d(ve,{q4:()=>aa,iC:()=>eo,HU:()=>lc,vb:()=>Ql,JM:()=>Gd,u3:()=>Xl});var h=N(7716),U=N(2329),O=N(8239),ue=N(8026),ee=N(3854),J=N(3910),oe=N(5422);N(3328);const X="@firebase/remote-config",V="0.3.4",Re=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gi{constructor(S,j,re,he){this.client=S,this.storage=j,this.storageCache=re,this.logger=he}isCachedDataFresh(S,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-j,he=re<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${he}.`),he}fetch(S){var j=this;return(0,O.Z)(function*(){const[re,he]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(he&&j.isCachedDataFresh(S.cacheMaxAgeMillis,re))return he;S.eTag=he&&he.eTag;const Me=yield j.client.fetch(S),Ue=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Me.status&&Ue.push(j.storage.setLastSuccessfulFetchResponse(Me)),yield Promise.all(Ue),Me})()}}function jr(A=navigator){return A.languages&&A.languages[0]||A.language}class Or{constructor(S,j,re,he,Me,Ue){this.firebaseInstallations=S,this.sdkVersion=j,this.namespace=re,this.projectId=he,this.apiKey=Me,this.appId=Ue}fetch(S){var j=this;return(0,O.Z)(function*(){const[re,he]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),Ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Xe={sdk_version:j.sdkVersion,app_instance_id:re,app_instance_id_token:he,app_id:j.appId,language_code:jr()},Cn={method:"POST",headers:ht,body:JSON.stringify(Xe)},Wn=fetch(Ue,Cn),Qi=new Promise((hs,ei)=>{S.signal.addEventListener(()=>{const to=new Error("The operation was aborted.");to.name="AbortError",ei(to)})});let li;try{yield Promise.race([Wn,Qi]),li=yield Wn}catch(hs){let ei="fetch-client-network";throw"AbortError"===hs.name&&(ei="fetch-timeout"),Re.create(ei,{originalErrorMessage:hs.message})}let Rr=li.status;const wi=li.headers.get("ETag")||void 0;let ua,ca;if(200===li.status){let hs;try{hs=yield li.json()}catch(ei){throw Re.create("fetch-client-parse",{originalErrorMessage:ei.message})}ua=hs.entries,ca=hs.state}if("INSTANCE_STATE_UNSPECIFIED"===ca?Rr=500:"NO_CHANGE"===ca?Rr=304:("NO_TEMPLATE"===ca||"EMPTY_CONFIG"===ca)&&(ua={}),304!==Rr&&200!==Rr)throw Re.create("fetch-status",{httpStatus:Rr});return{status:Rr,eTag:wi,config:ua}})()}}class si{constructor(S,j){this.client=S,this.storage=j}fetch(S){var j=this;return(0,O.Z)(function*(){const re=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(S,re)})()}attemptFetch(S,{throttleEndTimeMillis:j,backoffCount:re}){var he=this;return(0,O.Z)(function*(){yield function(A,S){return new Promise((j,re)=>{const he=Math.max(S-Date.now(),0),Me=setTimeout(j,he);A.addEventListener(()=>{clearTimeout(Me),re(Re.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,j);try{const Me=yield he.client.fetch(S);return yield he.storage.deleteThrottleMetadata(),Me}catch(Me){if(!function(A){if(!(A instanceof ee.ZR&&A.customData))return!1;const S=Number(A.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Me))throw Me;const Ue={throttleEndTimeMillis:Date.now()+(0,ee.$s)(re),backoffCount:re+1};return yield he.storage.setThrottleMetadata(Ue),he.attemptFetch(S,Ue)}})()}}class an{constructor(S,j,re,he,Me){this.app=S,this._client=j,this._storageCache=re,this._storage=he,this._logger=Me,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yn(A,S){const j=A.target.error||void 0;return Re.create(S,{originalErrorMessage:j&&j.message})}const ct="app_namespace_store";class jn{constructor(S,j,re,he=function(){return new Promise((A,S)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=re=>{S(Yn(re,"storage-open"))},j.onsuccess=re=>{A(re.target.result)},j.onupgradeneeded=re=>{const he=re.target.result;switch(re.oldVersion){case 0:he.createObjectStore(ct,{keyPath:"compositeKey"})}}}catch(j){S(Re.create("storage-open",{originalErrorMessage:j}))}})}()){this.appId=S,this.appName=j,this.namespace=re,this.openDbPromise=he}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var j=this;return(0,O.Z)(function*(){const re=yield j.openDbPromise;return new Promise((he,Me)=>{const ht=re.transaction([ct],"readonly").objectStore(ct),Xe=j.createCompositeKey(S);try{const Cn=ht.get(Xe);Cn.onerror=Wn=>{Me(Yn(Wn,"storage-get"))},Cn.onsuccess=Wn=>{const Qi=Wn.target.result;he(Qi?Qi.value:void 0)}}catch(Cn){Me(Re.create("storage-get",{originalErrorMessage:Cn&&Cn.message}))}})})()}set(S,j){var re=this;return(0,O.Z)(function*(){const he=yield re.openDbPromise;return new Promise((Me,Ue)=>{const Xe=he.transaction([ct],"readwrite").objectStore(ct),Cn=re.createCompositeKey(S);try{const Wn=Xe.put({compositeKey:Cn,value:j});Wn.onerror=Qi=>{Ue(Yn(Qi,"storage-set"))},Wn.onsuccess=()=>{Me()}}catch(Wn){Ue(Re.create("storage-set",{originalErrorMessage:Wn&&Wn.message}))}})})()}delete(S){var j=this;return(0,O.Z)(function*(){const re=yield j.openDbPromise;return new Promise((he,Me)=>{const ht=re.transaction([ct],"readwrite").objectStore(ct),Xe=j.createCompositeKey(S);try{const Cn=ht.delete(Xe);Cn.onerror=Wn=>{Me(Yn(Wn,"storage-delete"))},Cn.onsuccess=()=>{he()}}catch(Cn){Me(Re.create("storage-delete",{originalErrorMessage:Cn&&Cn.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class rr{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const j=S.storage.getLastFetchStatus(),re=S.storage.getLastSuccessfulFetchTimestampMillis(),he=S.storage.getActiveConfig(),Me=yield j;Me&&(S.lastFetchStatus=Me);const Ue=yield re;Ue&&(S.lastSuccessfulFetchTimestampMillis=Ue);const ht=yield he;ht&&(S.activeConfig=ht)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function kn(){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(A){return!1}})).apply(this,arguments)}(0,ue._registerComponent)(new J.wA("remote-config",function(S,{instanceIdentifier:j}){const re=S.getProvider("app").getImmediate(),he=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Re.create("registration-window");if(!(0,ee.hl)())throw Re.create("indexed-db-unavailable");const{projectId:Me,apiKey:Ue,appId:ht}=re.options;if(!Me)throw Re.create("registration-project-id");if(!Ue)throw Re.create("registration-api-key");if(!ht)throw Re.create("registration-app-id");const Xe=new jn(ht,re.name,j=j||"firebase"),Cn=new rr(Xe),Wn=new oe.Yd(X);Wn.logLevel=oe.in.ERROR;const Qi=new Or(he,ue.SDK_VERSION,j,Me,Ue,ht),li=new si(Qi,Xe),Rr=new Gi(li,Xe,Cn,Wn),wi=new an(re,Rr,Cn,Xe,Wn);return function(A){const S=(0,ee.m9)(A);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(wi),wi},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(X,V),(0,ue.registerVersion)(X,V,"esm2017");var Tt=N(6676);const Xn="/firebase-messaging-sw.js",wn="/firebase-cloud-messaging-push-scope",Qe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rt="google.c.a.c_id",kt="google.c.a.c_l",An="google.c.a.ts",en="google.c.a.e";var Je=(()=>{return(A=Je||(Je={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",Je;var A})();function pr(A){const S=new Uint8Array(A);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fn(A){const j=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(j),he=new Uint8Array(re.length);for(let Me=0;Me<re.length;++Me)he[Me]=re.charCodeAt(Me);return he}const Kt="fcm_token_details_db",ln="fcm_token_object_Store";function qr(A){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Me=>Me.name).includes(Kt))return null;let S=null;return(yield(0,Tt.openDb)(Kt,5,function(){var re=(0,O.Z)(function*(he){var Me;if(he.oldVersion<2||!he.objectStoreNames.contains(ln))return;const Ue=he.transaction.objectStore(ln),ht=yield Ue.index("fcmSenderId").get(A);if(yield Ue.clear(),ht)if(2===he.oldVersion){const Xe=ht;if(!Xe.auth||!Xe.p256dh||!Xe.endpoint)return;S={token:Xe.fcmToken,createTime:null!==(Me=Xe.createTime)&&void 0!==Me?Me:Date.now(),subscriptionOptions:{auth:Xe.auth,p256dh:Xe.p256dh,endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:"string"==typeof Xe.vapidKey?Xe.vapidKey:pr(Xe.vapidKey)}}}else if(3===he.oldVersion){const Xe=ht;S={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:pr(Xe.auth),p256dh:pr(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:pr(Xe.vapidKey)}}}else if(4===he.oldVersion){const Xe=ht;S={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:pr(Xe.auth),p256dh:pr(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:pr(Xe.vapidKey)}}}});return function(he){return re.apply(this,arguments)}}())).close(),yield(0,Tt.deleteDb)(Kt),yield(0,Tt.deleteDb)("fcm_vapid_details_db"),yield(0,Tt.deleteDb)("undefined"),H(S)?S:null})).apply(this,arguments)}function H(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:S}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const le="firebase-messaging-store";let qe=null;function ot(){return qe||(qe=(0,Tt.openDb)("firebase-messaging-database",1,A=>{switch(A.oldVersion){case 0:A.createObjectStore(le)}})),qe}function Ft(A){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(A){const S=Q(A),re=yield(yield ot()).transaction(le).objectStore(le).get(S);if(re)return re;{const he=yield qr(A.appConfig.senderId);if(he)return yield Fn(A,he),he}})).apply(this,arguments)}function Fn(A,S){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(A,S){const j=Q(A),he=(yield ot()).transaction(le,"readwrite");return yield he.objectStore(le).put(S,j),yield he.complete,S})).apply(this,arguments)}function Ot(A){return fe.apply(this,arguments)}function fe(){return(fe=(0,O.Z)(function*(A){const S=Q(A),re=(yield ot()).transaction(le,"readwrite");yield re.objectStore(le).delete(S),yield re.complete})).apply(this,arguments)}function Q({appConfig:A}){return A.appId}const we=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function je(A,S){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(A,S){const j=yield ut(A),re=Vn(S),he={method:"POST",headers:j,body:JSON.stringify(re)};let Me;try{Me=yield(yield fetch(En(A.appConfig),he)).json()}catch(Ue){throw we.create("token-subscribe-failed",{errorInfo:Ue})}if(Me.error)throw we.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw we.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function mt(A,S){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(A,S){const j=yield ut(A),re=Vn(S.subscriptionOptions),he={method:"PATCH",headers:j,body:JSON.stringify(re)};let Me;try{Me=yield(yield fetch(`${En(A.appConfig)}/${S.token}`,he)).json()}catch(Ue){throw we.create("token-update-failed",{errorInfo:Ue})}if(Me.error)throw we.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw we.create("token-update-no-token");return Me.token})).apply(this,arguments)}function zt(A,S){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(A,S){const re={method:"DELETE",headers:yield ut(A)};try{const Me=yield(yield fetch(`${En(A.appConfig)}/${S}`,re)).json();if(Me.error)throw we.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(he){throw we.create("token-unsubscribe-failed",{errorInfo:he})}})).apply(this,arguments)}function En({projectId:A}){return`https://fcmregistrations.googleapis.com/v1/projects/${A}/registrations`}function ut(A){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*({appConfig:A,installations:S}){const j=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function Vn({p256dh:A,auth:S,endpoint:j,vapidKey:re}){const he={web:{endpoint:j,auth:S,p256dh:A}};return re!==Qe&&(he.web.applicationPubKey=re),he}const He=6048e5;function Pt(A){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(A){const S=yield gn(A.swRegistration,A.vapidKey),j={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:S.endpoint,auth:pr(S.getKey("auth")),p256dh:pr(S.getKey("p256dh"))},re=yield Ft(A.firebaseDependencies);if(re){if(Lt(re.subscriptionOptions,j))return Date.now()>=re.createTime+He?ne(A,{token:re.token,createTime:Date.now(),subscriptionOptions:j}):re.token;try{yield zt(A.firebaseDependencies,re.token)}catch(he){console.warn(he)}return Ae(A.firebaseDependencies,j)}return Ae(A.firebaseDependencies,j)})).apply(this,arguments)}function $n(A){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(A){const S=yield Ft(A.firebaseDependencies);S&&(yield zt(A.firebaseDependencies,S.token),yield Ot(A.firebaseDependencies));const j=yield A.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function ne(A,S){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(A,S){try{const j=yield mt(A.firebaseDependencies,S),re=Object.assign(Object.assign({},S),{token:j,createTime:Date.now()});return yield Fn(A.firebaseDependencies,re),j}catch(j){throw yield $n(A),j}})).apply(this,arguments)}function Ae(A,S){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(A,S){const re={token:yield je(A,S),createTime:Date.now(),subscriptionOptions:S};return yield Fn(A,re),re.token})).apply(this,arguments)}function gn(A,S){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(A,S){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fn(S)})})).apply(this,arguments)}function Lt(A,S){return S.vapidKey===A.vapidKey&&S.endpoint===A.endpoint&&S.auth===A.auth&&S.p256dh===A.p256dh}function cn(A){const S={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function(A,S){if(!S.notification)return;A.notification={};const j=S.notification.title;j&&(A.notification.title=j);const re=S.notification.body;re&&(A.notification.body=re);const he=S.notification.image;he&&(A.notification.image=he)}(S,A),function(A,S){!S.data||(A.data=S.data)}(S,A),function(A,S){if(!S.fcmOptions)return;A.fcmOptions={};const j=S.fcmOptions.link;j&&(A.fcmOptions.link=j);const re=S.fcmOptions.analytics_label;re&&(A.fcmOptions.analyticsLabel=re)}(S,A),S}function lr(A){return"object"==typeof A&&!!A&&Rt in A}function yr(A,S){const j=[];for(let re=0;re<A.length;re++)j.push(A.charAt(re)),re<S.length&&j.push(S.charAt(re));return j.join("")}function rn(A){return we.create("missing-app-config-values",{valueName:A})}yr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fi{constructor(S,j,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const he=function(A){if(!A||!A.options)throw rn("App Configuration Object");if(!A.name)throw rn("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:j}=A;for(const re of S)if(!j[re])throw rn(re);return{appName:A.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:he,installations:j,analyticsProvider:re}}_delete(){return Promise.resolve()}}function Kr(A){return xr.apply(this,arguments)}function xr(){return(xr=(0,O.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Xn,{scope:wn}),A.swRegistration.update().catch(()=>{})}catch(S){throw we.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Gs(A,S){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(A,S){if(!S&&!A.swRegistration&&(yield Kr(A)),S||!A.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw we.create("invalid-sw-registration");A.swRegistration=S}})).apply(this,arguments)}function zi(A,S){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(A,S){S?A.vapidKey=S:A.vapidKey||(A.vapidKey=Qe)})).apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(A,S){if(!navigator)throw we.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw we.create("permission-blocked");return yield zi(A,null==S?void 0:S.vapidKey),yield Gs(A,null==S?void 0:S.serviceWorkerRegistration),Pt(A)})).apply(this,arguments)}function vi(A,S,j){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(A,S,j){const re=Ts(S);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:j[Rt],message_name:j[kt],message_time:j[An],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ts(A){switch(A){case Je.NOTIFICATION_CLICKED:return"notification_open";case Je.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ls(){return(ls=(0,O.Z)(function*(A,S){const j=S.data;if(!j.isFirebaseMessaging)return;A.onMessageHandler&&j.messageType===Je.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(cn(j)):A.onMessageHandler.next(cn(j)));const re=j.data;lr(re)&&"1"===re[en]&&(yield vi(A,j.messageType,re))})).apply(this,arguments)}const ai="@firebase/messaging",R="0.9.7";function ke(){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(){return"undefined"!=typeof window&&(0,ee.hl)()&&(yield(0,ee.eu)())&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ue._registerComponent)(new J.wA("messaging",A=>{const S=new Fi(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function(A,S){return ls.apply(this,arguments)}(S,j)),S},"PUBLIC")),(0,ue._registerComponent)(new J.wA("messaging-internal",A=>{const S=A.getProvider("messaging").getImmediate();return{getToken:re=>function(A,S){return Mn.apply(this,arguments)}(S,re)}},"PRIVATE")),(0,ue.registerVersion)(ai,R),(0,ue.registerVersion)(ai,R,"esm2017");const Qo="analytics",Xf="firebase_id",$a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ha="https://www.googletagmanager.com/gtag/js",Cr=new oe.Yd("@firebase/analytics");function jl(A){return Promise.all(A.map(S=>S.catch(j=>j)))}function Wa(A,S){const j=document.createElement("script");j.src=`${Ha}?l=${A}&id=${S}`,j.async=!0,document.head.appendChild(j)}function us(A,S,j,re,he,Me){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(A,S,j,re,he,Me){const Ue=re[he];try{if(Ue)yield S[Ue];else{const Xe=(yield jl(j)).find(Cn=>Cn.measurementId===he);Xe&&(yield S[Xe.appId])}}catch(ht){Cr.error(ht)}A("config",he,Me)})).apply(this,arguments)}function $l(A,S,j,re,he){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(A,S,j,re,he){try{let Me=[];if(he&&he.send_to){let Ue=he.send_to;Array.isArray(Ue)||(Ue=[Ue]);const ht=yield jl(j);for(const Xe of Ue){const Cn=ht.find(Qi=>Qi.measurementId===Xe),Wn=Cn&&S[Cn.appId];if(!Wn){Me=[];break}Me.push(Wn)}}0===Me.length&&(Me=Object.values(S)),yield Promise.all(Me),A("event",re,he||{})}catch(Me){Cr.error(Me)}})).apply(this,arguments)}function Jo(){const A=window.document.getElementsByTagName("script");for(const S of Object.values(A))if(S.src&&S.src.includes(Ha))return S;return null}const Zr=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xo=new class{constructor(S={},j=1e3){this.throttleMetadata=S,this.intervalMillis=j}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,j){this.throttleMetadata[S]=j}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function qi(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function Bd(A){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(A){var S;const{appId:j,apiKey:re}=A,he={method:"GET",headers:qi(re)},Me=$a.replace("{app-id}",j),Ue=yield fetch(Me,he);if(200!==Ue.status&&304!==Ue.status){let ht="";try{const Xe=yield Ue.json();(null===(S=Xe.error)||void 0===S?void 0:S.message)&&(ht=Xe.error.message)}catch(Xe){}throw Zr.create("config-fetch-failed",{httpStatus:Ue.status,responseMessage:ht})}return Ue.json()})).apply(this,arguments)}function qa(A){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(A,S=Xo,j){const{appId:re,apiKey:he,measurementId:Me}=A.options;if(!re)throw Zr.create("no-app-id");if(!he){if(Me)return{measurementId:Me,appId:re};throw Zr.create("no-api-key")}const Ue=S.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new jd;return setTimeout((0,O.Z)(function*(){ht.abort()}),void 0!==j?j:6e4),ea({appId:re,apiKey:he,measurementId:Me},Ue,ht,S)})).apply(this,arguments)}function ea(A,S,j){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,O.Z)(function*(A,{throttleEndTimeMillis:S,backoffCount:j},re,he=Xo){const{appId:Me,measurementId:Ue}=A;try{yield mo(re,S)}catch(ht){if(Ue)return Cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${ht.message}]`),{appId:Me,measurementId:Ue};throw ht}try{const ht=yield Bd(A);return he.deleteThrottleMetadata(Me),ht}catch(ht){if(!Sn(ht)){if(he.deleteThrottleMetadata(Me),Ue)return Cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${ht.message}]`),{appId:Me,measurementId:Ue};throw ht}const Xe=503===Number(ht.customData.httpStatus)?(0,ee.$s)(j,he.intervalMillis,30):(0,ee.$s)(j,he.intervalMillis),Cn={throttleEndTimeMillis:Date.now()+Xe,backoffCount:j+1};return he.setThrottleMetadata(Me,Cn),Cr.debug(`Calling attemptFetch again in ${Xe} millis`),ea(A,Cn,re,he)}})).apply(this,arguments)}function mo(A,S){return new Promise((j,re)=>{const he=Math.max(S-Date.now(),0),Me=setTimeout(j,he);A.addEventListener(()=>{clearTimeout(Me),re(Zr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Sn(A){if(!(A instanceof ee.ZR&&A.customData))return!1;const S=Number(A.customData.httpStatus);return 429===S||500===S||503===S||504===S}class jd{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function $d(){return _o.apply(this,arguments)}function _o(){return(_o=(0,O.Z)(function*(){if(!(0,ee.hl)())return Cr.warn(Zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(A){return Cr.warn(Zr.create("indexeddb-unavailable",{errorInfo:A}).message),!1}return!0})).apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(A,S,j,re,he,Me,Ue){var ht;const Xe=qa(A);Xe.then(Rr=>{j[Rr.measurementId]=Rr.appId,A.options.measurementId&&Rr.measurementId!==A.options.measurementId&&Cr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rr=>Cr.error(Rr)),S.push(Xe);const Cn=$d().then(Rr=>{if(Rr)return re.getId()}),[Wn,Qi]=yield Promise.all([Xe,Cn]);Jo()||Wa(Me,Wn.measurementId),he("js",new Date);const li=null!==(ht=null==Ue?void 0:Ue.config)&&void 0!==ht?ht:{};return li.origin="firebase",li.update=!0,null!=Qi&&(li[Xf]=Qi),he("config",Wn.measurementId,li),Wn.measurementId})).apply(this,arguments)}class Gl{constructor(S){this.app=S}_delete(){return delete Sr[this.app.options.appId],Promise.resolve()}}let Sr={},Yr=[];const zl={};let cs,yo,Ks="dataLayer",Zs=!1;function sc(A,S,j){!function(){const A=[];if((0,ee.ru)()&&A.push("This is a browser extension environment."),(0,ee.zI)()||A.push("Cookies are not available."),A.length>0){const S=A.map((re,he)=>`(${he+1}) ${re}`).join(" "),j=Zr.create("invalid-analytics-context",{errorInfo:S});Cr.warn(j.message)}}();const re=A.options.appId;if(!re)throw Zr.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Zr.create("no-api-key");Cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sr[re])throw Zr.create("already-exists",{id:re});if(!Zs){!function(A){let S=[];Array.isArray(window[A])?S=window[A]:window[A]=S}(Ks);const{wrappedGtag:Me,gtagCore:Ue}=function(A,S,j,re,he){let Me=function(...Ue){window[re].push(arguments)};return window[he]&&"function"==typeof window[he]&&(Me=window[he]),window[he]=function(A,S,j,re){function Me(){return(Me=(0,O.Z)(function*(Ue,ht,Xe){try{"event"===Ue?yield $l(A,S,j,ht,Xe):"config"===Ue?yield us(A,S,j,re,ht,Xe):A("set",ht)}catch(Cn){Cr.error(Cn)}})).apply(this,arguments)}return function(Ue,ht,Xe){return Me.apply(this,arguments)}}(Me,A,S,j),{gtagCore:Me,wrappedGtag:window[he]}}(Sr,Yr,zl,Ks,"gtag");yo=Me,cs=Ue,Zs=!0}return Sr[re]=function(A,S,j,re,he,Me,Ue){return Ki.apply(this,arguments)}(A,Yr,zl,S,cs,Ks,j),new Gl(A)}function ta(){return(ta=(0,O.Z)(function*(A,S,j,re,he){if(he&&he.global)A("event",j,re);else{const Me=yield S;A("event",j,Object.assign(Object.assign({},re),{send_to:Me}))}})).apply(this,arguments)}function ra(){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(A){return!1}})).apply(this,arguments)}const Jr="@firebase/analytics";(0,ue._registerComponent)(new J.wA(Qo,(S,{options:j})=>sc(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,ue._registerComponent)(new J.wA("analytics-internal",function(S){try{const j=S.getProvider(Qo).getImmediate();return{logEvent:(re,he,Me)=>function(A,S,j,re){A=(0,ee.m9)(A),function(A,S,j,re,he){return ta.apply(this,arguments)}(yo,Sr[A.app.options.appId],S,j,re).catch(he=>Cr.error(he))}(j,re,he,Me)}}catch(j){throw Zr.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,ue.registerVersion)(Jr,"0.7.5"),(0,ue.registerVersion)(Jr,"0.7.5","esm2017");var Xr=N(7771),tp=N(3637),oa=N(7574),ac=N(8307),Ka=N(3101),Za=N(9746);const aa=new h.GfV("7.2.0"),Zi="__angularfire_symbol__analyticsIsSupported",Js="__angularfire_symbol__remoteConfigIsSupported",vo="__angularfire_symbol__messagingIsSupported";function Gd(A,S,j){if(S){if(1===S.length)return S[0];const Me=S.filter(Ue=>Ue.app===j);if(1===Me.length)return Me[0]}return j.container.getProvider(A).getImmediate({optional:!0})}globalThis[Zi]||(globalThis[Zi]=ra().then(A=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=A)),globalThis[vo]||(globalThis[vo]=ke().then(A=>globalThis.__angularfire_symbol__messagingIsSupportedValue=A)),globalThis[Js]||(globalThis[Js]=kn().then(A=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=A));const Ql=(A,S)=>{const j=S?[S]:(0,U.C6)(),re=[];return j.forEach(he=>{he.container.getProvider(A).instances.forEach(Ue=>{re.includes(Ue)||re.push(Ue)})}),re};function sr(){}class Yi{constructor(S,j=Xr.N){this.zone=S,this.delegate=j}now(){return this.delegate.now()}schedule(S,j,re){const he=this.zone;return this.delegate.schedule(function(Ue){he.runGuarded(()=>{S.apply(this,[Ue])})},j,re)}}class or{constructor(S){this.zone=S,this.task=null}call(S,j){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sr,{},sr,sr)),j.pipe((0,ac.b)({next:re,complete:re,error:re})).subscribe(S).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lc=(()=>{class A{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new Yi(Zone.current)),this.insideAngular=j.run(()=>new Yi(Zone.current,tp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(j){return new(j||A)(h.LFG(h.R0b))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Eo(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Jl(A){return Eo().ngZone.runOutsideAngular(()=>A())}function Xs(A){return Eo().ngZone.run(()=>A())}function eo(A){return Eo(),function(A){return function(j){return(j=j.lift(new or(A.ngZone))).pipe((0,Ka.R)(A.outsideAngular),(0,Za.QV)(A.insideAngular))}}(Eo())(A)}const bo=(A,S)=>{const j=void 0;return function(){return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Xs(()=>A.apply(j,arguments))}},Xl=(A,S)=>function(){let j;for(let he=0;he<arguments.length;he++)"function"==typeof arguments[he]&&(S&&(j||(j=Xs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sr,{},sr,sr)))),arguments[he]=bo(arguments[he],j));const re=Jl(()=>A.apply(this,arguments));if(!S){if(re instanceof oa.y){const he=Eo();return re.pipe((0,Ka.R)(he.outsideAngular),(0,Za.QV)(he.insideAngular))}return Xs(()=>re)}return re instanceof oa.y?re.pipe(eo):re instanceof Promise?Xs(()=>new Promise((he,Me)=>re.then(Ue=>Xs(()=>he(Ue)),Ue=>Xs(()=>Me(Ue))))):"function"==typeof re&&j?function(){return setTimeout(()=>{j&&"scheduled"===j.state&&j.invoke()},10),re.apply(this,arguments)}:Xs(()=>re)}},538:(We,ve,N)=>{"use strict";N.d(ve,{$:()=>tp,A:()=>Or,E:()=>Ar,G:()=>R,I:()=>Ci,K:()=>gn,L:()=>ea,M:()=>jd,N:()=>$d,P:()=>l_,Q:()=>_o,R:()=>Vr,T:()=>Sn,U:()=>Sr,V:()=>Yr,W:()=>yo,X:()=>ds,Y:()=>ra,Z:()=>ep,_:()=>br,a:()=>eu,a0:()=>ac,a1:()=>Za,a2:()=>Ya,a3:()=>Zl,a4:()=>la,a5:()=>Qa,a6:()=>Wd,a7:()=>Ja,a8:()=>Gd,a9:()=>or,aA:()=>ko,aB:()=>fp,aC:()=>Mn,aG:()=>pc,aJ:()=>Ki,aa:()=>Eo,ab:()=>Xs,ae:()=>Co,af:()=>Xl,ag:()=>A,aj:()=>Hd,ak:()=>Wn,am:()=>np,an:()=>XE,ao:()=>Kr,ap:()=>mn,aq:()=>Fi,ar:()=>yr,as:()=>Nt,at:()=>Xi,au:()=>_p,av:()=>pt,aw:()=>Oe,ax:()=>$e,ay:()=>Ge,az:()=>oh,b:()=>Xa,c:()=>u_,d:()=>nh,e:()=>No,f:()=>el,g:()=>au,h:()=>Oo,i:()=>ap,j:()=>pp,k:()=>Ip,l:()=>yc,m:()=>Dp,n:()=>ch,o:()=>Br,r:()=>l0,s:()=>iu,u:()=>cp,z:()=>si});var h=N(8239),U=N(3854),O=N(8026);function oe(v,p){var m={};for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&p.indexOf(C)<0&&(m[C]=v[C]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(C=Object.getOwnPropertySymbols(v);I<C.length;I++)p.indexOf(C[I])<0&&Object.prototype.propertyIsEnumerable.call(v,C[I])&&(m[C[I]]=v[C[I]])}return m}var st=N(5422),wt=N(3910);const Br={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Or={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const si=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},as=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fr=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Yn=new st.Yd("@firebase/auth");function ct(v,...p){Yn.logLevel<=st.in.ERROR&&Yn.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Nt(v,...p){throw rr(v,...p)}function pt(v,...p){return rr(v,...p)}function xn(v,p,m){const C=Object.assign(Object.assign({},as()),{[p]:m});return new U.LL("auth","Firebase",C).create(p,{appName:v.name})}function jn(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Nt(v,"argument-error"),xn(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rr(v,...p){if("string"!=typeof v){const m=p[0],C=[...p.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(m,...C)}return fr.create(v,...p)}function Oe(v,p,...m){if(!v)throw rr(p,...m)}function hn(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ct(p),new Error(p)}function mn(v,p){v||hn(p)}const kn=new Map;function $e(v){mn(v instanceof Function,"Expected a class definition");let p=kn.get(v);return p?(mn(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,kn.set(v,p),p)}function wn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Qe(){return"http:"===rt()||"https:"===rt()}function rt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class An{constructor(p,m){this.shortDelay=p,this.longDelay=m,mn(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qe()||(0,U.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function en(v,p){mn(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Le{static initialize(p,m,C){this.fetchImpl=p,m&&(this.headersImpl=m),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pr=new An(3e4,6e4);function fn(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Kt(v,p,m,C){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,h.Z)(function*(v,p,m,C,I={}){return ln(v,I,(0,h.Z)(function*(){let P={},se={};C&&("GET"===p?se=C:P={body:JSON.stringify(C)});const Te=(0,U.xO)(Object.assign({key:v.config.apiKey},se)).slice(1),Ze=yield v._getAdditionalHeaders();return Ze["Content-Type"]="application/json",v.languageCode&&(Ze["X-Firebase-Locale"]=v.languageCode),Le.fetch()(Y(v,v.config.apiHost,m,Te),Object.assign({method:p,headers:Ze,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ln(v,p,m){return qr.apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},Je),p);try{const I=new De(v),P=yield Promise.race([m(),I.promise]);I.clearNetworkTimeout();const se=yield P.json();if("needConfirmation"in se)throw le(v,"account-exists-with-different-credential",se);if(P.ok&&!("errorMessage"in se))return se;{const Te=P.ok?se.errorMessage:se.error.message,[Ze,Be]=Te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw le(v,"credential-already-in-use",se);if("EMAIL_EXISTS"===Ze)throw le(v,"email-already-in-use",se);const at=C[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw xn(v,at,Be);Nt(v,at)}}catch(I){if(I instanceof U.ZR)throw I;Nt(v,"network-request-failed")}})).apply(this,arguments)}function z(v,p,m,C){return H.apply(this,arguments)}function H(){return(H=(0,h.Z)(function*(v,p,m,C,I={}){const P=yield Kt(v,p,m,C,I);return"mfaPendingCredential"in P&&Nt(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Y(v,p,m,C){const I=`${p}${m}?${C}`;return v.config.emulator?en(v.config,I):`${v.config.apiScheme}://${I}`}class De{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,C)=>{this.timer=setTimeout(()=>C(pt(this.auth,"network-request-failed")),pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function le(v,p,m){const C={appName:v.name};m.email&&(C.email=m.email),m.phoneNumber&&(C.phoneNumber=m.phoneNumber);const I=pt(v,p,C);return I.customData._tokenResponse=m,I}function ot(){return(ot=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ft(v,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fn(v,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Ot(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function K(){return(K=(0,h.Z)(function*(v,p=!1){const m=(0,U.m9)(v),C=yield m.getIdToken(p),I=je(C);Oe(I&&I.exp&&I.auth_time&&I.iat,m.auth,"internal-error");const P="object"==typeof I.firebase?I.firebase:void 0,se=null==P?void 0:P.sign_in_provider;return{claims:I,token:C,authTime:Ot(we(I.auth_time)),issuedAtTime:Ot(we(I.iat)),expirationTime:Ot(we(I.exp)),signInProvider:se||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function we(v){return 1e3*Number(v)}function je(v){const[p,m,C]=v.split(".");if(void 0===p||void 0===m||void 0===C)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,U.tV)(m);return I?JSON.parse(I):(ct("Failed to decode base64 JWT payload"),null)}catch(I){return ct("Caught error parsing JWT payload as JSON",I),null}}function mt(v,p){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(C){throw C instanceof U.ZR&&zt(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function zt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class pn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const I=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const C=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),C)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class En{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ot(this.lastLoginAt),this.creationTime=Ot(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ut(v){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(v){var p;const m=v.auth,C=yield v.getIdToken(),I=yield mt(v,Fn(m,{idToken:C}));Oe(null==I?void 0:I.users.length,m,"internal-error");const P=I.users[0];v._notifyReloadListener(P);const se=(null===(p=P.providerUserInfo)||void 0===p?void 0:p.length)?nn(P.providerUserInfo):[],Te=Pt(v.providerData,se),at=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==Te?void 0:Te.length)),yn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Te,metadata:new En(P.createdAt,P.lastLoginAt),isAnonymous:at};Object.assign(v,yn)})).apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(v){const p=(0,U.m9)(v);yield ut(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Pt(v,p){return[...v.filter(C=>!p.some(I=>I.providerId===C.providerId)),...p]}function nn(v){return v.map(p=>{var{providerId:m}=p,C=oe(p,["providerId"]);return{providerId:m,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function mr(){return(mr=(0,h.Z)(function*(v,p){const m=yield ln(v,{},(0,h.Z)(function*(){const C=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:I,apiKey:P}=v.config,se=Y(v,I,"/v1/token",`key=${P}`),Te=yield v._getAdditionalHeaders();return Te["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(se,{method:"POST",headers:Te,body:C})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Oe(p.idToken,"internal-error"),Oe(void 0!==p.idToken,"internal-error"),Oe(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(v){const p=je(v);return Oe(p,"internal-error"),Oe(void 0!==p.exp,"internal-error"),Oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var C=this;return(0,h.Z)(function*(){return Oe(!C.accessToken||C.refreshToken,p,"user-token-expired"),m||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(p,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var C=this;return(0,h.Z)(function*(){const{accessToken:I,refreshToken:P,expiresIn:se}=yield function(v,p){return mr.apply(this,arguments)}(p,m);C.updateTokensAndExpiration(I,P,Number(se))})()}updateTokensAndExpiration(p,m,C){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(p,m){const{refreshToken:C,accessToken:I,expirationTime:P}=m,se=new ne;return C&&(Oe("string"==typeof C,"internal-error",{appName:p}),se.refreshToken=C),I&&(Oe("string"==typeof I,"internal-error",{appName:p}),se.accessToken=I),P&&(Oe("number"==typeof P,"internal-error",{appName:p}),se.expirationTime=P),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return hn("not implemented")}}function _e(v,p){Oe("string"==typeof v||void 0===v,"internal-error",{appName:p})}class Ae{constructor(p){var{uid:m,auth:C,stsTokenManager:I}=p,P=oe(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=C,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.metadata=new En(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const C=yield mt(m,m.stsTokenManager.getToken(m.auth,p));return Oe(C,m.auth,"internal-error"),m.accessToken!==C&&(m.accessToken=C,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),C})()}getIdTokenResult(p){return function(v){return K.apply(this,arguments)}(this,p)}reload(){return function(v){return He.apply(this,arguments)}(this)}_assign(p){this!==p&&(Oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ae(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var C=this;return(0,h.Z)(function*(){let I=!1;p.idToken&&p.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(p),I=!0),m&&(yield ut(C)),yield C.auth._persistUserIfCurrent(C),I&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield mt(p,function(v,p){return ot.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var C,I,P,se,Te,Ze,Be,at;const yn=null!==(C=m.displayName)&&void 0!==C?C:void 0,vn=null!==(I=m.email)&&void 0!==I?I:void 0,Mr=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,In=null!==(se=m.photoURL)&&void 0!==se?se:void 0,ba=null!==(Te=m.tenantId)&&void 0!==Te?Te:void 0,dh=null!==(Ze=m._redirectEventId)&&void 0!==Ze?Ze:void 0,sl=null!==(Be=m.createdAt)&&void 0!==Be?Be:void 0,ol=null!==(at=m.lastLoginAt)&&void 0!==at?at:void 0,{uid:Dc,emailVerified:hh,isAnonymous:Ap,providerData:fh,stsTokenManager:Sp}=m;Oe(Dc&&Sp,p,"internal-error");const ph=ne.fromJSON(this.name,Sp);Oe("string"==typeof Dc,p,"internal-error"),_e(yn,p.name),_e(vn,p.name),Oe("boolean"==typeof hh,p,"internal-error"),Oe("boolean"==typeof Ap,p,"internal-error"),_e(Mr,p.name),_e(In,p.name),_e(ba,p.name),_e(dh,p.name),_e(sl,p.name),_e(ol,p.name);const Rp=new Ae({uid:Dc,auth:p,email:vn,emailVerified:hh,displayName:yn,isAnonymous:Ap,photoURL:In,phoneNumber:Mr,tenantId:ba,stsTokenManager:ph,createdAt:sl,lastLoginAt:ol});return fh&&Array.isArray(fh)&&(Rp.providerData=fh.map(cu=>Object.assign({},cu))),dh&&(Rp._redirectEventId=dh),Rp}static _fromIdTokenResponse(p,m,C=!1){return(0,h.Z)(function*(){const I=new ne;I.updateFromServerResponse(m);const P=new Ae({uid:m.localId,auth:p,stsTokenManager:I,isAnonymous:C});return yield ut(P),P})()}}const gn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,C){var I=this;return(0,h.Z)(function*(){I.storage[m]=C})()}_get(m){var C=this;return(0,h.Z)(function*(){const I=C.storage[m];return void 0===I?null:I})()}_remove(m){var C=this;return(0,h.Z)(function*(){delete C.storage[m]})()}_addListener(m,C){}_removeListener(m,C){}}return v.type="NONE",v})();function Ge(v,p,m){return`firebase:${v}:${p}:${m}`}class Lt{constructor(p,m,C){this.persistence=p,this.auth=m,this.userKey=C;const{config:I,name:P}=this.auth;this.fullUserKey=Ge(this.userKey,I.apiKey,P),this.fullPersistenceKey=Ge("persistence",I.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Ae._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const C=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,C?m.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,C="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Lt($e(gn),p,C);const I=(yield Promise.all(m.map(function(){var Be=(0,h.Z)(function*(at){if(yield at._isAvailable())return at});return function(at){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let P=I[0]||$e(gn);const se=Ge(C,p.config.apiKey,p.name);let Te=null;for(const Be of m)try{const at=yield Be._get(se);if(at){const yn=Ae._fromJSON(p,at);Be!==P&&(Te=yn),P=Be;break}}catch(at){}const Ze=I.filter(Be=>Be._shouldAllowMigration);return P._shouldAllowMigration&&Ze.length?(P=Ze[0],Te&&(yield P._set(se,Te.toJSON())),yield Promise.all(m.map(function(){var Be=(0,h.Z)(function*(at){if(at!==P)try{yield at._remove(se)}catch(yn){}});return function(at){return Be.apply(this,arguments)}}())),new Lt(P,p,C)):new Lt(P,p,C)})()}}function cn(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(lr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(vr(p))return"Firefox";if(p.includes("silk/"))return"Silk";if($r(p))return"Blackberry";if(rn(p))return"Webos";if(_r(p))return"Safari";if((p.includes("chrome/")||er(p))&&!p.includes("edge/"))return"Chrome";if(yr(p))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function vr(v=(0,U.z$)()){return/firefox\//i.test(v)}function _r(v=(0,U.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function er(v=(0,U.z$)()){return/crios\//i.test(v)}function lr(v=(0,U.z$)()){return/iemobile/i.test(v)}function yr(v=(0,U.z$)()){return/android/i.test(v)}function $r(v=(0,U.z$)()){return/blackberry/i.test(v)}function rn(v=(0,U.z$)()){return/webos/i.test(v)}function Fi(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)}function Kr(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function oi(v=(0,U.z$)()){return Fi(v)||yr(v)||rn(v)||$r(v)||/windows phone/i.test(v)||lr(v)}function kr(v,p=[]){let m;switch(v){case"Browser":m=cn((0,U.z$)());break;case"Worker":m=`${cn((0,U.z$)())}-${v}`;break;default:m=v}const C=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${C}`}class tr{constructor(p,m){this.app=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vi(this),this.idTokenSubscription=new vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(p,m){var C=this;return m&&(this._popupRedirectResolver=$e(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var I,P;if(!C._deleted&&(C.persistenceManager=yield Lt.create(C,p),!C._deleted)){if(null===(I=C._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(se){}yield C.initializeCurrentUser(m),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var C;let I=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const P=null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId,se=null==I?void 0:I._redirectEventId,Te=yield m.tryRedirectSignIn(p);(!P||P===se)&&(null==Te?void 0:Te.user)&&(I=Te.user)}return I?I._redirectEventId?(Oe(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===I._redirectEventId?m.directlySetCurrentUser(I):m.reloadAndSetCurrentUserOrClear(I)):m.reloadAndSetCurrentUserOrClear(I):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let C=null;try{C=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(I){yield m._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield ut(p)}catch(C){if("auth/network-request-failed"!==C.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const C=p?(0,U.m9)(p):null;return C&&Oe(C.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(C&&C._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){if(!m._deleted)return p&&Oe(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,h.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence($e(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,C){return this.registerStateListener(this.authStateSubscription,p,m,C)}onIdTokenChanged(p,m,C){return this.registerStateListener(this.idTokenSubscription,p,m,C)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var C=this;return(0,h.Z)(function*(){const I=yield C.getOrInitRedirectPersistenceManager(m);return null===p?I.removeCurrentUser():I.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const C=p&&$e(p)||m._popupRedirectResolver;Oe(C,m,"argument-error"),m.redirectPersistenceManager=yield Lt.create(m,[$e(C._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var C,I;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(C=m._currentUser)||void 0===C?void 0:C._redirectEventId)===p?m._currentUser:(null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,C,I){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),se=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(se,this,"internal-error"),se.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,C,I):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=kr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){const m={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(m["X-Firebase-gmpid"]=p.app.options.appId),m})()}}function Mn(v){return(0,U.m9)(v)}class vi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ar(v,p,m){const C=Mn(v);Oe(C._canInitEmulator,C,"emulator-config-failed"),Oe(/^https?:\/\//.test(p),C,"invalid-emulator-scheme");const I=!!(null==m?void 0:m.disableWarnings),P=Ts(p),{host:se,port:Te}=function(v){const p=Ts(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const C=m[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(C);if(I){const P=I[1];return{host:P,port:ls(C.substr(P.length+1))}}{const[P,se]=C.split(":");return{host:P,port:ls(se)}}}(p);C.config.emulator={url:`${P}//${se}${null===Te?"":`:${Te}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:se,port:Te,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ts(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function ls(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class R{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return hn("not implemented")}_getIdTokenResponse(p){return hn("not implemented")}_linkToIdToken(p,m){return hn("not implemented")}_getReauthenticationResolver(p){return hn("not implemented")}}function L(v,p){return q.apply(this,arguments)}function q(){return(q=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:resetPassword",fn(v,p))})).apply(this,arguments)}function me(v,p){return ke.apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ke(v,p){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:update",fn(v,p))})).apply(this,arguments)}function ur(){return(ur=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithPassword",fn(v,p))})).apply(this,arguments)}function Er(v,p){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:sendOobCode",fn(v,p))})).apply(this,arguments)}function tc(v,p){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,h.Z)(function*(v,p){return Er(v,p)})).apply(this,arguments)}function e_(v,p){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(v,p){return Er(v,p)})).apply(this,arguments)}function Xf(v,p){return nc.apply(this,arguments)}function nc(){return(nc=(0,h.Z)(function*(v,p){return Er(v,p)})).apply(this,arguments)}function Vd(v,p){return $a.apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(v,p){return Er(v,p)})).apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithEmailLink",fn(v,p))})).apply(this,arguments)}function Wa(){return(Wa=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithEmailLink",fn(v,p))})).apply(this,arguments)}class Li extends R{constructor(p,m,C,I=null){super("password",C),this._email=p,this._password=m,this._tenantId=I}static _fromEmailAndPassword(p,m){return new Li(p,m,"password")}static _fromEmailAndCode(p,m,C=null){return new Li(p,m,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function(v,p){return ur.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(v,p){return Cr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Nt(p,"internal-error")}})()}_linkToIdToken(p,m){var C=this;return(0,h.Z)(function*(){switch(C.signInMethod){case"password":return me(p,{idToken:m,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(v,p){return Wa.apply(this,arguments)}(p,{idToken:m,email:C._email,oobCode:C._password});default:Nt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function us(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithIdp",fn(v,p))})).apply(this,arguments)}class Ci extends R{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ci(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Nt("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:I}=m,P=oe(m,["providerId","signInMethod"]);if(!C||!I)return null;const se=new Ci(C,I);return se.idToken=P.idToken||void 0,se.accessToken=P.accessToken||void 0,se.secret=P.secret,se.nonce=P.nonce,se.pendingToken=P.pendingToken||null,se}_getIdTokenResponse(p){return us(p,this.buildRequest())}_linkToIdToken(p,m){const C=this.buildRequest();return C.idToken=m,us(p,C)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,us(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function Ud(v,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:sendVerificationCode",fn(v,p))})).apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithPhoneNumber",fn(v,p))})).apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(v,p){const m=yield z(v,"POST","/v1/accounts:signInWithPhoneNumber",fn(v,p));if(m.temporaryProof)throw le(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Vi={USER_NOT_FOUND:"user-not-found"};function Xo(){return(Xo=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithPhoneNumber",fn(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Vi)})).apply(this,arguments)}class qi extends R{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qi({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qi({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function(v,p){return Hl.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function(v,p){return rc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(v,p){return Xo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:C,verificationCode:I}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:C,code:I}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:C,phoneNumber:I,temporaryProof:P}=p;return C||m||I||P?new qi({verificationId:m,verificationCode:C,phoneNumber:I,temporaryProof:P}):null}}class qa{constructor(p){var m,C,I,P,se,Te;const Ze=(0,U.zd)((0,U.pd)(p)),Be=null!==(m=Ze.apiKey)&&void 0!==m?m:null,at=null!==(C=Ze.oobCode)&&void 0!==C?C:null,yn=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=Ze.mode)&&void 0!==I?I:null);Oe(Be&&at&&yn,"argument-error"),this.apiKey=Be,this.operation=yn,this.code=at,this.continueUrl=null!==(P=Ze.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(se=Ze.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(Te=Ze.tenantId)&&void 0!==Te?Te:null}static parseLink(p){const m=function(v){const p=(0,U.zd)((0,U.pd)(v)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,C=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(C?(0,U.zd)((0,U.pd)(C)).link:null)||C||m||p||v}(p);try{return new qa(m)}catch(C){return null}}}let ea=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,C){return Li._fromEmailAndPassword(m,C)}static credentialWithLink(m,C){const I=qa.parseLink(C);return Oe(I,"argument-error"),Li._fromEmailAndCode(m,I.code,I.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Fr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class mo extends Fr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Sn extends mo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Oe("providerId"in m&&"signInMethod"in m,"argument-error"),Ci._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Oe(p.idToken||p.accessToken,"argument-error"),Ci._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Sn.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Sn.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:C,oauthTokenSecret:I,pendingToken:P,nonce:se,providerId:Te}=p;if(!C&&!I&&!m&&!P||!Te)return null;try{return new Sn(Te)._credential({idToken:m,accessToken:C,nonce:se,pendingToken:P})}catch(Ze){return null}}}let jd=(()=>{class v extends mo{constructor(){super("facebook.com")}static credential(m){return Ci._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),$d=(()=>{class v extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,C){return Ci._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:C})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:C,oauthAccessToken:I}=m;if(!C&&!I)return null;try{return v.credential(C,I)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),_o=(()=>{class v extends mo{constructor(){super("github.com")}static credential(m){return Ci._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ki extends R{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return us(p,this.buildRequest())}_linkToIdToken(p,m){const C=this.buildRequest();return C.idToken=m,us(p,C)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,us(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:I,pendingToken:P}=m;return C&&I&&P&&C===I?new Ki(C,P):null}static _create(p,m){return new Ki(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sr extends Fr{constructor(p){Oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Sr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Sr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Ki.fromJSON(p);return Oe(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:C}=p;if(!m||!C)return null;try{return Ki._create(C,m)}catch(I){return null}}}let Yr=(()=>{class v extends mo{constructor(){super("twitter.com")}static credential(m,C){return Ci._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:C})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:C,oauthTokenSecret:I}=m;if(!C||!I)return null;try{return v.credential(C,I)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function zl(v,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signUp",fn(v,p))})).apply(this,arguments)}class Lr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,C,I=!1){return(0,h.Z)(function*(){const P=yield Ae._fromIdTokenResponse(p,C,I),se=cs(C);return new Lr({user:P,providerId:se,_tokenResponse:C,operationType:m})})()}static _forOperation(p,m,C){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(C,!0);const I=cs(C);return new Lr({user:p,providerId:I,_tokenResponse:C,operationType:m})})()}}function cs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function yo(v){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(v){var p;const m=Mn(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Lr({user:m.currentUser,providerId:null,operationType:"signIn"});const C=yield zl(m,{returnSecureToken:!0}),I=yield Lr._fromIdTokenResponse(m,"signIn",C,!0);return yield m._updateCurrentUser(I.user),I})).apply(this,arguments)}class _t extends U.ZR{constructor(p,m,C,I){var P;super(m.code,m.message),this.operationType=C,this.user=I,Object.setPrototypeOf(this,_t.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(p,m,C,I){return new _t(p,m,C,I)}}function ic(v,p,m,C){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?_t._fromErrorAndOperation(v,P,p,C):P})}function sc(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Hd(v,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(v,p){const m=(0,U.m9)(v);yield Is(!0,m,p);const{providerUserInfo:C}=yield Ft(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),I=sc(C||[]);return m.providerData=m.providerData.filter(P=>I.has(P.providerId)),I.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ql(v,p){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(v,p,m=!1){const C=yield mt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Lr._forOperation(v,"link",C)})).apply(this,arguments)}function Is(v,p,m){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,h.Z)(function*(v,p,m){yield ut(p);const I=!1===v?"provider-already-linked":"no-such-provider";Oe(sc(p.providerData).has(m)===v,p.auth,I)})).apply(this,arguments)}function Yt(v,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(v,p,m=!1){const{auth:C}=v,I="reauthenticate";try{const P=yield mt(v,ic(C,I,p,v),m);Oe(P.idToken,C,"internal-error");const se=je(P.idToken);Oe(se,C,"internal-error");const{sub:Te}=se;return Oe(v.uid===Te,C,"user-mismatch"),Lr._forOperation(v,I,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Nt(C,"user-mismatch"),P}})).apply(this,arguments)}function Hn(v,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,h.Z)(function*(v,p,m=!1){const C="signIn",I=yield ic(v,C,p),P=yield Lr._fromIdTokenResponse(v,C,I);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function ds(v,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(v,p){return Hn(Mn(v),p)})).apply(this,arguments)}function ra(v,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(v,p){const m=(0,U.m9)(v);return yield Is(!1,m,p.providerId),ql(m,p)})).apply(this,arguments)}function ep(v,p){return oc.apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(v,p){return Yt((0,U.m9)(v),p)})).apply(this,arguments)}function Kl(v,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,h.Z)(function*(v,p){return z(v,"POST","/v1/accounts:signInWithCustomToken",fn(v,p))})).apply(this,arguments)}function br(v,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(v,p){const m=Mn(v),C=yield Kl(m,{token:p,returnSecureToken:!0}),I=yield Lr._fromIdTokenResponse(m,"signIn",C);return yield m._updateCurrentUser(I.user),I})).apply(this,arguments)}class sa{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ui._fromServerResponse(p,m):Nt(p,"internal-error")}}class Ui extends sa{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ui(m)}}function Xr(v,p,m){var C;Oe((null===(C=m.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),Oe(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Oe(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Oe(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function tp(v,p,m){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v),I={requestType:"PASSWORD_RESET",email:p};m&&Xr(C,I,m),yield e_(C,I)})).apply(this,arguments)}function ac(v,p,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(v,p,m){yield L((0,U.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Za(v,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(v,p){yield Ke((0,U.m9)(v),{oobCode:p})})).apply(this,arguments)}function Ya(v,p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(v,p){const m=(0,U.m9)(v),C=yield L(m,{oobCode:p}),I=C.requestType;switch(Oe(I,m,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(C.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(C.mfaInfo,m,"internal-error");default:Oe(C.email,m,"internal-error")}let P=null;return C.mfaInfo&&(P=sa._fromServerResponse(Mn(m),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:I}})).apply(this,arguments)}function Zl(v,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(v,p){const{data:m}=yield Ya((0,U.m9)(v),p);return m.email})).apply(this,arguments)}function la(v,p,m){return vo.apply(this,arguments)}function vo(){return(vo=(0,h.Z)(function*(v,p,m){const C=Mn(v),I=yield zl(C,{returnSecureToken:!0,email:p,password:m}),P=yield Lr._fromIdTokenResponse(C,"signIn",I);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function Qa(v,p,m){return ds((0,U.m9)(v),ea.credential(p,m))}function Wd(v,p,m){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v),I={requestType:"EMAIL_SIGNIN",email:p};Oe(m.handleCodeInApp,C,"argument-error"),m&&Xr(C,I,m),yield Xf(C,I)})).apply(this,arguments)}function Ja(v,p){const m=qa.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Gd(v,p,m){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v),I=ea.credentialWithLink(p,m||wn());return Oe(I._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ds(C,I)})).apply(this,arguments)}function sr(v,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:createAuthUri",fn(v,p))})).apply(this,arguments)}function or(v,p){return lc.apply(this,arguments)}function lc(){return(lc=(0,h.Z)(function*(v,p){const C={identifier:p,continueUri:Qe()?wn():"http://localhost"},{signinMethods:I}=yield sr((0,U.m9)(v),C);return I||[]})).apply(this,arguments)}function Eo(v,p){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,h.Z)(function*(v,p){const m=(0,U.m9)(v),I={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Xr(m.auth,I,p);const{email:P}=yield tc(m.auth,I);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xs(v,p,m){return uc.apply(this,arguments)}function uc(){return(uc=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Xr(C.auth,P,m);const{email:se}=yield Vd(C.auth,P);se!==v.email&&(yield v.reload())})).apply(this,arguments)}function cc(v,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(v,p){return Kt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Co(v,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const C=(0,U.m9)(v),P={idToken:yield C.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},se=yield mt(C,cc(C.auth,P));C.displayName=se.displayName||null,C.photoURL=se.photoUrl||null;const Te=C.providerData.find(({providerId:Ze})=>"password"===Ze);Te&&(Te.displayName=C.displayName,Te.photoURL=C.photoURL),yield C._updateTokensIfNecessary(se)})).apply(this,arguments)}function Xl(v,p){return S((0,U.m9)(v),p,null)}function A(v,p){return S((0,U.m9)(v),null,p)}function S(v,p,m){return j.apply(this,arguments)}function j(){return(j=(0,h.Z)(function*(v,p,m){const{auth:C}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const se=yield mt(v,me(C,P));yield v._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class he{constructor(p,m,C={}){this.isNewUser=p,this.providerId=m,this.profile=C}}class Me extends he{constructor(p,m,C,I){super(p,m,C),this.username=I}}class Ue extends he{constructor(p,m){super(p,"facebook.com",m)}}class ht extends Me{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Xe extends he{constructor(p,m){super(p,"google.com",m)}}class Cn extends Me{constructor(p,m,C){super(p,"twitter.com",m,C)}}function Wn(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(v){var p,m;if(!v)return null;const{providerId:C}=v,I=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const se=null===(m=null===(p=je(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(se)return new he(P,"anonymous"!==se&&"custom"!==se?se:null)}if(!C)return null;switch(C){case"facebook.com":return new Ue(P,I);case"github.com":return new ht(P,I);case"google.com":return new Xe(P,I);case"twitter.com":return new Cn(P,I,v.screenName||null);case"custom":case"anonymous":return new he(P,null);default:return new he(P,C,I)}}(m)}class to{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new to("enroll",p)}static _fromMfaPendingCredential(p){return new to("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,C;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return to._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(C=p.multiFactorSession)||void 0===C?void 0:C.idToken)return to._fromIdtoken(p.multiFactorSession.idToken)}return null}}class da{constructor(p,m,C){this.session=p,this.hints=m,this.signInResolver=C}static _fromError(p,m){const C=Mn(p),I=m.customData._serverResponse,P=(I.mfaInfo||[]).map(Te=>sa._fromServerResponse(C,Te));Oe(I.mfaPendingCredential,C,"internal-error");const se=to._fromMfaPendingCredential(I.mfaPendingCredential);return new da(se,P,function(){var Te=(0,h.Z)(function*(Ze){const Be=yield Ze._process(C,se);delete I.mfaInfo,delete I.mfaPendingCredential;const at=Object.assign(Object.assign({},I),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(m.operationType){case"signIn":const yn=yield Lr._fromIdTokenResponse(C,m.operationType,at);return yield C._updateCurrentUser(yn.user),yn;case"reauthenticate":return Oe(m.user,C,"internal-error"),Lr._forOperation(m.user,m.operationType,at);default:Nt(C,"internal-error")}});return function(Ze){return Te.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function np(v,p){var m;const C=(0,U.m9)(v),I=p;return Oe(p.customData.operationType,C,"argument-error"),Oe(null===(m=I.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,C,"argument-error"),da._fromError(C,I)}function dc(v,p){return Kt(v,"POST","/v2/accounts/mfaEnrollment:start",fn(v,p))}class zd{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(C=>sa._fromServerResponse(p.auth,C)))})}static _fromUser(p){return new zd(p)}getSession(){var p=this;return(0,h.Z)(function*(){return to._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var C=this;return(0,h.Z)(function*(){const I=p,P=yield C.getSession(),se=yield mt(C.user,I._process(C.user.auth,P,m));return yield C.user._updateTokensIfNecessary(se),C.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const C="string"==typeof p?p:p.uid,I=yield m.user.getIdToken(),P=yield mt(m.user,function(v,p){return Kt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(v,p))}(m.user.auth,{idToken:I,mfaEnrollmentId:C}));m.enrolledFactors=m.enrolledFactors.filter(({uid:se})=>se!==C),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(se){if("auth/user-token-expired"!==se.code)throw se}})()}}const ip=new WeakMap;function XE(v){const p=(0,U.m9)(v);return ip.has(p)||ip.set(p,zd._fromUser(p)),ip.get(p)}const wo="__sak";class qd{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(wo,"1"),this.storage.removeItem(wo),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xa=(()=>{class v extends qd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,C)=>this.onStorageEvent(m,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,U.z$)();return _r(v)||Fi(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=oi(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const C of Object.keys(this.listeners)){const I=this.storage.getItem(C),P=this.localCache[C];I!==P&&m(C,P,I)}}onStorageEvent(m,C=!1){if(!m.key)return void this.forAllChangedKeys((Te,Ze,Be)=>{this.notifyListeners(Te,Be)});const I=m.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Te=this.storage.getItem(I);if(m.newValue!==Te)null!==m.newValue?this.storage.setItem(I,m.newValue):this.storage.removeItem(I);else if(this.localCache[I]===m.newValue&&!C)return}const P=()=>{const Te=this.storage.getItem(I);!C&&this.localCache[I]===Te||this.notifyListeners(I,Te)},se=this.storage.getItem(I);(0,U.w1)()&&10===document.documentMode&&se!==m.newValue&&m.newValue!==m.oldValue?setTimeout(P,10):P()}notifyListeners(m,C){this.localCache[m]=C;const I=this.listeners[m];if(I)for(const P of Array.from(I))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,C,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:C,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,C){var I=()=>super._set,P=this;return(0,h.Z)(function*(){yield I().call(P,m,C),P.localCache[m]=JSON.stringify(C)})()}_get(m){var C=()=>super._get,I=this;return(0,h.Z)(function*(){const P=yield C().call(I,m);return I.localCache[m]=JSON.stringify(P),P})()}_remove(m){var C=()=>super._remove,I=this;return(0,h.Z)(function*(){yield C().call(I,m),delete I.localCache[m]})()}}return v.type="LOCAL",v})(),eu=(()=>{class v extends qd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,C){}_removeListener(m,C){}}return v.type="SESSION",v})();let t0=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const C=this.receivers.find(P=>P.isListeningto(m));if(C)return C;const I=new v(m);return this.receivers.push(I),I}isListeningto(m){return this.eventTarget===m}handleEvent(m){var C=this;return(0,h.Z)(function*(){const I=m,{eventId:P,eventType:se,data:Te}=I.data,Ze=C.handlersMap[se];if(!(null==Ze?void 0:Ze.size))return;I.ports[0].postMessage({status:"ack",eventId:P,eventType:se});const Be=Array.from(Ze).map(function(){var yn=(0,h.Z)(function*(vn){return vn(I.origin,Te)});return function(vn){return yn.apply(this,arguments)}}()),at=yield function(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(C){return{fulfilled:!1,reason:C}}});return function(m){return p.apply(this,arguments)}}()))}(Be);I.ports[0].postMessage({status:"done",eventId:P,eventType:se,response:at})})()}_subscribe(m,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(C)}_unsubscribe(m,C){this.handlersMap[m]&&C&&this.handlersMap[m].delete(C),(!C||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function pc(v="",p=10){let m="";for(let C=0;C<p;C++)m+=Math.floor(10*Math.random());return v+m}class To{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,C=50){var I=this;return(0,h.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let se,Te;return new Promise((Ze,Be)=>{const at=pc("",20);P.port1.start();const yn=setTimeout(()=>{Be(new Error("unsupported_event"))},C);Te={messageChannel:P,onMessage(vn){const Mr=vn;if(Mr.data.eventId===at)switch(Mr.data.status){case"ack":clearTimeout(yn),se=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),Ze(Mr.data.response);break;default:clearTimeout(yn),clearTimeout(se),Be(new Error("invalid_response"))}}},I.handlers.add(Te),P.port1.addEventListener("message",Te.onMessage),I.target.postMessage({eventType:p,eventId:at,data:m},[P.port2])}).finally(()=>{Te&&I.removeMessageHandler(Te)})})()}}function cr(){return window}function Kd(){return void 0!==cr().WorkerGlobalScope&&"function"==typeof cr().importScripts}function ha(){return(ha=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const tu="firebaseLocalStorageDb",As="firebaseLocalStorage",Ao="fbase_key";class Pr{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function fa(v,p){return v.transaction([As],p?"readwrite":"readonly").objectStore(As)}function op(){const v=indexedDB.open(tu,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(As,{keyPath:Ao})}catch(I){m(I)}}),v.addEventListener("success",(0,h.Z)(function*(){const C=v.result;C.objectStoreNames.contains(As)?p(C):(C.close(),yield function(){const v=indexedDB.deleteDatabase(tu);return new Pr(v).toPromise()}(),p(yield op()))}))})}function r0(v,p,m){return gc.apply(this,arguments)}function gc(){return(gc=(0,h.Z)(function*(v,p,m){const C=fa(v,!0).put({[Ao]:p,value:m});return new Pr(C).toPromise()})).apply(this,arguments)}function nu(){return(nu=(0,h.Z)(function*(v,p){const m=fa(v,!1).get(p),C=yield new Pr(m).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Nn(v,p){const m=fa(v,!0).delete(p);return new Pr(m).toPromise()}const ap=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield op()),m.db})()}_withRetries(m){var C=this;return(0,h.Z)(function*(){let I=0;for(;;)try{const P=yield C._openDb();return yield m(P)}catch(P){if(I++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Kd()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=t0._getInstance(Kd()?self:null),m.receiver._subscribe("keyChanged",function(){var C=(0,h.Z)(function*(I,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(I,P){return C.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var C=(0,h.Z)(function*(I,P){return["keyChanged"]});return function(I,P){return C.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var C,I;if(m.activeServiceWorker=yield function(){return ha.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new To(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(C=P[0])||void 0===C?void 0:C.fulfilled)&&(null===(I=P[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var C=this;return(0,h.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:m},C.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield op();return yield r0(m,wo,"1"),yield Nn(m,wo),!0}catch(m){}return!1})()}_withPendingWrite(m){var C=this;return(0,h.Z)(function*(){C.pendingWrites++;try{yield m()}finally{C.pendingWrites--}})()}_set(m,C){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(P=>r0(P,m,C)),I.localCache[m]=C,I.notifyServiceWorker(m)}))})()}_get(m){var C=this;return(0,h.Z)(function*(){const I=yield C._withRetries(P=>function(v,p){return nu.apply(this,arguments)}(P,m));return C.localCache[m]=I,I})()}_remove(m){var C=this;return(0,h.Z)(function*(){return C._withPendingWrite((0,h.Z)(function*(){return yield C._withRetries(I=>Nn(I,m)),delete C.localCache[m],C.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const C=yield m._withRetries(se=>{const Te=fa(se,!1).getAll();return new Pr(Te).toPromise()});if(!C)return[];if(0!==m.pendingWrites)return[];const I=[],P=new Set;for(const{fbase_key:se,value:Te}of C)P.add(se),JSON.stringify(m.localCache[se])!==JSON.stringify(Te)&&(m.notifyListeners(se,Te),I.push(se));for(const se of Object.keys(m.localCache))m.localCache[se]&&!P.has(se)&&(m.notifyListeners(se,null),I.push(se));return I})()}notifyListeners(m,C){this.localCache[m]=C;const I=this.listeners[m];if(I)for(const P of Array.from(I))P(C)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function i_(v,p){return Kt(v,"POST","/v2/accounts/mfaSignIn:start",fn(v,p))}function up(){return(up=(0,h.Z)(function*(v){return(yield Kt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function o_(v){return new Promise((p,m)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=p,C.onerror=I=>{const P=pt("internal-error");P.customData=I,m(P)},C.type="text/javascript",C.charset="UTF-8",function(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(C)})}function a_(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ar=1e12;class mc{constructor(p){this.auth=p,this.counter=ar,this._widgets=new Map}render(p,m){const C=this.counter;return this._widgets.set(C,new _c(p,this.auth.name,m||{})),this.counter++,C}reset(p){var m;const C=p||ar;null===(m=this._widgets.get(C))||void 0===m||m.delete(),this._widgets.delete(C)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ar))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var C;return null===(C=m._widgets.get(p||ar))||void 0===C||C.execute(),""})()}}class _c{constructor(p,m,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof p?document.getElementById(p):p;Oe(I,"argument-error",{appName:m}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}();const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qd=a_("rcb"),Tn=new An(3e4,6e4);class ps{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cr().grecaptcha}load(p,m=""){return Oe((v=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(cr().grecaptcha):new Promise((C,I)=>{const P=cr().setTimeout(()=>{I(pt(p,"network-request-failed"))},Tn.get());cr()[Qd]=()=>{cr().clearTimeout(P),delete cr()[Qd];const Te=cr().grecaptcha;if(!Te)return void I(pt(p,"internal-error"));const Ze=Te.render;Te.render=(Be,at)=>{const yn=Ze(Be,at);return this.counter++,yn},this.hostLanguage=m,C(Te)},o_(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Qd,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),I(pt(p,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!cr().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ro{load(p){return(0,h.Z)(function*(){return new mc(p)})()}clearedOneInstance(){}}const ga="recaptcha",ru={theme:"light",type:"image"};class Vr{constructor(p,m=Object.assign({},ru),C){this.parameters=m,this.type=ga,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(C),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof p?document.getElementById(p):p;Oe(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ro:new ps,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),C=p.getAssertedRecaptcha();return C.getResponse(m)||new Promise(P=>{const se=Te=>{!Te||(p.tokenChangeListeners.delete(se),P(Te))};p.tokenChangeListeners.add(se),p.isInvisible&&C.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(C=>C(m)),"function"==typeof p)p(m);else if("string"==typeof p){const C=cr()[p];"function"==typeof C&&C(m)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const C=document.createElement("div");m.appendChild(C),m=C}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){Oe(Qe()&&!Kd(),p.auth,"internal-error"),yield function(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function(v){return up.apply(this,arguments)}(p.auth);Oe(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jd{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qi._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function iu(v,p,m){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(v,p,m){const C=Mn(v),I=yield su(C,p,(0,U.m9)(m));return new Jd(I,P=>ds(C,P))})).apply(this,arguments)}function yc(v,p,m){return Po.apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v);yield Is(!1,C,"phone");const I=yield su(C.auth,p,(0,U.m9)(m));return new Jd(I,P=>ra(C,P))})).apply(this,arguments)}function l0(v,p,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v),I=yield su(C.auth,p,(0,U.m9)(m));return new Jd(I,P=>ep(C,P))})).apply(this,arguments)}function su(v,p,m){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,h.Z)(function*(v,p,m){var C;const I=yield m.verify();try{let P;if(Oe("string"==typeof I,v,"argument-error"),Oe(m.type===ga,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const se=P.session;if("phoneNumber"in P)return Oe("enroll"===se.type,v,"internal-error"),(yield dc(v,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{Oe("signin"===se.type,v,"internal-error");const Te=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return Oe(Te,v,"missing-multi-factor-info"),(yield i_(v,{mfaPendingCredential:se.credential,mfaEnrollmentId:Te,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Ud(v,{phoneNumber:P.phoneNumber,recaptchaToken:I});return se}}finally{m._reset()}})).apply(this,arguments)}function cp(v,p){return eh.apply(this,arguments)}function eh(){return(eh=(0,h.Z)(function*(v,p){yield ql((0,U.m9)(v),p)})).apply(this,arguments)}let l_=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Mn(m)}verifyPhoneNumber(m,C){return su(this.auth,m,(0,U.m9)(C))}static credential(m,C){return qi._fromVerification(m,C)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:C,temporaryProof:I}=m;return C&&I?qi._fromTokenResponse(C,I):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function gs(v,p){return p?$e(p):(Oe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class vc extends R{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return us(p,this._buildIdpRequest())}_linkToIdToken(p,m){return us(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return us(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ma(v){return Hn(v.auth,new vc(v),v.bypassAuthState)}function th(v){const{auth:p,user:m}=v;return Oe(m,p,"internal-error"),Yt(m,new vc(v),v.bypassAuthState)}function ou(v){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return Oe(m,p,"internal-error"),ql(m,new vc(v),v.bypassAuthState)})).apply(this,arguments)}class Ti{constructor(p,m,C,I,P=!1){this.auth=p,this.resolver=C,this.user=I,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(C,I){p.pendingPromise={resolve:C,reject:I};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(C,I){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:C,sessionId:I,postBody:P,tenantId:se,error:Te,type:Ze}=p;if(Te)return void m.reject(Te);const Be={auth:m.auth,requestUri:C,sessionId:I,tenantId:se||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ze)(Be))}catch(at){m.reject(at)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ma;case"linkViaPopup":case"linkViaRedirect":return ou;case"reauthViaPopup":case"reauthViaRedirect":return th;default:Nt(this.auth,"internal-error")}}resolve(p){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ec=new An(2e3,1e4);function u_(v,p,m){return xt.apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(v,p,m){const C=Mn(v);jn(v,p,Fr);const I=gs(C,m);return new ya(C,"signInViaPopup",p,I).executeNotNull()})).apply(this,arguments)}function No(v,p,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v);jn(C.auth,p,Fr);const I=gs(C.auth,m);return new ya(C.auth,"reauthViaPopup",p,I,C).executeNotNull()})).apply(this,arguments)}function nh(v,p,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v);jn(C.auth,p,Fr);const I=gs(C.auth,m);return new ya(C.auth,"linkViaPopup",p,I,C).executeNotNull()})).apply(this,arguments)}let ya=(()=>{class v extends Ti{constructor(m,C,I,P,se){super(m,C,P,se),this.provider=I,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const C=yield m.execute();return Oe(C,m.auth,"internal-error"),C})()}onExecution(){var m=this;return(0,h.Z)(function*(){mn(1===m.filter.length,"Popup operations only handle one event");const C=pc();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],C),m.authWindow.associatedEvent=C,m.resolver._originValidation(m.auth).catch(I=>{m.reject(I)}),m.resolver._isIframeWebStorageSupported(m.auth,I=>{I||m.reject(pt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var C,I;this.pollId=(null===(I=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ec.get())};m()}}return v.currentPopupAction=null,v})();const bn=new Map;class hp extends Ti{constructor(p,m,C=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,C),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let C=bn.get(m.auth._key());if(!C){try{const P=(yield function(v,p){return no.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;C=()=>Promise.resolve(P)}catch(I){C=()=>Promise.reject(I)}bn.set(m.auth._key(),C)}return m.bypassAuthState||bn.set(m.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,C=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(C,p);if("unknown"!==p.type){if(p.eventId){const I=yield C.auth._redirectUserForId(p.eventId);if(I)return C.user=I,m().call(C,p);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function no(){return(no=(0,h.Z)(function*(v,p){const m=c_(p),C=Ii(v);if(!(yield C._isAvailable()))return!1;const I="true"===(yield C._get(m));return yield C._remove(m),I})).apply(this,arguments)}function Rs(v,p){return rh.apply(this,arguments)}function rh(){return(rh=(0,h.Z)(function*(v,p){return Ii(v)._set(c_(p),"true")})).apply(this,arguments)}function fp(){bn.clear()}function Ii(v){return $e(v._redirectPersistence)}function c_(v){return Ge("pendingRedirect",v.config.apiKey,v.name)}function el(v,p,m){return function(v,p,m){return tl.apply(this,arguments)}(v,p,m)}function tl(){return(tl=(0,h.Z)(function*(v,p,m){const C=Mn(v);jn(v,p,Fr);const I=gs(C,m);return yield Rs(I,C),I._openRedirect(C,p,"signInViaRedirect")})).apply(this,arguments)}function Oo(v,p,m){return function(v,p,m){return xo.apply(this,arguments)}(v,p,m)}function xo(){return(xo=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v);jn(C.auth,p,Fr);const I=gs(C.auth,m);yield Rs(I,C.auth);const P=yield sh(C);return I._openRedirect(C.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function au(v,p,m){return function(v,p,m){return bc.apply(this,arguments)}(v,p,m)}function bc(){return(bc=(0,h.Z)(function*(v,p,m){const C=(0,U.m9)(v);jn(C.auth,p,Fr);const I=gs(C.auth,m);yield Is(!1,C,p.providerId),yield Rs(I,C.auth);const P=yield sh(C);return I._openRedirect(C.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function pp(v,p){return ih.apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(v,p){return yield Mn(v)._initializationPromise,ko(v,p,!1)})).apply(this,arguments)}function ko(v,p){return va.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(v,p,m=!1){const C=Mn(v),I=gs(C,p),se=yield new hp(C,I,m).execute();return se&&!m&&(delete se.user._redirectEventId,yield C._persistUserIfCurrent(se.user),yield C._setRedirectUser(null,p)),se})).apply(this,arguments)}function sh(v){return gp.apply(this,arguments)}function gp(){return(gp=(0,h.Z)(function*(v){const p=pc(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class oh{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(p,C)&&(m=!0,this.sendToConsumer(p,C),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fo(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var C;if(p.error&&!Fo(p)){const I=(null===(C=p.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";m.onError(pt(this.auth,I))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const C=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&C}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(p))}saveEventToCache(p){this.cachedEventUids.add(d_(p)),this.lastProcessedEventTime=Date.now()}}function d_(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Fo({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function _p(v){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,h.Z)(function*(v,p={}){return Kt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const ah=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nl=/^https?/;function ms(){return(ms=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield _p(v);for(const m of p)try{if(yp(m))return}catch(C){}Nt(v,"unauthorized-domain")})).apply(this,arguments)}function yp(v){const p=wn(),{protocol:m,hostname:C}=new URL(p);if(v.startsWith("chrome-extension://")){const se=new URL(v);return""===se.hostname&&""===C?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&se.hostname===C}if(!nl.test(m))return!1;if(ah.test(v))return C===v;const I=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(C)}const Lo=new An(3e4,6e4);function lu(){const v=cr().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let uu=null;function Ep(v){return uu=uu||function(v){return new Promise((p,m)=>{var C,I,P;function se(){lu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{lu(),m(pt(v,"network-request-failed"))},timeout:Lo.get()})}if(null===(I=null===(C=cr().gapi)||void 0===C?void 0:C.iframes)||void 0===I?void 0:I.Iframe)p(gapi.iframes.getContext());else{if(!(null===(P=cr().gapi)||void 0===P?void 0:P.load)){const Te=a_("iframefcb");return cr()[Te]=()=>{gapi.load?se():m(pt(v,"network-request-failed"))},o_(`https://apis.google.com/js/api.js?onload=${Te}`).catch(Ze=>m(Ze))}se()}}).catch(p=>{throw uu=null,p})}(v),uu}const Ca=new An(5e3,15e3),Cp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g_(v){const p=v.config;Oe(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?en(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},I=bp.get(v.config.apiHost);I&&(C.eid=I);const P=v._getFrameworks();return P.length&&(C.fw=P.join(",")),`${m}?${(0,U.xO)(C).slice(1)}`}function Vo(){return(Vo=(0,h.Z)(function*(v){const p=yield Ep(v),m=cr().gapi;return Oe(m,v,"internal-error"),p.open({where:document.body,url:g_(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cp,dontclear:!0},C=>new Promise(function(){var I=(0,h.Z)(function*(P,se){yield C.restyle({setHideOnLeave:!1});const Te=pt(v,"network-request-failed"),Ze=cr().setTimeout(()=>{se(Te)},Ca.get());function Be(){cr().clearTimeout(Ze),P(C)}C.ping(Be).then(Be,()=>{se(Te)})});return function(P,se){return I.apply(this,arguments)}}()))})).apply(this,arguments)}const wp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lh{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Xi(v,p,m,C,I,P){Oe(v.config.authDomain,v,"auth-domain-config-required"),Oe(v.config.apiKey,v,"invalid-api-key");const se={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:C,v:O.SDK_VERSION,eventId:I};if(p instanceof Fr){p.setDefaultLanguage(v.languageCode),se.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(se.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ze,Be]of Object.entries(P||{}))se[Ze]=Be}if(p instanceof mo){const Ze=p.getScopes().filter(Be=>""!==Be);Ze.length>0&&(se.scopes=Ze.join(","))}v.tenantId&&(se.tid=v.tenantId);const Te=se;for(const Ze of Object.keys(Te))void 0===Te[Ze]&&delete Te[Ze];return`${function({config:v}){return v.emulator?en(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,U.xO)(Te).slice(1)}`}const Tc="webStorageSupport",Ip=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eu,this._completeRedirectFn=ko}_openPopup(p,m,C,I){var P=this;return(0,h.Z)(function*(){var se;mn(null===(se=P.eventManagers[p._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const Te=Xi(p,m,C,wn(),I);return function(v,p,m,C=500,I=600){const P=Math.max((window.screen.availHeight-I)/2,0).toString(),se=Math.max((window.screen.availWidth-C)/2,0).toString();let Te="";const Ze=Object.assign(Object.assign({},wp),{width:C.toString(),height:I.toString(),top:P,left:se}),Be=(0,U.z$)().toLowerCase();m&&(Te=er(Be)?"_blank":m),vr(Be)&&(p=p||"http://localhost",Ze.scrollbars="yes");const at=Object.entries(Ze).reduce((vn,[Mr,In])=>`${vn}${Mr}=${In},`,"");if(function(v=(0,U.z$)()){var p;return Fi(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Be)&&"_self"!==Te)return function(v,p){const m=document.createElement("a");m.href=v,m.target=p;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(C)}(p||"",Te),new lh(null);const yn=window.open(p||"",Te,at);Oe(yn,v,"popup-blocked");try{yn.focus()}catch(vn){}return new lh(yn)}(p,Te,pc())})()}_openRedirect(p,m,C,I){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),v=Xi(p,m,C,wn(),I),cr().location.href=v,new Promise(()=>{});var v})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:I,promise:P}=this.eventManagers[m];return I?Promise.resolve(I):(mn(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(p);return this.eventManagers[m]={promise:C},C.catch(()=>{delete this.eventManagers[m]}),C}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const C=yield function(v){return Vo.apply(this,arguments)}(p),I=new oh(p);return C.register("authEvent",P=>(Oe(null==P?void 0:P.authEvent,p,"invalid-auth-event"),{status:I.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:I},m.iframes[p._key()]=C,I})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Tc,{type:Tc},I=>{var P;const se=null===(P=null==I?void 0:I[0])||void 0===P?void 0:P[Tc];void 0!==se&&m(!!se),Nt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return ms.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return oi()||_r()||Fi()}};class ni extends class{constructor(p){this.factorId=p}_process(p,m,C){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,C);case"signin":return this._finalizeSignIn(p,m.credential);default:return hn("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ni(p)}_finalizeEnroll(p,m,C){return function(v,p){return Kt(v,"POST","/v2/accounts/mfaEnrollment:finalize",fn(v,p))}(p,{idToken:m,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function(v,p){return Kt(v,"POST","/v2/accounts/mfaSignIn:finalize",fn(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dp=(()=>{class v{constructor(){}static assertion(m){return ni._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var v,uh="@firebase/auth";class C_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(C=>{var I;p((null===(I=C)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ch(v=(0,O.getApp)()){const p=(0,O._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function(v,p){const m=(0,O._getProvider)(v,"auth");if(m.isInitialized()){const I=m.getImmediate(),P=m.getOptions();if((0,U.vZ)(P,null!=p?p:{}))return I;Nt(I,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Ip,persistence:[ap,Xa,eu]})}v="Browser",(0,O._registerComponent)(new wt.wA("auth",(p,{options:m})=>{const C=p.getProvider("app").getImmediate(),{apiKey:I,authDomain:P}=C.options;return(se=>{Oe(I&&!I.includes(":"),"invalid-api-key",{appName:se.name}),Oe(!(null==P?void 0:P.includes(":")),"argument-error",{appName:se.name});const Te={apiKey:I,authDomain:P,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kr(v)},Ze=new tr(se,Te);return function(v,p){const m=(null==p?void 0:p.persistence)||[],C=(Array.isArray(m)?m:[m]).map($e);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(C,null==p?void 0:p.popupRedirectResolver)}(Ze,m),Ze})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,C)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new wt.wA("auth-internal",p=>{const m=Mn(p.getProvider("auth").getImmediate());return new C_(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(uh,"0.19.6",void 0),(0,O.registerVersion)(uh,"0.19.6","esm2017")},3854:(We,ve,N)=>{"use strict";N.d(ve,{BH:()=>ge,LL:()=>tt,ZR:()=>wt,gQ:()=>hn,zI:()=>lt,hu:()=>U,g5:()=>O,US:()=>J,tV:()=>X,h$:()=>oe,$s:()=>Kt,r3:()=>an,Sg:()=>Re,ne:()=>mn,p$:()=>V,vZ:()=>pt,ZB:()=>$,gK:()=>Qe,pd:()=>Oe,m9:()=>qr,z$:()=>xe,GJ:()=>fr,jU:()=>ae,ru:()=>de,xb:()=>ct,w1:()=>Ye,hl:()=>Qt,uI:()=>be,UG:()=>Ee,Yr:()=>St,b$:()=>Ce,w9:()=>as,cI:()=>jr,UI:()=>Nt,xO:()=>jn,zd:()=>rr,DV:()=>Yn,ug:()=>en,dS:()=>An,Pz:()=>Or,Dv:()=>wn,Wj:()=>Rt,lb:()=>kt,eu:()=>bt});const U=function(z,H){if(!z)throw O(H)},O=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ue=function(z){const H=[];let Y=0;for(let De=0;De<z.length;De++){let le=z.charCodeAt(De);le<128?H[Y++]=le:le<2048?(H[Y++]=le>>6|192,H[Y++]=63&le|128):55296==(64512&le)&&De+1<z.length&&56320==(64512&z.charCodeAt(De+1))?(le=65536+((1023&le)<<10)+(1023&z.charCodeAt(++De)),H[Y++]=le>>18|240,H[Y++]=le>>12&63|128,H[Y++]=le>>6&63|128,H[Y++]=63&le|128):(H[Y++]=le>>12|224,H[Y++]=le>>6&63|128,H[Y++]=63&le|128)}return H},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let le=0;le<z.length;le+=3){const qe=z[le],ot=le+1<z.length,Ft=ot?z[le+1]:0,_n=le+2<z.length,Fn=_n?z[le+2]:0;let fe=(15&Ft)<<2|Fn>>6,Q=63&Fn;_n||(Q=64,ot||(fe=64)),De.push(Y[qe>>2],Y[(3&qe)<<4|Ft>>4],Y[fe],Y[Q])}return De.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(ue(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let Y=0,De=0;for(;Y<z.length;){const le=z[Y++];if(le<128)H[De++]=String.fromCharCode(le);else if(le>191&&le<224){const qe=z[Y++];H[De++]=String.fromCharCode((31&le)<<6|63&qe)}else if(le>239&&le<365){const _n=((7&le)<<18|(63&z[Y++])<<12|(63&z[Y++])<<6|63&z[Y++])-65536;H[De++]=String.fromCharCode(55296+(_n>>10)),H[De++]=String.fromCharCode(56320+(1023&_n))}else{const qe=z[Y++],ot=z[Y++];H[De++]=String.fromCharCode((15&le)<<12|(63&qe)<<6|63&ot)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const Y=H?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let le=0;le<z.length;){const qe=Y[z.charAt(le++)],Ft=le<z.length?Y[z.charAt(le)]:0;++le;const Fn=le<z.length?Y[z.charAt(le)]:64;++le;const Ot=le<z.length?Y[z.charAt(le)]:64;if(++le,null==qe||null==Ft||null==Fn||null==Ot)throw Error();De.push(qe<<2|Ft>>4),64!==Fn&&(De.push(Ft<<4&240|Fn>>2),64!==Ot&&De.push(Fn<<6&192|Ot))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},oe=function(z){const H=ue(z);return J.encodeByteArray(H,!0)},te=function(z){return oe(z).replace(/\./g,"")},X=function(z){try{return J.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function V(z){return $(void 0,z)}function $(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const Y in H)!H.hasOwnProperty(Y)||!G(Y)||(z[Y]=$(z[Y],H[Y]));return z}function G(z){return"__proto__"!==z}class ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Y)=>{this.resolve=H,this.reject=Y})}wrapCallback(H){return(Y,De)=>{Y?this.reject(Y):this.resolve(De),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Y):H(Y,De))}}}function Re(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=H||"demo-project",le=z.iat||0,qe=z.sub||z.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ot=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:le,exp:le+3600,auth_time:le,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},z);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(ot)),""].join(".")}function xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function ae(){return"object"==typeof self&&self.self===self}function de(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ye(){const z=xe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function St(){return!1}function Qt(){return"object"==typeof indexedDB}function bt(){return new Promise((z,H)=>{try{let Y=!0;const De="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(De);le.onsuccess=()=>{le.result.close(),Y||self.indexedDB.deleteDatabase(De),z(!0)},le.onupgradeneeded=()=>{Y=!1},le.onerror=()=>{var qe;H((null===(qe=le.error)||void 0===qe?void 0:qe.message)||"")}}catch(Y){H(Y)}})}function lt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class wt extends Error{constructor(H,Y,De){super(Y),this.code=H,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(H,Y,De){this.service=H,this.serviceName=Y,this.errors=De}create(H,...Y){const De=Y[0]||{},le=`${this.service}/${H}`,qe=this.errors[H],ot=qe?function(z,H){return z.replace(Gi,(Y,De)=>{const le=H[De];return null!=le?String(le):`<${De}?>`})}(qe,De):"Error";return new wt(le,`${this.serviceName}: ${ot} (${le}).`,De)}}const Gi=/\{\$([^}]+)}/g;function jr(z){return JSON.parse(z)}function Or(z){return JSON.stringify(z)}const Wt=function(z){let H={},Y={},De={},le="";try{const qe=z.split(".");H=jr(X(qe[0])||""),Y=jr(X(qe[1])||""),le=qe[2],De=Y.d||{},delete Y.d}catch(qe){}return{header:H,claims:Y,data:De,signature:le}},as=function(z){const Y=Wt(z).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},fr=function(z){const H=Wt(z).claims;return"object"==typeof H&&!0===H.admin};function an(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function Yn(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function ct(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Nt(z,H,Y){const De={};for(const le in z)Object.prototype.hasOwnProperty.call(z,le)&&(De[le]=H.call(Y,z[le],le,z));return De}function pt(z,H){if(z===H)return!0;const Y=Object.keys(z),De=Object.keys(H);for(const le of Y){if(!De.includes(le))return!1;const qe=z[le],ot=H[le];if(xn(qe)&&xn(ot)){if(!pt(qe,ot))return!1}else if(qe!==ot)return!1}for(const le of De)if(!Y.includes(le))return!1;return!0}function xn(z){return null!==z&&"object"==typeof z}function jn(z){const H=[];for(const[Y,De]of Object.entries(z))Array.isArray(De)?De.forEach(le=>{H.push(encodeURIComponent(Y)+"="+encodeURIComponent(le))}):H.push(encodeURIComponent(Y)+"="+encodeURIComponent(De));return H.length?"&"+H.join("&"):""}function rr(z){const H={};return z.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[le,qe]=De.split("=");H[decodeURIComponent(le)]=decodeURIComponent(qe)}}),H}function Oe(z){const H=z.indexOf("?");if(!H)return"";const Y=z.indexOf("#",H);return z.substring(H,Y>0?Y:void 0)}class hn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Y){Y||(Y=0);const De=this.W_;if("string"==typeof H)for(let Ot=0;Ot<16;Ot++)De[Ot]=H.charCodeAt(Y)<<24|H.charCodeAt(Y+1)<<16|H.charCodeAt(Y+2)<<8|H.charCodeAt(Y+3),Y+=4;else for(let Ot=0;Ot<16;Ot++)De[Ot]=H[Y]<<24|H[Y+1]<<16|H[Y+2]<<8|H[Y+3],Y+=4;for(let Ot=16;Ot<80;Ot++){const fe=De[Ot-3]^De[Ot-8]^De[Ot-14]^De[Ot-16];De[Ot]=4294967295&(fe<<1|fe>>>31)}let Fn,Ln,le=this.chain_[0],qe=this.chain_[1],ot=this.chain_[2],Ft=this.chain_[3],_n=this.chain_[4];for(let Ot=0;Ot<80;Ot++){Ot<40?Ot<20?(Fn=Ft^qe&(ot^Ft),Ln=1518500249):(Fn=qe^ot^Ft,Ln=1859775393):Ot<60?(Fn=qe&ot|Ft&(qe|ot),Ln=2400959708):(Fn=qe^ot^Ft,Ln=3395469782);const fe=(le<<5|le>>>27)+Fn+_n+Ln+De[Ot]&4294967295;_n=Ft,Ft=ot,ot=4294967295&(qe<<30|qe>>>2),qe=le,le=fe}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+qe&4294967295,this.chain_[2]=this.chain_[2]+ot&4294967295,this.chain_[3]=this.chain_[3]+Ft&4294967295,this.chain_[4]=this.chain_[4]+_n&4294967295}update(H,Y){if(null==H)return;void 0===Y&&(Y=H.length);const De=Y-this.blockSize;let le=0;const qe=this.buf_;let ot=this.inbuf_;for(;le<Y;){if(0===ot)for(;le<=De;)this.compress_(H,le),le+=this.blockSize;if("string"==typeof H){for(;le<Y;)if(qe[ot]=H.charCodeAt(le),++ot,++le,ot===this.blockSize){this.compress_(qe),ot=0;break}}else for(;le<Y;)if(qe[ot]=H[le],++ot,++le,ot===this.blockSize){this.compress_(qe),ot=0;break}}this.inbuf_=ot,this.total_+=Y}digest(){const H=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&Y,Y/=256;this.compress_(this.buf_);let De=0;for(let le=0;le<5;le++)for(let qe=24;qe>=0;qe-=8)H[De]=this.chain_[le]>>qe&255,++De;return H}}function mn(z,H){const Y=new kn(z,H);return Y.subscribe.bind(Y)}class kn{constructor(H,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{H(this)}).catch(De=>{this.error(De)})}next(H){this.forEachObserver(Y=>{Y.next(H)})}error(H){this.forEachObserver(Y=>{Y.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Y,De){let le;if(void 0===H&&void 0===Y&&void 0===De)throw new Error("Missing Observer.");le=function(z,H){if("object"!=typeof z||null===z)return!1;for(const Y of["next","error","complete"])if(Y in z&&"function"==typeof z[Y])return!0;return!1}(H)?H:{next:H,error:Y,complete:De},void 0===le.next&&(le.next=Xn),void 0===le.error&&(le.error=Xn),void 0===le.complete&&(le.complete=Xn);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch(ot){}}),this.observers.push(le),qe}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,H)}sendOne(H,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Y(this.observers[H])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xn(){}const wn=function(z,H,Y,De){let le;if(De<H?le="at least "+H:De>Y&&(le=0===Y?"none":"no more than "+Y),le)throw new Error(z+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+le+".")};function Qe(z,H){return`${z} failed: ${H} argument `}function Rt(z,H,Y,De){if((!De||Y)&&"function"!=typeof Y)throw new Error(Qe(z,H)+"must be a valid function.")}function kt(z,H,Y,De){if((!De||Y)&&("object"!=typeof Y||null===Y))throw new Error(Qe(z,H)+"must be a valid context object.")}const An=function(z){const H=[];let Y=0;for(let De=0;De<z.length;De++){let le=z.charCodeAt(De);if(le>=55296&&le<=56319){const qe=le-55296;De++,U(De<z.length,"Surrogate pair missing trail surrogate."),le=65536+(qe<<10)+(z.charCodeAt(De)-56320)}le<128?H[Y++]=le:le<2048?(H[Y++]=le>>6|192,H[Y++]=63&le|128):le<65536?(H[Y++]=le>>12|224,H[Y++]=le>>6&63|128,H[Y++]=63&le|128):(H[Y++]=le>>18|240,H[Y++]=le>>12&63|128,H[Y++]=le>>6&63|128,H[Y++]=63&le|128)}return H},en=function(z){let H=0;for(let Y=0;Y<z.length;Y++){const De=z.charCodeAt(Y);De<128?H++:De<2048?H+=2:De>=55296&&De<=56319?(H+=4,Y++):H+=3}return H};function Kt(z,H=1e3,Y=2){const De=H*Math.pow(Y,z),le=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+le)}function qr(z){return z&&z._delegate?z._delegate:z}},3320:We=>{const ve=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],N={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function U({bgColor:O="#FFFFFF",fgDarkColor:ue="#000000",fgLightColor:ee="#FFFFFF",defaultColor:J="#000000",threshold:oe=128,customNamedColors:te={}}={}){this.namedColors=ec(ec({},N),te);const[X,V,$,G]=[O,ue,ee,J].map(de=>this.namedColors[de]);let ge=String(X||O).toUpperCase().split("").filter(de=>ve.includes(de));switch(ge.length){case 3:case 4:ge=ge.slice(0,3).map(de=>`${de}${de}`);break;case 6:case 8:ge=ge.slice(0,6).reduce((de,Ce,Ne,Ye)=>Ne%2?[...de,`${Ye[Ne-1]}${Ce}`]:de,[]);break;default:return G||J}const[Re,xe,be]=ge.map(de=>parseInt(de,16));return(299*Re+587*xe+114*be)/1e3>=oe?V||ue:$||ee}We.exports=class{constructor({bgColor:ue="#FFFFFF",fgDarkColor:ee="#000000",fgLightColor:J="#FFFFFF",defaultColor:oe="#000000",threshold:te=128,customNamedColors:X={}}={}){const V={bgColor:ue,fgDarkColor:ee,fgLightColor:J,defaultColor:oe,threshold:te,customNamedColors:X};this.namedColors=ec(ec({},N),X),this.contrastColor=($={})=>U(xN(ec(ec({},V),$),{customNamedColors:ec(ec({},V.customNamedColors),$.customNamedColors)}))}},We.exports.contrastColor=U},2329:(We,ve,N)=>{"use strict";N.d(ve,{Mq:()=>h.getApp,C6:()=>h.getApps,KN:()=>h.registerVersion});var h=N(8026);(0,h.registerVersion)("firebase","9.6.4","app")},7841:(We,ve,N)=>{"use strict";N.d(ve,{Z:()=>h.Z});var h=N(3394);h.Z.registerVersion("firebase","9.6.4","app-compat")},4828:(We,ve,N)=>{"use strict";N.r(ve);var h=N(8239),U=N(3394),O=N(538),ue=N(3854),oe=(N(8026),N(5422),N(3910));function te(){return window}function $(){return($=(0,h.Z)(function*(fe,Q,K){var we;const{BuildInfo:je}=te();(0,O.ap)(Q.sessionId,"AuthEvent did not contain a session ID");const gt=yield ae(Q.sessionId),mt={};return(0,O.aq)()?mt.ibi=je.packageName:(0,O.ar)()?mt.apn=je.packageName:(0,O.as)(fe,"operation-not-supported-in-this-environment"),je.displayName&&(mt.appDisplayName=je.displayName),mt.sessionId=gt,(0,O.at)(fe,K,Q.type,void 0,null!==(we=Q.eventId)&&void 0!==we?we:void 0,mt)})).apply(this,arguments)}function ge(){return(ge=(0,h.Z)(function*(fe){const{BuildInfo:Q}=te(),K={};(0,O.aq)()?K.iosBundleId=Q.packageName:(0,O.ar)()?K.androidPackageName=Q.packageName:(0,O.as)(fe,"operation-not-supported-in-this-environment"),yield(0,O.au)(fe,K)})).apply(this,arguments)}function be(){return(be=(0,h.Z)(function*(fe,Q,K){const{cordova:we}=te();let je=()=>{};try{yield new Promise((gt,mt)=>{let Zt=null;function zt(){var ut;gt();const gr=null===(ut=we.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof gr&&gr(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function pn(){Zt||(Zt=window.setTimeout(()=>{mt((0,O.av)(fe,"redirect-cancelled-by-user"))},2e3))}function En(){"visible"===(null==document?void 0:document.visibilityState)&&pn()}Q.addPassiveListener(zt),document.addEventListener("resume",pn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",En,!1),je=()=>{Q.removePassiveListener(zt),document.removeEventListener("resume",pn,!1),document.removeEventListener("visibilitychange",En,!1),Zt&&window.clearTimeout(Zt)}})}finally{je()}})).apply(this,arguments)}function ae(fe){return de.apply(this,arguments)}function de(){return(de=(0,h.Z)(function*(fe){const Q=Ce(fe),K=yield crypto.subtle.digest("SHA-256",Q);return Array.from(new Uint8Array(K)).map(je=>je.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ce(fe){if((0,O.ap)(/[0-9a-zA-Z]+/.test(fe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(fe);const Q=new ArrayBuffer(fe.length),K=new Uint8Array(Q);for(let we=0;we<fe.length;we++)K[we]=fe.charCodeAt(we);return K}class Ye extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Q=>{this.resolveInialized=Q})}addPassiveListener(Q){this.passiveListeners.add(Q)}removePassiveListener(Q){this.passiveListeners.delete(Q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Q){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(Q)),super.onEvent(Q)}initialized(){var Q=this;return(0,h.Z)(function*(){yield Q.initPromise})()}}function ft(fe){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(fe){const Q=yield Mt()._get(st(fe));return Q&&(yield Mt()._remove(st(fe))),Q})).apply(this,arguments)}function lt(){const fe=[],Q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const we=Math.floor(Math.random()*Q.length);fe.push(Q.charAt(we))}return fe.join("")}function Mt(){return(0,O.ax)(O.b)}function st(fe){return(0,O.ay)("authEvent",fe.config.apiKey,fe.name)}function Br(fe){if(!(null==fe?void 0:fe.includes("?")))return{};const[Q,...K]=fe.split("?");return(0,ue.zd)(K.join("?"))}function Wt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function an(){var fe;return(null===(fe=null==self?void 0:self.location)||void 0===fe?void 0:fe.protocol)||null}function ct(fe=(0,ue.z$)()){return!("file:"!==an()&&"ionic:"!==an()||!fe.toLowerCase().match(/iphone|ipad|ipod|android/))}function rr(){try{const fe=self.localStorage,Q=O.aG();if(fe)return fe.setItem(Q,"1"),fe.removeItem(Q),!function(fe=(0,ue.z$)()){return(0,ue.w1)()&&11===(null==document?void 0:document.documentMode)||function(fe=(0,ue.z$)()){return/Edge\/\d+/.test(fe)}(fe)}()||(0,ue.hl)()}catch(fe){return Oe()&&(0,ue.hl)()}return!1}function Oe(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function hn(){return("http:"===an()||"https:"===an()||(0,ue.ru)()||ct())&&!((0,ue.b$)()||(0,ue.UG)())&&rr()&&!Oe()}function mn(){return ct()&&"undefined"!=typeof document}function $e(){return($e=(0,h.Z)(function*(){return!!mn()&&new Promise(fe=>{const Q=setTimeout(()=>{fe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Q),fe(!0)})})})).apply(this,arguments)}const Tt={LOCAL:"local",NONE:"none",SESSION:"session"},Xn=O.aw,wn="persistence";function rt(fe){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,h.Z)(function*(fe){yield fe._initializationPromise;const Q=An(),K=O.ay(wn,fe.config.apiKey,fe.name);(null==Q?void 0:Q.sessionStorage)&&Q.sessionStorage.setItem(K,fe._getPersistence())})).apply(this,arguments)}function An(){return"undefined"!=typeof window?window:null}const en=O.aw;class Le{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(Q){var K=this;return(0,h.Z)(function*(){const we=Q._key();let je=K.eventManagers.get(we);return je||(je=new Ye(Q),K.eventManagers.set(we,je),K.attachCallbackListeners(Q,je)),je})()}_openPopup(Q){(0,O.as)(Q,"operation-not-supported-in-this-environment")}_openRedirect(Q,K,we,je){var gt=this;return(0,h.Z)(function*(){!function(fe){var Q,K,we,je,gt,mt,Zt,zt,pn,En;const ut=te();(0,O.aw)("function"==typeof(null===(Q=null==ut?void 0:ut.universalLinks)||void 0===Q?void 0:Q.subscribe),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(K=null==ut?void 0:ut.BuildInfo)||void 0===K?void 0:K.packageName),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(gt=null===(je=null===(we=null==ut?void 0:ut.cordova)||void 0===we?void 0:we.plugins)||void 0===je?void 0:je.browsertab)||void 0===gt?void 0:gt.openUrl),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(zt=null===(Zt=null===(mt=null==ut?void 0:ut.cordova)||void 0===mt?void 0:mt.plugins)||void 0===Zt?void 0:Zt.browsertab)||void 0===zt?void 0:zt.isAvailable),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(En=null===(pn=null==ut?void 0:ut.cordova)||void 0===pn?void 0:pn.InAppBrowser)||void 0===En?void 0:En.open),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Q);const mt=yield gt._initialize(Q);yield mt.initialized(),mt.resetRedirect(),(0,O.aB)(),yield gt._originValidation(Q);const Zt=function(fe,Q,K=null){return{type:Q,eventId:K,urlResponse:null,sessionId:lt(),postBody:null,tenantId:fe.tenantId,error:(0,O.av)(fe,"no-auth-event")}}(Q,we,je);yield function(fe,Q){return Mt()._set(st(fe),Q)}(Q,Zt);const zt=yield function(fe,Q,K){return $.apply(this,arguments)}(Q,Zt,K),pn=yield function(fe){const{cordova:Q}=te();return new Promise(K=>{Q.plugins.browsertab.isAvailable(we=>{let je=null;we?Q.plugins.browsertab.openUrl(fe):je=Q.InAppBrowser.open(fe,(0,O.ao)()?"_blank":"_system","location=yes"),K(je)})})}(zt);return function(fe,Q,K){return be.apply(this,arguments)}(Q,mt,pn)})()}_isIframeWebStorageSupported(Q,K){throw new Error("Method not implemented.")}_originValidation(Q){const K=Q._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function(fe){return ge.apply(this,arguments)}(Q)),this.originValidationPromises[K]}attachCallbackListeners(Q,K){const{universalLinks:we,handleOpenURL:je,BuildInfo:gt}=te(),mt=setTimeout((0,h.Z)(function*(){yield ft(Q),K.onEvent(Wt())}),500),Zt=function(){var En=(0,h.Z)(function*(ut){clearTimeout(mt);const gr=yield ft(Q);let Vn=null;gr&&(null==ut?void 0:ut.url)&&(Vn=function(fe,Q){var K,we;const je=function(fe){const Q=Br(fe),K=Q.link?decodeURIComponent(Q.link):void 0,we=Br(K).link,je=Q.deep_link_id?decodeURIComponent(Q.deep_link_id):void 0;return Br(je).link||je||we||K||fe}(Q);if(je.includes("/__/auth/callback")){const gt=Br(je),mt=gt.firebaseError?function(fe){try{return JSON.parse(fe)}catch(Q){return null}}(decodeURIComponent(gt.firebaseError)):null,Zt=null===(we=null===(K=null==mt?void 0:mt.code)||void 0===K?void 0:K.split("auth/"))||void 0===we?void 0:we[1],zt=Zt?(0,O.av)(Zt):null;return zt?{type:fe.type,eventId:fe.eventId,tenantId:fe.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:fe.type,eventId:fe.eventId,tenantId:fe.tenantId,sessionId:fe.sessionId,urlResponse:je,postBody:null}}return null}(gr,ut.url)),K.onEvent(Vn||Wt())});return function(gr){return En.apply(this,arguments)}}();void 0!==we&&"function"==typeof we.subscribe&&we.subscribe(null,Zt);const zt=je,pn=`${gt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var En=(0,h.Z)(function*(ut){if(ut.toLowerCase().startsWith(pn)&&Zt({url:ut}),"function"==typeof zt)try{zt(ut)}catch(gr){console.error(gr)}});return function(ut){return En.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(Q){var K=this;return(0,h.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(Q)})()}_openPopup(Q,K,we,je){var gt=this;return(0,h.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openPopup(Q,K,we,je)})()}_openRedirect(Q,K,we,je){var gt=this;return(0,h.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openRedirect(Q,K,we,je)})()}_isIframeWebStorageSupported(Q,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Q,K)}_originValidation(Q){return this.assertedUnderlyingResolver._originValidation(Q)}get _shouldInitProactively(){return mn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return en(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Q=this;return(0,h.Z)(function*(){if(Q.underlyingResolver)return;const K=yield function(){return $e.apply(this,arguments)}();Q.underlyingResolver=K?Q.cordovaResolver:Q.browserResolver})()}}function Je(fe){return fe.unwrap()}function fn(fe){return Gt(fe)}function Gt(fe){const{_tokenResponse:Q}=fe instanceof ue.ZR?fe.customData:fe;if(!Q)return null;if(!(fe instanceof ue.ZR)&&"temporaryProof"in Q&&"phoneNumber"in Q)return O.P.credentialFromResult(fe);const K=Q.providerId;if(!K||K===O.o.PASSWORD)return null;let we;switch(K){case O.o.GOOGLE:we=O.N;break;case O.o.FACEBOOK:we=O.M;break;case O.o.GITHUB:we=O.Q;break;case O.o.TWITTER:we=O.V;break;default:const{oauthIdToken:je,oauthAccessToken:gt,oauthTokenSecret:mt,pendingToken:Zt,nonce:zt}=Q;return gt||mt||je||Zt?Zt?K.startsWith("saml.")?O.aJ._create(K,Zt):O.I._fromParams({providerId:K,signInMethod:K,pendingToken:Zt,idToken:je,accessToken:gt}):new O.T(K).credential({idToken:je,accessToken:gt,rawNonce:zt}):null}return fe instanceof ue.ZR?we.credentialFromError(fe):we.credentialFromResult(fe)}function ln(fe,Q){return Q.catch(K=>{throw K instanceof ue.ZR&&function(fe,Q){var K;const we=null===(K=Q.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===Q.code)Q.resolver=new H(fe,O.am(fe,Q));else if(we){const je=Gt(Q),gt=Q;je&&(gt.credential=je,gt.tenantId=we.tenantId||void 0,gt.email=we.email||void 0,gt.phoneNumber=we.phoneNumber||void 0)}}(fe,K),K}).then(K=>{const je=K.user;return{operationType:K.operationType,credential:fn(K),additionalUserInfo:O.ak(K),user:Y.getOrCreate(je)}})}function qr(fe,Q){return z.apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(fe,Q){const K=yield Q;return{verificationId:K.verificationId,confirm:we=>ln(fe,K.confirm(we))}})).apply(this,arguments)}class H{constructor(Q,K){this.resolver=K,this.auth=Q.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Q){return ln(Je(this.auth),this.resolver.resolveSignIn(Q))}}class Y{constructor(Q){this._delegate=Q,this.multiFactor=O.an(Q)}static getOrCreate(Q){return Y.USER_MAP.has(Q)||Y.USER_MAP.set(Q,new Y(Q)),Y.USER_MAP.get(Q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Q){return this._delegate.getIdTokenResult(Q)}getIdToken(Q){return this._delegate.getIdToken(Q)}linkAndRetrieveDataWithCredential(Q){return this.linkWithCredential(Q)}linkWithCredential(Q){var K=this;return(0,h.Z)(function*(){return ln(K.auth,O.Y(K._delegate,Q))})()}linkWithPhoneNumber(Q,K){var we=this;return(0,h.Z)(function*(){return qr(we.auth,O.l(we._delegate,Q,K))})()}linkWithPopup(Q){var K=this;return(0,h.Z)(function*(){return ln(K.auth,O.d(K._delegate,Q,Le))})()}linkWithRedirect(Q){var K=this;return(0,h.Z)(function*(){return yield rt(O.aC(K.auth)),O.g(K._delegate,Q,Le)})()}reauthenticateAndRetrieveDataWithCredential(Q){return this.reauthenticateWithCredential(Q)}reauthenticateWithCredential(Q){var K=this;return(0,h.Z)(function*(){return ln(K.auth,O.Z(K._delegate,Q))})()}reauthenticateWithPhoneNumber(Q,K){return qr(this.auth,O.r(this._delegate,Q,K))}reauthenticateWithPopup(Q){return ln(this.auth,O.e(this._delegate,Q,Le))}reauthenticateWithRedirect(Q){var K=this;return(0,h.Z)(function*(){return yield rt(O.aC(K.auth)),O.h(K._delegate,Q,Le)})()}sendEmailVerification(Q){return O.aa(this._delegate,Q)}unlink(Q){var K=this;return(0,h.Z)(function*(){return yield O.aj(K._delegate,Q),K})()}updateEmail(Q){return O.af(this._delegate,Q)}updatePassword(Q){return O.ag(this._delegate,Q)}updatePhoneNumber(Q){return O.u(this._delegate,Q)}updateProfile(Q){return O.ae(this._delegate,Q)}verifyBeforeUpdateEmail(Q,K){return O.ab(this._delegate,Q,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Y.USER_MAP=new WeakMap;const De=O.aw;let le=(()=>{class fe{constructor(K,we){if(this.app=K,we.isInitialized())return this._delegate=we.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:je}=K.options;De(je,"invalid-api-key",{appName:K.name}),De(je,"invalid-api-key",{appName:K.name});const gt="undefined"!=typeof window?Le:void 0;this._delegate=we.initialize({options:{persistence:ot(je,K.name),popupRedirectResolver:gt}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Y.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,we){O.E(this._delegate,K,we)}applyActionCode(K){return O.a1(this._delegate,K)}checkActionCode(K){return O.a2(this._delegate,K)}confirmPasswordReset(K,we){return O.a0(this._delegate,K,we)}createUserWithEmailAndPassword(K,we){var je=this;return(0,h.Z)(function*(){return ln(je._delegate,O.a4(je._delegate,K,we))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return O.a9(this._delegate,K)}isSignInWithEmailLink(K){return O.a7(this._delegate,K)}getRedirectResult(){var K=this;return(0,h.Z)(function*(){De(hn(),K._delegate,"operation-not-supported-in-this-environment");const we=yield O.j(K._delegate,Le);return we?ln(K._delegate,Promise.resolve(we)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function(fe,Q){(0,O.aC)(fe)._logFramework(Q)}(this._delegate,K)}onAuthStateChanged(K,we,je){const{next:gt,error:mt,complete:Zt}=qe(K,we,je);return this._delegate.onAuthStateChanged(gt,mt,Zt)}onIdTokenChanged(K,we,je){const{next:gt,error:mt,complete:Zt}=qe(K,we,je);return this._delegate.onIdTokenChanged(gt,mt,Zt)}sendSignInLinkToEmail(K,we){return O.a6(this._delegate,K,we)}sendPasswordResetEmail(K,we){return O.$(this._delegate,K,we||void 0)}setPersistence(K){var we=this;return(0,h.Z)(function*(){let je;switch(function(fe,Q){Xn(Object.values(Tt).includes(Q),fe,"invalid-persistence-type"),(0,ue.b$)()?Xn(Q!==Tt.SESSION,fe,"unsupported-persistence-type"):(0,ue.UG)()?Xn(Q===Tt.NONE,fe,"unsupported-persistence-type"):Oe()?Xn(Q===Tt.NONE||Q===Tt.LOCAL&&(0,ue.hl)(),fe,"unsupported-persistence-type"):Xn(Q===Tt.NONE||rr(),fe,"unsupported-persistence-type")}(we._delegate,K),K){case Tt.SESSION:je=O.a;break;case Tt.LOCAL:je=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case Tt.NONE:je=O.K;break;default:return O.as("argument-error",{appName:we._delegate.name})}return we._delegate.setPersistence(je)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return ln(this._delegate,O.W(this._delegate))}signInWithCredential(K){return ln(this._delegate,O.X(this._delegate,K))}signInWithCustomToken(K){return ln(this._delegate,O._(this._delegate,K))}signInWithEmailAndPassword(K,we){return ln(this._delegate,O.a5(this._delegate,K,we))}signInWithEmailLink(K,we){return ln(this._delegate,O.a8(this._delegate,K,we))}signInWithPhoneNumber(K,we){return qr(this._delegate,O.s(this._delegate,K,we))}signInWithPopup(K){var we=this;return(0,h.Z)(function*(){return De(hn(),we._delegate,"operation-not-supported-in-this-environment"),ln(we._delegate,O.c(we._delegate,K,Le))})()}signInWithRedirect(K){var we=this;return(0,h.Z)(function*(){return De(hn(),we._delegate,"operation-not-supported-in-this-environment"),yield rt(we._delegate),O.f(we._delegate,K,Le)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return O.a3(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return fe.Persistence=Tt,fe})();function qe(fe,Q,K){let we=fe;"function"!=typeof fe&&({next:we,error:Q,complete:K}=fe);const je=we;return{next:mt=>je(mt&&Y.getOrCreate(mt)),error:Q,complete:K}}function ot(fe,Q){const K=function(fe,Q){const K=An();if(!(null==K?void 0:K.sessionStorage))return[];const we=O.ay(wn,fe,Q);switch(K.sessionStorage.getItem(we)){case Tt.NONE:return[O.K];case Tt.LOCAL:return[O.i,O.a];case Tt.SESSION:return[O.a];default:return[]}}(fe,Q);if("undefined"!=typeof self&&!K.includes(O.i)&&K.push(O.i),"undefined"!=typeof window)for(const we of[O.b,O.a])K.includes(we)||K.push(we);return K.includes(O.K)||K.push(O.K),K}class Ft{constructor(){this.providerId="phone",this._delegate=new O.P(Je(U.Z.auth()))}static credential(Q,K){return O.P.credential(Q,K)}verifyPhoneNumber(Q,K){return this._delegate.verifyPhoneNumber(Q,K)}unwrap(){return this._delegate}}Ft.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ft.PROVIDER_ID=O.P.PROVIDER_ID;const _n=O.aw;var fe;(fe=U.Z).INTERNAL.registerComponent(new oe.wA("auth-compat",Q=>{const K=Q.getProvider("app-compat").getImmediate(),we=Q.getProvider("auth");return new le(K,we)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:Ft,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(Q,K,we=U.Z.app()){var je;_n(null===(je=we.options)||void 0===je?void 0:je.apiKey,"invalid-api-key",{appName:we.name}),this._delegate=new O.R(Q,K,we.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.V,Auth:le,AuthCredential:O.G,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),fe.registerVersion("@firebase/auth-compat","0.2.6")},1524:(We,ve,N)=>{var h;!function(U,O,ue,ee){"use strict";var be,J=["","webkit","Moz","MS","ms","o"],oe=O.createElement("div"),X=Math.round,V=Math.abs,$=Date.now;function G(R,L,q){return setTimeout(Ce(R,q),L)}function ge(R,L,q){return!!Array.isArray(R)&&(Re(R,q[L],q),!0)}function Re(R,L,q){var me;if(R)if(R.forEach)R.forEach(L,q);else if(R.length!==ee)for(me=0;me<R.length;)L.call(q,R[me],me,R),me++;else for(me in R)R.hasOwnProperty(me)&&L.call(q,R[me],me,R)}function xe(R,L,q){var me="DEPRECATED METHOD: "+L+"\n"+q+" AT \n";return function(){var ke=new Error("get-stack-trace"),Ke=ke&&ke.stack?ke.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Bt=U.console&&(U.console.warn||U.console.log);return Bt&&Bt.call(U.console,me,Ke),R.apply(this,arguments)}}be="function"!=typeof Object.assign?function(L){if(L===ee||null===L)throw new TypeError("Cannot convert undefined or null to object");for(var q=Object(L),me=1;me<arguments.length;me++){var ke=arguments[me];if(ke!==ee&&null!==ke)for(var Ke in ke)ke.hasOwnProperty(Ke)&&(q[Ke]=ke[Ke])}return q}:Object.assign;var Ee=xe(function(L,q,me){for(var ke=Object.keys(q),Ke=0;Ke<ke.length;)(!me||me&&L[ke[Ke]]===ee)&&(L[ke[Ke]]=q[ke[Ke]]),Ke++;return L},"extend","Use `assign`."),ae=xe(function(L,q){return Ee(L,q,!0)},"merge","Use `assign`.");function de(R,L,q){var ke,me=L.prototype;(ke=R.prototype=Object.create(me)).constructor=R,ke._super=me,q&&be(ke,q)}function Ce(R,L){return function(){return R.apply(L,arguments)}}function Ne(R,L){return"function"==typeof R?R.apply(L&&L[0]||ee,L):R}function Ye(R,L){return R===ee?L:R}function vt(R,L,q){Re(bt(L),function(me){R.addEventListener(me,q,!1)})}function St(R,L,q){Re(bt(L),function(me){R.removeEventListener(me,q,!1)})}function ft(R,L){for(;R;){if(R==L)return!0;R=R.parentNode}return!1}function Qt(R,L){return R.indexOf(L)>-1}function bt(R){return R.trim().split(/\s+/g)}function lt(R,L,q){if(R.indexOf&&!q)return R.indexOf(L);for(var me=0;me<R.length;){if(q&&R[me][q]==L||!q&&R[me]===L)return me;me++}return-1}function Mt(R){return Array.prototype.slice.call(R,0)}function st(R,L,q){for(var me=[],ke=[],Ke=0;Ke<R.length;){var Bt=L?R[Ke][L]:R[Ke];lt(ke,Bt)<0&&me.push(R[Ke]),ke[Ke]=Bt,Ke++}return q&&(me=L?me.sort(function(ur,Er){return ur[L]>Er[L]}):me.sort()),me}function wt(R,L){for(var q,me,ke=L[0].toUpperCase()+L.slice(1),Ke=0;Ke<J.length;){if((me=(q=J[Ke])?q+ke:L)in R)return me;Ke++}return ee}var tt=1;function Gi(R){var L=R.ownerDocument||R;return L.defaultView||L.parentWindow||U}var Or="ontouchstart"in U,Wt=wt(U,"PointerEvent")!==ee,Ut=Or&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),si="touch",fr="mouse",Xn=["x","y"],wn=["clientX","clientY"];function Qe(R,L){var q=this;this.manager=R,this.callback=L,this.element=R.element,this.target=R.options.inputTarget,this.domHandler=function(me){Ne(R.options.enable,[R])&&q.handler(me)},this.init()}function Rt(R,L,q){var me=q.pointers.length,ke=q.changedPointers.length,Ke=1&L&&me-ke==0,Bt=12&L&&me-ke==0;q.isFirst=!!Ke,q.isFinal=!!Bt,Ke&&(R.session={}),q.eventType=L,function(R,L){var q=R.session,me=L.pointers,ke=me.length;q.firstInput||(q.firstInput=Le(L)),ke>1&&!q.firstMultiple?q.firstMultiple=Le(L):1===ke&&(q.firstMultiple=!1);var Ke=q.firstInput,Bt=q.firstMultiple,ir=Bt?Bt.center:Ke.center,ur=L.center=Je(me);L.timeStamp=$(),L.deltaTime=L.timeStamp-Ke.timeStamp,L.angle=Gt(ir,ur),L.distance=Kt(ir,ur),function(R,L){var q=L.center,me=R.offsetDelta||{},ke=R.prevDelta||{},Ke=R.prevInput||{};(1===L.eventType||4===Ke.eventType)&&(ke=R.prevDelta={x:Ke.deltaX||0,y:Ke.deltaY||0},me=R.offsetDelta={x:q.x,y:q.y}),L.deltaX=ke.x+(q.x-me.x),L.deltaY=ke.y+(q.y-me.y)}(q,L),L.offsetDirection=fn(L.deltaX,L.deltaY);var Er=pr(L.deltaTime,L.deltaX,L.deltaY);L.overallVelocityX=Er.x,L.overallVelocityY=Er.y,L.overallVelocity=V(Er.x)>V(Er.y)?Er.x:Er.y,L.scale=Bt?function(R,L){return Kt(L[0],L[1],wn)/Kt(R[0],R[1],wn)}(Bt.pointers,me):1,L.rotation=Bt?function(R,L){return Gt(L[1],L[0],wn)+Gt(R[1],R[0],wn)}(Bt.pointers,me):0,L.maxPointers=q.prevInput?L.pointers.length>q.prevInput.maxPointers?L.pointers.length:q.prevInput.maxPointers:L.pointers.length,function(R,L){var ke,Ke,Bt,ir,q=R.lastInterval||L,me=L.timeStamp-q.timeStamp;if(8!=L.eventType&&(me>25||q.velocity===ee)){var ur=L.deltaX-q.deltaX,Er=L.deltaY-q.deltaY,Ei=pr(me,ur,Er);Ke=Ei.x,Bt=Ei.y,ke=V(Ei.x)>V(Ei.y)?Ei.x:Ei.y,ir=fn(ur,Er),R.lastInterval=L}else ke=q.velocity,Ke=q.velocityX,Bt=q.velocityY,ir=q.direction;L.velocity=ke,L.velocityX=Ke,L.velocityY=Bt,L.direction=ir}(q,L);var Ei=R.element;ft(L.srcEvent.target,Ei)&&(Ei=L.srcEvent.target),L.target=Ei}(R,q),R.emit("hammer.input",q),R.recognize(q),R.session.prevInput=q}function Le(R){for(var L=[],q=0;q<R.pointers.length;)L[q]={clientX:X(R.pointers[q].clientX),clientY:X(R.pointers[q].clientY)},q++;return{timeStamp:$(),pointers:L,center:Je(L),deltaX:R.deltaX,deltaY:R.deltaY}}function Je(R){var L=R.length;if(1===L)return{x:X(R[0].clientX),y:X(R[0].clientY)};for(var q=0,me=0,ke=0;ke<L;)q+=R[ke].clientX,me+=R[ke].clientY,ke++;return{x:X(q/L),y:X(me/L)}}function pr(R,L,q){return{x:L/R||0,y:q/R||0}}function fn(R,L){return R===L?1:V(R)>=V(L)?R<0?2:4:L<0?8:16}function Kt(R,L,q){q||(q=Xn);var me=L[q[0]]-R[q[0]],ke=L[q[1]]-R[q[1]];return Math.sqrt(me*me+ke*ke)}function Gt(R,L,q){return q||(q=Xn),180*Math.atan2(L[q[1]]-R[q[1]],L[q[0]]-R[q[0]])/Math.PI}Qe.prototype={handler:function(){},init:function(){this.evEl&&vt(this.element,this.evEl,this.domHandler),this.evTarget&&vt(this.target,this.evTarget,this.domHandler),this.evWin&&vt(Gi(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&St(this.element,this.evEl,this.domHandler),this.evTarget&&St(this.target,this.evTarget,this.domHandler),this.evWin&&St(Gi(this.element),this.evWin,this.domHandler)}};var z={mousedown:1,mousemove:2,mouseup:4},H="mousedown",Y="mousemove mouseup";function De(){this.evEl=H,this.evWin=Y,this.pressed=!1,Qe.apply(this,arguments)}de(De,Qe,{handler:function(L){var q=z[L.type];1&q&&0===L.button&&(this.pressed=!0),2&q&&1!==L.which&&(q=4),this.pressed&&(4&q&&(this.pressed=!1),this.callback(this.manager,q,{pointers:[L],changedPointers:[L],pointerType:fr,srcEvent:L}))}});var le={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},qe={2:si,3:"pen",4:fr,5:"kinect"},ot="pointerdown",Ft="pointermove pointerup pointercancel";function _n(){this.evEl=ot,this.evWin=Ft,Qe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}U.MSPointerEvent&&!U.PointerEvent&&(ot="MSPointerDown",Ft="MSPointerMove MSPointerUp MSPointerCancel"),de(_n,Qe,{handler:function(L){var q=this.store,me=!1,ke=L.type.toLowerCase().replace("ms",""),Ke=le[ke],Bt=qe[L.pointerType]||L.pointerType,ir=Bt==si,ur=lt(q,L.pointerId,"pointerId");1&Ke&&(0===L.button||ir)?ur<0&&(q.push(L),ur=q.length-1):12&Ke&&(me=!0),!(ur<0)&&(q[ur]=L,this.callback(this.manager,Ke,{pointers:q,changedPointers:[L],pointerType:Bt,srcEvent:L}),me&&q.splice(ur,1))}});var Fn={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ln="touchstart",Ot="touchstart touchmove touchend touchcancel";function fe(){this.evTarget=Ln,this.evWin=Ot,this.started=!1,Qe.apply(this,arguments)}function Q(R,L){var q=Mt(R.touches),me=Mt(R.changedTouches);return 12&L&&(q=st(q.concat(me),"identifier",!0)),[q,me]}de(fe,Qe,{handler:function(L){var q=Fn[L.type];if(1===q&&(this.started=!0),this.started){var me=Q.call(this,L,q);12&q&&me[0].length-me[1].length==0&&(this.started=!1),this.callback(this.manager,q,{pointers:me[0],changedPointers:me[1],pointerType:si,srcEvent:L})}}});var K={touchstart:1,touchmove:2,touchend:4,touchcancel:8},we="touchstart touchmove touchend touchcancel";function je(){this.evTarget=we,this.targetIds={},Qe.apply(this,arguments)}function gt(R,L){var q=Mt(R.touches),me=this.targetIds;if(3&L&&1===q.length)return me[q[0].identifier]=!0,[q,q];var ke,Ke,Bt=Mt(R.changedTouches),ir=[],ur=this.target;if(Ke=q.filter(function(Er){return ft(Er.target,ur)}),1===L)for(ke=0;ke<Ke.length;)me[Ke[ke].identifier]=!0,ke++;for(ke=0;ke<Bt.length;)me[Bt[ke].identifier]&&ir.push(Bt[ke]),12&L&&delete me[Bt[ke].identifier],ke++;return ir.length?[st(Ke.concat(ir),"identifier",!0),ir]:void 0}function zt(){Qe.apply(this,arguments);var R=Ce(this.handler,this);this.touch=new je(this.manager,R),this.mouse=new De(this.manager,R),this.primaryTouch=null,this.lastTouches=[]}function pn(R,L){1&R?(this.primaryTouch=L.changedPointers[0].identifier,En.call(this,L)):12&R&&En.call(this,L)}function En(R){var L=R.changedPointers[0];if(L.identifier===this.primaryTouch){var q={x:L.clientX,y:L.clientY};this.lastTouches.push(q);var me=this.lastTouches;setTimeout(function(){var Ke=me.indexOf(q);Ke>-1&&me.splice(Ke,1)},2500)}}function ut(R){for(var L=R.srcEvent.clientX,q=R.srcEvent.clientY,me=0;me<this.lastTouches.length;me++){var ke=this.lastTouches[me],Ke=Math.abs(L-ke.x),Bt=Math.abs(q-ke.y);if(Ke<=25&&Bt<=25)return!0}return!1}de(je,Qe,{handler:function(L){var q=K[L.type],me=gt.call(this,L,q);!me||this.callback(this.manager,q,{pointers:me[0],changedPointers:me[1],pointerType:si,srcEvent:L})}}),de(zt,Qe,{handler:function(L,q,me){var Ke=me.pointerType==fr;if(!(Ke&&me.sourceCapabilities&&me.sourceCapabilities.firesTouchEvents)){if(me.pointerType==si)pn.call(this,q,me);else if(Ke&&ut.call(this,me))return;this.callback(L,q,me)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var gr=wt(oe.style,"touchAction"),Vn=gr!==ee,He="compute",nn="manipulation",$n="none",mr="pan-x",ne="pan-y",_e=function(){if(!Vn)return!1;var R={},L=U.CSS&&U.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(q){R[q]=!L||U.CSS.supports("touch-action",q)}),R}();function Ae(R,L){this.manager=R,this.set(L)}function yr(R){this.options=be({},this.defaults,R||{}),this.id=tt++,this.manager=null,this.options.enable=Ye(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function $r(R){return 16&R?"cancel":8&R?"end":4&R?"move":2&R?"start":""}function rn(R){return 16==R?"down":8==R?"up":2==R?"left":4==R?"right":""}function Fi(R,L){var q=L.manager;return q?q.get(R):R}function Kr(){yr.apply(this,arguments)}function xr(){Kr.apply(this,arguments),this.pX=null,this.pY=null}function Gs(){Kr.apply(this,arguments)}function oi(){yr.apply(this,arguments),this._timer=null,this._input=null}function zi(){Kr.apply(this,arguments)}function kr(){Kr.apply(this,arguments)}function tr(){yr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Mn(R,L){return(L=L||{}).recognizers=Ye(L.recognizers,Mn.defaults.preset),new Ts(R,L)}function Ts(R,L){this.options=be({},Mn.defaults,L||{}),this.options.inputTarget=this.options.inputTarget||R,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=R,this.input=function(R){return new(R.options.inputClass||(Wt?_n:Ut?je:Or?zt:De))(R,Rt)}(this),this.touchAction=new Ae(this,this.options.touchAction),zs(this,!0),Re(this.options.recognizers,function(q){var me=this.add(new q[0](q[1]));q[2]&&me.recognizeWith(q[2]),q[3]&&me.requireFailure(q[3])},this)}function zs(R,L){var me,q=R.element;q.style&&(Re(R.options.cssProps,function(ke,Ke){me=wt(q.style,Ke),L?(R.oldCssProps[me]=q.style[me],q.style[me]=ke):q.style[me]=R.oldCssProps[me]||""}),L||(R.oldCssProps={}))}Ae.prototype={set:function(R){R==He&&(R=this.compute()),Vn&&this.manager.element.style&&_e[R]&&(this.manager.element.style[gr]=R),this.actions=R.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var R=[];return Re(this.manager.recognizers,function(L){Ne(L.options.enable,[L])&&(R=R.concat(L.getTouchAction()))}),function(R){if(Qt(R,$n))return $n;var L=Qt(R,mr),q=Qt(R,ne);return L&&q?$n:L||q?L?mr:ne:Qt(R,nn)?nn:"auto"}(R.join(" "))},preventDefaults:function(R){var L=R.srcEvent,q=R.offsetDirection;if(!this.manager.session.prevented){var me=this.actions,ke=Qt(me,$n)&&!_e[$n],Ke=Qt(me,ne)&&!_e[ne],Bt=Qt(me,mr)&&!_e[mr];if(ke&&1===R.pointers.length&&R.distance<2&&R.deltaTime<250)return;return Bt&&Ke||!(ke||Ke&&6&q||Bt&&24&q)?void 0:this.preventSrc(L)}L.preventDefault()},preventSrc:function(R){this.manager.session.prevented=!0,R.preventDefault()}},yr.prototype={defaults:{},set:function(R){return be(this.options,R),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(R){if(ge(R,"recognizeWith",this))return this;var L=this.simultaneous;return L[(R=Fi(R,this)).id]||(L[R.id]=R,R.recognizeWith(this)),this},dropRecognizeWith:function(R){return ge(R,"dropRecognizeWith",this)||(R=Fi(R,this),delete this.simultaneous[R.id]),this},requireFailure:function(R){if(ge(R,"requireFailure",this))return this;var L=this.requireFail;return-1===lt(L,R=Fi(R,this))&&(L.push(R),R.requireFailure(this)),this},dropRequireFailure:function(R){if(ge(R,"dropRequireFailure",this))return this;R=Fi(R,this);var L=lt(this.requireFail,R);return L>-1&&this.requireFail.splice(L,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(R){return!!this.simultaneous[R.id]},emit:function(R){var L=this,q=this.state;function me(ke){L.manager.emit(ke,R)}q<8&&me(L.options.event+$r(q)),me(L.options.event),R.additionalEvent&&me(R.additionalEvent),q>=8&&me(L.options.event+$r(q))},tryEmit:function(R){if(this.canEmit())return this.emit(R);this.state=32},canEmit:function(){for(var R=0;R<this.requireFail.length;){if(!(33&this.requireFail[R].state))return!1;R++}return!0},recognize:function(R){var L=be({},R);if(!Ne(this.options.enable,[this,L]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(L),30&this.state&&this.tryEmit(L)},process:function(R){},getTouchAction:function(){},reset:function(){}},de(Kr,yr,{defaults:{pointers:1},attrTest:function(R){var L=this.options.pointers;return 0===L||R.pointers.length===L},process:function(R){var L=this.state,q=R.eventType,me=6&L,ke=this.attrTest(R);return me&&(8&q||!ke)?16|L:me||ke?4&q?8|L:2&L?4|L:2:32}}),de(xr,Kr,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var R=this.options.direction,L=[];return 6&R&&L.push(ne),24&R&&L.push(mr),L},directionTest:function(R){var L=this.options,q=!0,me=R.distance,ke=R.direction,Ke=R.deltaX,Bt=R.deltaY;return ke&L.direction||(6&L.direction?(ke=0===Ke?1:Ke<0?2:4,q=Ke!=this.pX,me=Math.abs(R.deltaX)):(ke=0===Bt?1:Bt<0?8:16,q=Bt!=this.pY,me=Math.abs(R.deltaY))),R.direction=ke,q&&me>L.threshold&&ke&L.direction},attrTest:function(R){return Kr.prototype.attrTest.call(this,R)&&(2&this.state||!(2&this.state)&&this.directionTest(R))},emit:function(R){this.pX=R.deltaX,this.pY=R.deltaY;var L=rn(R.direction);L&&(R.additionalEvent=this.options.event+L),this._super.emit.call(this,R)}}),de(Gs,Kr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$n]},attrTest:function(R){return this._super.attrTest.call(this,R)&&(Math.abs(R.scale-1)>this.options.threshold||2&this.state)},emit:function(R){1!==R.scale&&(R.additionalEvent=this.options.event+(R.scale<1?"in":"out")),this._super.emit.call(this,R)}}),de(oi,yr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(R){var L=this.options,q=R.pointers.length===L.pointers,me=R.distance<L.threshold,ke=R.deltaTime>L.time;if(this._input=R,!me||!q||12&R.eventType&&!ke)this.reset();else if(1&R.eventType)this.reset(),this._timer=G(function(){this.state=8,this.tryEmit()},L.time,this);else if(4&R.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(R){8===this.state&&(R&&4&R.eventType?this.manager.emit(this.options.event+"up",R):(this._input.timeStamp=$(),this.manager.emit(this.options.event,this._input)))}}),de(zi,Kr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$n]},attrTest:function(R){return this._super.attrTest.call(this,R)&&(Math.abs(R.rotation)>this.options.threshold||2&this.state)}}),de(kr,Kr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return xr.prototype.getTouchAction.call(this)},attrTest:function(R){var q,L=this.options.direction;return 30&L?q=R.overallVelocity:6&L?q=R.overallVelocityX:24&L&&(q=R.overallVelocityY),this._super.attrTest.call(this,R)&&L&R.offsetDirection&&R.distance>this.options.threshold&&R.maxPointers==this.options.pointers&&V(q)>this.options.velocity&&4&R.eventType},emit:function(R){var L=rn(R.offsetDirection);L&&this.manager.emit(this.options.event+L,R),this.manager.emit(this.options.event,R)}}),de(tr,yr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[nn]},process:function(R){var L=this.options,q=R.pointers.length===L.pointers,me=R.distance<L.threshold,ke=R.deltaTime<L.time;if(this.reset(),1&R.eventType&&0===this.count)return this.failTimeout();if(me&&ke&&q){if(4!=R.eventType)return this.failTimeout();var Ke=!this.pTime||R.timeStamp-this.pTime<L.interval,Bt=!this.pCenter||Kt(this.pCenter,R.center)<L.posThreshold;if(this.pTime=R.timeStamp,this.pCenter=R.center,Bt&&Ke?this.count+=1:this.count=1,this._input=R,0==this.count%L.taps)return this.hasRequireFailures()?(this._timer=G(function(){this.state=8,this.tryEmit()},L.interval,this),2):8}return 32},failTimeout:function(){return this._timer=G(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Mn.VERSION="2.0.7",Mn.defaults={domEvents:!1,touchAction:He,enable:!0,inputTarget:null,inputClass:null,preset:[[zi,{enable:!1}],[Gs,{enable:!1},["rotate"]],[kr,{direction:6}],[xr,{direction:6},["swipe"]],[tr],[tr,{event:"doubletap",taps:2},["tap"]],[oi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ts.prototype={set:function(R){return be(this.options,R),R.touchAction&&this.touchAction.update(),R.inputTarget&&(this.input.destroy(),this.input.target=R.inputTarget,this.input.init()),this},stop:function(R){this.session.stopped=R?2:1},recognize:function(R){var L=this.session;if(!L.stopped){this.touchAction.preventDefaults(R);var q,me=this.recognizers,ke=L.curRecognizer;(!ke||ke&&8&ke.state)&&(ke=L.curRecognizer=null);for(var Ke=0;Ke<me.length;)q=me[Ke],2===L.stopped||ke&&q!=ke&&!q.canRecognizeWith(ke)?q.reset():q.recognize(R),!ke&&14&q.state&&(ke=L.curRecognizer=q),Ke++}},get:function(R){if(R instanceof yr)return R;for(var L=this.recognizers,q=0;q<L.length;q++)if(L[q].options.event==R)return L[q];return null},add:function(R){if(ge(R,"add",this))return this;var L=this.get(R.options.event);return L&&this.remove(L),this.recognizers.push(R),R.manager=this,this.touchAction.update(),R},remove:function(R){if(ge(R,"remove",this))return this;if(R=this.get(R)){var L=this.recognizers,q=lt(L,R);-1!==q&&(L.splice(q,1),this.touchAction.update())}return this},on:function(R,L){if(R!==ee&&L!==ee){var q=this.handlers;return Re(bt(R),function(me){q[me]=q[me]||[],q[me].push(L)}),this}},off:function(R,L){if(R!==ee){var q=this.handlers;return Re(bt(R),function(me){L?q[me]&&q[me].splice(lt(q[me],L),1):delete q[me]}),this}},emit:function(R,L){this.options.domEvents&&function(R,L){var q=O.createEvent("Event");q.initEvent(R,!0,!0),q.gesture=L,L.target.dispatchEvent(q)}(R,L);var q=this.handlers[R]&&this.handlers[R].slice();if(q&&q.length){L.type=R,L.preventDefault=function(){L.srcEvent.preventDefault()};for(var me=0;me<q.length;)q[me](L),me++}},destroy:function(){this.element&&zs(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},be(Mn,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ts,Input:Qe,TouchAction:Ae,TouchInput:je,MouseInput:De,PointerEventInput:_n,TouchMouseInput:zt,SingleTouchInput:fe,Recognizer:yr,AttrRecognizer:Kr,Tap:tr,Pan:xr,Swipe:kr,Pinch:Gs,Rotate:zi,Press:oi,on:vt,off:St,each:Re,merge:ae,extend:Ee,assign:be,inherit:de,bindFn:Ce,prefixed:wt}),(void 0!==U?U:"undefined"!=typeof self?self:{}).Hammer=Mn,(h=function(){return Mn}.call(ve,N,ve,We))!==ee&&(We.exports=h)}(window,document)},6676:function(We,ve){!function(N){"use strict";function h(Ee){return Array.prototype.slice.call(Ee)}function U(Ee){return new Promise(function(ae,de){Ee.onsuccess=function(){ae(Ee.result)},Ee.onerror=function(){de(Ee.error)}})}function O(Ee,ae,de){var Ce,Ne=new Promise(function(Ye,vt){U(Ce=Ee[ae].apply(Ee,de)).then(Ye,vt)});return Ne.request=Ce,Ne}function ue(Ee,ae,de){var Ce=O(Ee,ae,de);return Ce.then(function(Ne){if(Ne)return new V(Ne,Ce.request)})}function ee(Ee,ae,de){de.forEach(function(Ce){Object.defineProperty(Ee.prototype,Ce,{get:function(){return this[ae][Ce]},set:function(Ne){this[ae][Ce]=Ne}})})}function J(Ee,ae,de,Ce){Ce.forEach(function(Ne){Ne in de.prototype&&(Ee.prototype[Ne]=function(){return O(this[ae],Ne,arguments)})})}function oe(Ee,ae,de,Ce){Ce.forEach(function(Ne){Ne in de.prototype&&(Ee.prototype[Ne]=function(){return this[ae][Ne].apply(this[ae],arguments)})})}function te(Ee,ae,de,Ce){Ce.forEach(function(Ne){Ne in de.prototype&&(Ee.prototype[Ne]=function(){return ue(this[ae],Ne,arguments)})})}function X(Ee){this._index=Ee}function V(Ee,ae){this._cursor=Ee,this._request=ae}function $(Ee){this._store=Ee}function G(Ee){this._tx=Ee,this.complete=new Promise(function(ae,de){Ee.oncomplete=function(){ae()},Ee.onerror=function(){de(Ee.error)},Ee.onabort=function(){de(Ee.error)}})}function ge(Ee,ae,de){this._db=Ee,this.oldVersion=ae,this.transaction=new G(de)}function Re(Ee){this._db=Ee}ee(X,"_index",["name","keyPath","multiEntry","unique"]),J(X,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),te(X,"_index",IDBIndex,["openCursor","openKeyCursor"]),ee(V,"_cursor",["direction","key","primaryKey","value"]),J(V,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Ee){Ee in IDBCursor.prototype&&(V.prototype[Ee]=function(){var ae=this,de=arguments;return Promise.resolve().then(function(){return ae._cursor[Ee].apply(ae._cursor,de),U(ae._request).then(function(Ce){if(Ce)return new V(Ce,ae._request)})})})}),$.prototype.createIndex=function(){return new X(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new X(this._store.index.apply(this._store,arguments))},ee($,"_store",["name","keyPath","indexNames","autoIncrement"]),J($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),te($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oe($,"_store",IDBObjectStore,["deleteIndex"]),G.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},ee(G,"_tx",["objectStoreNames","mode"]),oe(G,"_tx",IDBTransaction,["abort"]),ge.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},ee(ge,"_db",["name","version","objectStoreNames"]),oe(ge,"_db",IDBDatabase,["deleteObjectStore","close"]),Re.prototype.transaction=function(){return new G(this._db.transaction.apply(this._db,arguments))},ee(Re,"_db",["name","version","objectStoreNames"]),oe(Re,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Ee){[$,X].forEach(function(ae){Ee in ae.prototype&&(ae.prototype[Ee.replace("open","iterate")]=function(){var de=h(arguments),Ce=de[de.length-1],Ne=this._store||this._index,Ye=Ne[Ee].apply(Ne,de.slice(0,-1));Ye.onsuccess=function(){Ce(Ye.result)}})})}),[X,$].forEach(function(Ee){Ee.prototype.getAll||(Ee.prototype.getAll=function(ae,de){var Ce=this,Ne=[];return new Promise(function(Ye){Ce.iterateCursor(ae,function(vt){vt?(Ne.push(vt.value),void 0===de||Ne.length!=de?vt.continue():Ye(Ne)):Ye(Ne)})})})}),N.openDb=function(Ee,ae,de){var Ce=O(indexedDB,"open",[Ee,ae]),Ne=Ce.request;return Ne&&(Ne.onupgradeneeded=function(Ye){de&&de(new ge(Ne.result,Ye.oldVersion,Ne.transaction))}),Ce.then(function(Ye){return new Re(Ye)})},N.deleteDb=function(Ee){return O(indexedDB,"deleteDatabase",[Ee])},Object.defineProperty(N,"__esModule",{value:!0})}(ve)},3098:(We,ve,N)=>{"use strict";N.d(ve,{P:()=>ee});var h=N(9193),U=N(5917),O=N(205);class ee{constructor(oe,te,X){this.kind=oe,this.value=te,this.error=X,this.hasValue="N"===oe}observe(oe){switch(this.kind){case"N":return oe.next&&oe.next(this.value);case"E":return oe.error&&oe.error(this.error);case"C":return oe.complete&&oe.complete()}}do(oe,te,X){switch(this.kind){case"N":return oe&&oe(this.value);case"E":return te&&te(this.error);case"C":return X&&X()}}accept(oe,te,X){return oe&&"function"==typeof oe.next?this.observe(oe):this.do(oe,te,X)}toObservable(){switch(this.kind){case"N":return(0,U.of)(this.value);case"E":return(0,O._)(this.error);case"C":return(0,h.c)()}throw new Error("unexpected notification kind value")}static createNext(oe){return void 0!==oe?new ee("N",oe):ee.undefinedValueNotification}static createError(oe){return new ee("E",void 0,oe)}static createComplete(){return ee.completeNotification}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0)},7574:(We,ve,N)=>{"use strict";N.d(ve,{y:()=>$});var h=N(7393),O=N(9181),ue=N(6490),J=N(6554),oe=N(4487);var V=N(2494);let $=(()=>{class ge{constructor(xe){this._isScalar=!1,xe&&(this._subscribe=xe)}lift(xe){const be=new ge;return be.source=this,be.operator=xe,be}subscribe(xe,be,Ee){const{operator:ae}=this,de=function(ge,Re,xe){if(ge){if(ge instanceof h.L)return ge;if(ge[O.b])return ge[O.b]()}return ge||Re||xe?new h.L(ge,Re,xe):new h.L(ue.c)}(xe,be,Ee);if(de.add(ae?ae.call(de,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!de.syncErrorThrowable?this._subscribe(de):this._trySubscribe(de)),V.v.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable&&(de.syncErrorThrowable=!1,de.syncErrorThrown))throw de.syncErrorValue;return de}_trySubscribe(xe){try{return this._subscribe(xe)}catch(be){V.v.useDeprecatedSynchronousErrorHandling&&(xe.syncErrorThrown=!0,xe.syncErrorValue=be),function(ge){for(;ge;){const{closed:Re,destination:xe,isStopped:be}=ge;if(Re||be)return!1;ge=xe&&xe instanceof h.L?xe:null}return!0}(xe)?xe.error(be):console.warn(be)}}forEach(xe,be){return new(be=G(be))((Ee,ae)=>{let de;de=this.subscribe(Ce=>{try{xe(Ce)}catch(Ne){ae(Ne),de&&de.unsubscribe()}},ae,Ee)})}_subscribe(xe){const{source:be}=this;return be&&be.subscribe(xe)}[J.L](){return this}pipe(...xe){return 0===xe.length?this:function(ge){return 0===ge.length?oe.y:1===ge.length?ge[0]:function(xe){return ge.reduce((be,Ee)=>Ee(be),xe)}}(xe)(this)}toPromise(xe){return new(xe=G(xe))((be,Ee)=>{let ae;this.subscribe(de=>ae=de,de=>Ee(de),()=>be(ae))})}}return ge.create=Re=>new ge(Re),ge})();function G(ge){if(ge||(ge=V.v.Promise||Promise),!ge)throw new Error("no Promise impl found");return ge}},6490:(We,ve,N)=>{"use strict";N.d(ve,{c:()=>O});var h=N(2494),U=N(4449);const O={closed:!0,next(ue){},error(ue){if(h.v.useDeprecatedSynchronousErrorHandling)throw ue;(0,U.z)(ue)},complete(){}}},9765:(We,ve,N)=>{"use strict";N.d(ve,{Yc:()=>oe,xQ:()=>te});var h=N(7574),U=N(7393),O=N(5319),ue=N(7971),ee=N(8858),J=N(9181);class oe extends U.L{constructor($){super($),this.destination=$}}let te=(()=>{class V extends h.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[J.b](){return new oe(this)}lift(G){const ge=new X(this,this);return ge.operator=G,ge}next(G){if(this.closed)throw new ue.N;if(!this.isStopped){const{observers:ge}=this,Re=ge.length,xe=ge.slice();for(let be=0;be<Re;be++)xe[be].next(G)}}error(G){if(this.closed)throw new ue.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:ge}=this,Re=ge.length,xe=ge.slice();for(let be=0;be<Re;be++)xe[be].error(G);this.observers.length=0}complete(){if(this.closed)throw new ue.N;this.isStopped=!0;const{observers:G}=this,ge=G.length,Re=G.slice();for(let xe=0;xe<ge;xe++)Re[xe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new ue.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new ue.N;return this.hasError?(G.error(this.thrownError),O.w.EMPTY):this.isStopped?(G.complete(),O.w.EMPTY):(this.observers.push(G),new ee.W(this,G))}asObservable(){const G=new h.y;return G.source=this,G}}return V.create=($,G)=>new X($,G),V})();class X extends te{constructor($,G){super(),this.destination=$,this.source=G}next($){const{destination:G}=this;G&&G.next&&G.next($)}error($){const{destination:G}=this;G&&G.error&&this.destination.error($)}complete(){const{destination:$}=this;$&&$.complete&&this.destination.complete()}_subscribe($){const{source:G}=this;return G?this.source.subscribe($):O.w.EMPTY}}},8858:(We,ve,N)=>{"use strict";N.d(ve,{W:()=>U});var h=N(5319);class U extends h.w{constructor(ue,ee){super(),this.subject=ue,this.subscriber=ee,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ue=this.subject,ee=ue.observers;if(this.subject=null,!ee||0===ee.length||ue.isStopped||ue.closed)return;const J=ee.indexOf(this.subscriber);-1!==J&&ee.splice(J,1)}}},7393:(We,ve,N)=>{"use strict";N.d(ve,{L:()=>oe});var h=N(9105),U=N(6490),O=N(5319),ue=N(9181),ee=N(2494),J=N(4449);class oe extends O.w{constructor(V,$,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U.c;break;case 1:if(!V){this.destination=U.c;break}if("object"==typeof V){V instanceof oe?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,V,$,G)}}[ue.b](){return this}static create(V,$,G){const ge=new oe(V,$,G);return ge.syncErrorThrowable=!1,ge}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class te extends oe{constructor(V,$,G,ge){super(),this._parentSubscriber=V;let Re,xe=this;(0,h.m)($)?Re=$:$&&(Re=$.next,G=$.error,ge=$.complete,$!==U.c&&(xe=Object.create($),(0,h.m)(xe.unsubscribe)&&this.add(xe.unsubscribe.bind(xe)),xe.unsubscribe=this.unsubscribe.bind(this))),this._context=xe,this._next=Re,this._error=G,this._complete=ge}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:$}=this;ee.v.useDeprecatedSynchronousErrorHandling&&$.syncErrorThrowable?this.__tryOrSetError($,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:$}=this,{useDeprecatedSynchronousErrorHandling:G}=ee.v;if(this._error)G&&$.syncErrorThrowable?(this.__tryOrSetError($,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if($.syncErrorThrowable)G?($.syncErrorValue=V,$.syncErrorThrown=!0):(0,J.z)(V),this.unsubscribe();else{if(this.unsubscribe(),G)throw V;(0,J.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const $=()=>this._complete.call(this._context);ee.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,$),this.unsubscribe()):(this.__tryOrUnsub($),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,$){try{V.call(this._context,$)}catch(G){if(this.unsubscribe(),ee.v.useDeprecatedSynchronousErrorHandling)throw G;(0,J.z)(G)}}__tryOrSetError(V,$,G){if(!ee.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{$.call(this._context,G)}catch(ge){return ee.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=ge,V.syncErrorThrown=!0,!0):((0,J.z)(ge),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(We,ve,N)=>{"use strict";N.d(ve,{w:()=>J});var h=N(9796),U=N(1555),O=N(9105);const ee=(()=>{function te(X){return Error.call(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((V,$)=>`${$+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X,this}return te.prototype=Object.create(Error.prototype),te})();class J{constructor(X){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,X&&(this._ctorUnsubscribe=!0,this._unsubscribe=X)}unsubscribe(){let X;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:$,_unsubscribe:G,_subscriptions:ge}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof J)V.remove(this);else if(null!==V)for(let Re=0;Re<V.length;++Re)V[Re].remove(this);if((0,O.m)(G)){$&&(this._unsubscribe=void 0);try{G.call(this)}catch(Re){X=Re instanceof ee?oe(Re.errors):[Re]}}if((0,h.k)(ge)){let Re=-1,xe=ge.length;for(;++Re<xe;){const be=ge[Re];if((0,U.K)(be))try{be.unsubscribe()}catch(Ee){X=X||[],Ee instanceof ee?X=X.concat(oe(Ee.errors)):X.push(Ee)}}}if(X)throw new ee(X)}add(X){let V=X;if(!X)return J.EMPTY;switch(typeof X){case"function":V=new J(X);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof J)){const ge=V;V=new J,V._subscriptions=[ge]}break;default:throw new Error("unrecognized teardown "+X+" added to Subscription.")}let{_parentOrParents:$}=V;if(null===$)V._parentOrParents=this;else if($ instanceof J){if($===this)return V;V._parentOrParents=[$,this]}else{if(-1!==$.indexOf(this))return V;$.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[V]:G.push(V),V}remove(X){const V=this._subscriptions;if(V){const $=V.indexOf(X);-1!==$&&V.splice($,1)}}}var te;function oe(te){return te.reduce((X,V)=>X.concat(V instanceof ee?V.errors:V),[])}J.EMPTY=((te=new J).closed=!0,te)},2494:(We,ve,N)=>{"use strict";N.d(ve,{v:()=>U});let h=!1;const U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ue=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ue.stack)}else h&&console.log("RxJS: Back to a better error behavior. Thank you. <3");h=O},get useDeprecatedSynchronousErrorHandling(){return h}}},5345:(We,ve,N)=>{"use strict";N.d(ve,{IY:()=>ue,Ds:()=>J,ft:()=>te});var h=N(7393),U=N(7574),O=N(7444);class ue extends h.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class J extends h.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function te(X,V){if(V.closed)return;if(X instanceof U.y)return X.subscribe(V);let $;try{$=(0,O.s)(X)(V)}catch(G){V.error(G)}return $}},2441:(We,ve,N)=>{"use strict";N.d(ve,{c:()=>ee,N:()=>J});var h=N(9765),U=N(7574),O=N(5319),ue=N(1307);class ee extends U.y{constructor($,G){super(),this.source=$,this.subjectFactory=G,this._refCount=0,this._isComplete=!1}_subscribe($){return this.getSubject().subscribe($)}getSubject(){const $=this._subject;return(!$||$.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let $=this._connection;return $||(this._isComplete=!1,$=this._connection=new O.w,$.add(this.source.subscribe(new oe(this.getSubject(),this))),$.closed&&(this._connection=null,$=O.w.EMPTY)),$}refCount(){return(0,ue.x)()(this)}}const J=(()=>{const V=ee.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class oe extends h.Yc{constructor($,G){super($),this.connectable=G}_error($){this._unsubscribe(),super._error($)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const $=this.connectable;if($){this.connectable=null;const G=$._connection;$._refCount=0,$._subject=null,$._connection=null,G&&G.unsubscribe()}}}},9193:(We,ve,N)=>{"use strict";N.d(ve,{E:()=>U,c:()=>O});var h=N(7574);const U=new h.y(ee=>ee.complete());function O(ee){return ee?function(ee){return new h.y(J=>ee.schedule(()=>J.complete()))}(ee):U}},4402:(We,ve,N)=>{"use strict";N.d(ve,{D:()=>xe});var h=N(7574),U=N(7444),O=N(5319),ue=N(6554),oe=N(4087),te=N(377),$=N(4072),G=N(9489);function xe(be,Ee){return Ee?function(be,Ee){if(null!=be){if(function(be){return be&&"function"==typeof be[ue.L]}(be))return function(be,Ee){return new h.y(ae=>{const de=new O.w;return de.add(Ee.schedule(()=>{const Ce=be[ue.L]();de.add(Ce.subscribe({next(Ne){de.add(Ee.schedule(()=>ae.next(Ne)))},error(Ne){de.add(Ee.schedule(()=>ae.error(Ne)))},complete(){de.add(Ee.schedule(()=>ae.complete()))}}))})),de})}(be,Ee);if((0,$.t)(be))return function(be,Ee){return new h.y(ae=>{const de=new O.w;return de.add(Ee.schedule(()=>be.then(Ce=>{de.add(Ee.schedule(()=>{ae.next(Ce),de.add(Ee.schedule(()=>ae.complete()))}))},Ce=>{de.add(Ee.schedule(()=>ae.error(Ce)))}))),de})}(be,Ee);if((0,G.z)(be))return(0,oe.r)(be,Ee);if(function(be){return be&&"function"==typeof be[te.hZ]}(be)||"string"==typeof be)return function(be,Ee){if(!be)throw new Error("Iterable cannot be null");return new h.y(ae=>{const de=new O.w;let Ce;return de.add(()=>{Ce&&"function"==typeof Ce.return&&Ce.return()}),de.add(Ee.schedule(()=>{Ce=be[te.hZ](),de.add(Ee.schedule(function(){if(ae.closed)return;let Ne,Ye;try{const vt=Ce.next();Ne=vt.value,Ye=vt.done}catch(vt){return void ae.error(vt)}Ye?ae.complete():(ae.next(Ne),this.schedule())}))})),de})}(be,Ee)}throw new TypeError((null!==be&&typeof be||be)+" is not observable")}(be,Ee):be instanceof h.y?be:new h.y((0,U.s)(be))}},6693:(We,ve,N)=>{"use strict";N.d(ve,{n:()=>ue});var h=N(7574),U=N(5015),O=N(4087);function ue(ee,J){return J?(0,O.r)(ee,J):new h.y((0,U.V)(ee))}},6682:(We,ve,N)=>{"use strict";N.d(ve,{T:()=>ee});var h=N(7574),U=N(4869),O=N(3282),ue=N(6693);function ee(...J){let oe=Number.POSITIVE_INFINITY,te=null,X=J[J.length-1];return(0,U.K)(X)?(te=J.pop(),J.length>1&&"number"==typeof J[J.length-1]&&(oe=J.pop())):"number"==typeof X&&(oe=J.pop()),null===te&&1===J.length&&J[0]instanceof h.y?J[0]:(0,O.J)(oe)((0,ue.n)(J,te))}},5917:(We,ve,N)=>{"use strict";N.d(ve,{of:()=>ue});var h=N(4869),U=N(6693),O=N(4087);function ue(...ee){let J=ee[ee.length-1];return(0,h.K)(J)?(ee.pop(),(0,O.r)(ee,J)):(0,U.n)(ee)}},205:(We,ve,N)=>{"use strict";N.d(ve,{_:()=>U});var h=N(7574);function U(ue,ee){return new h.y(ee?J=>ee.schedule(O,0,{error:ue,subscriber:J}):J=>J.error(ue))}function O({error:ue,subscriber:ee}){ee.error(ue)}},8002:(We,ve,N)=>{"use strict";N.d(ve,{U:()=>U});var h=N(7393);function U(ee,J){return function(te){if("function"!=typeof ee)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new O(ee,J))}}class O{constructor(J,oe){this.project=J,this.thisArg=oe}call(J,oe){return oe.subscribe(new ue(J,this.project,this.thisArg))}}class ue extends h.L{constructor(J,oe,te){super(J),this.project=oe,this.count=0,this.thisArg=te||this}_next(J){let oe;try{oe=this.project.call(this.thisArg,J,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(oe)}}},3282:(We,ve,N)=>{"use strict";N.d(ve,{J:()=>O});var h=N(9773),U=N(4487);function O(ue=Number.POSITIVE_INFINITY){return(0,h.zg)(U.y,ue)}},9773:(We,ve,N)=>{"use strict";N.d(ve,{zg:()=>ue});var h=N(8002),U=N(4402),O=N(5345);function ue(te,X,V=Number.POSITIVE_INFINITY){return"function"==typeof X?$=>$.pipe(ue((G,ge)=>(0,U.D)(te(G,ge)).pipe((0,h.U)((Re,xe)=>X(G,Re,ge,xe))),V)):("number"==typeof X&&(V=X),$=>$.lift(new ee(te,V)))}class ee{constructor(X,V=Number.POSITIVE_INFINITY){this.project=X,this.concurrent=V}call(X,V){return V.subscribe(new J(X,this.project,this.concurrent))}}class J extends O.Ds{constructor(X,V,$=Number.POSITIVE_INFINITY){super(X),this.project=V,this.concurrent=$,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(X){this.active<this.concurrent?this._tryNext(X):this.buffer.push(X)}_tryNext(X){let V;const $=this.index++;try{V=this.project(X,$)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub(V)}_innerSub(X){const V=new O.IY(this),$=this.destination;$.add(V);const G=(0,O.ft)(X,V);G!==V&&$.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(X){this.destination.next(X)}notifyComplete(){const X=this.buffer;this.active--,X.length>0?this._next(X.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},4458:(We,ve,N)=>{"use strict";N.d(ve,{O:()=>U});var h=N(2441);function U(ue,ee){return function(oe){let te;if(te="function"==typeof ue?ue:function(){return ue},"function"==typeof ee)return oe.lift(new O(te,ee));const X=Object.create(oe,h.N);return X.source=oe,X.subjectFactory=te,X}}class O{constructor(ee,J){this.subjectFactory=ee,this.selector=J}call(ee,J){const{selector:oe}=this,te=this.subjectFactory(),X=oe(te).subscribe(ee);return X.add(J.subscribe(te)),X}}},9746:(We,ve,N)=>{"use strict";N.d(ve,{QV:()=>O,ht:()=>ee});var h=N(7393),U=N(3098);function O(oe,te=0){return function(V){return V.lift(new ue(oe,te))}}class ue{constructor(te,X=0){this.scheduler=te,this.delay=X}call(te,X){return X.subscribe(new ee(te,this.scheduler,this.delay))}}class ee extends h.L{constructor(te,X,V=0){super(te),this.scheduler=X,this.delay=V}static dispatch(te){const{notification:X,destination:V}=te;X.observe(V),this.unsubscribe()}scheduleMessage(te){this.destination.add(this.scheduler.schedule(ee.dispatch,this.delay,new J(te,this.destination)))}_next(te){this.scheduleMessage(U.P.createNext(te))}_error(te){this.scheduleMessage(U.P.createError(te)),this.unsubscribe()}_complete(){this.scheduleMessage(U.P.createComplete()),this.unsubscribe()}}class J{constructor(te,X){this.notification=te,this.destination=X}}},1307:(We,ve,N)=>{"use strict";N.d(ve,{x:()=>U});var h=N(7393);function U(){return function(J){return J.lift(new O(J))}}class O{constructor(J){this.connectable=J}call(J,oe){const{connectable:te}=this;te._refCount++;const X=new ue(J,te),V=oe.subscribe(X);return X.closed||(X.connection=te.connect()),V}}class ue extends h.L{constructor(J,oe){super(J),this.connectable=oe}_unsubscribe(){const{connectable:J}=this;if(!J)return void(this.connection=null);this.connectable=null;const oe=J._refCount;if(oe<=0)return void(this.connection=null);if(J._refCount=oe-1,oe>1)return void(this.connection=null);const{connection:te}=this,X=J._connection;this.connection=null,X&&(!te||X===te)&&X.unsubscribe()}}},8345:(We,ve,N)=>{"use strict";N.d(ve,{B:()=>ee});var h=N(4458),U=N(1307),O=N(9765);function ue(){return new O.xQ}function ee(){return J=>(0,U.x)()((0,h.O)(ue)(J))}},3101:(We,ve,N)=>{"use strict";N.d(ve,{R:()=>Ee});var h=N(7574);let U=1;const O=Promise.resolve(),ue={};function ee(de){return de in ue&&(delete ue[de],!0)}const J={setImmediate(de){const Ce=U++;return ue[Ce]=!0,O.then(()=>ee(Ce)&&de()),Ce},clearImmediate(de){ee(de)}};var te=N(6465),V=N(6102);const ge=new class extends V.v{flush(Ce){this.active=!0,this.scheduled=void 0;const{actions:Ne}=this;let Ye,vt=-1,St=Ne.length;Ce=Ce||Ne.shift();do{if(Ye=Ce.execute(Ce.state,Ce.delay))break}while(++vt<St&&(Ce=Ne.shift()));if(this.active=!1,Ye){for(;++vt<St&&(Ce=Ne.shift());)Ce.unsubscribe();throw Ye}}}(class extends te.o{constructor(Ce,Ne){super(Ce,Ne),this.scheduler=Ce,this.work=Ne}requestAsyncId(Ce,Ne,Ye=0){return null!==Ye&&Ye>0?super.requestAsyncId(Ce,Ne,Ye):(Ce.actions.push(this),Ce.scheduled||(Ce.scheduled=J.setImmediate(Ce.flush.bind(Ce,null))))}recycleAsyncId(Ce,Ne,Ye=0){if(null!==Ye&&Ye>0||null===Ye&&this.delay>0)return super.recycleAsyncId(Ce,Ne,Ye);0===Ce.actions.length&&(J.clearImmediate(Ne),Ce.scheduled=void 0)}});var Re=N(9796);class be extends h.y{constructor(Ce,Ne=0,Ye=ge){var de;super(),this.source=Ce,this.delayTime=Ne,this.scheduler=Ye,(!(!(0,Re.k)(de=Ne)&&de-parseFloat(de)+1>=0)||Ne<0)&&(this.delayTime=0),(!Ye||"function"!=typeof Ye.schedule)&&(this.scheduler=ge)}static create(Ce,Ne=0,Ye=ge){return new be(Ce,Ne,Ye)}static dispatch(Ce){const{source:Ne,subscriber:Ye}=Ce;return this.add(Ne.subscribe(Ye))}_subscribe(Ce){return this.scheduler.schedule(be.dispatch,this.delayTime,{source:this.source,subscriber:Ce})}}function Ee(de,Ce=0){return function(Ye){return Ye.lift(new ae(de,Ce))}}class ae{constructor(Ce,Ne){this.scheduler=Ce,this.delay=Ne}call(Ce,Ne){return new be(Ne,this.delay,this.scheduler).subscribe(Ce)}}},8307:(We,ve,N)=>{"use strict";N.d(ve,{b:()=>ue});var h=N(7393),U=N(8640),O=N(9105);function ue(oe,te,X){return function($){return $.lift(new ee(oe,te,X))}}class ee{constructor(te,X,V){this.nextOrObserver=te,this.error=X,this.complete=V}call(te,X){return X.subscribe(new J(te,this.nextOrObserver,this.error,this.complete))}}class J extends h.L{constructor(te,X,V,$){super(te),this._tapNext=U.Z,this._tapError=U.Z,this._tapComplete=U.Z,this._tapError=V||U.Z,this._tapComplete=$||U.Z,(0,O.m)(X)?(this._context=this,this._tapNext=X):X&&(this._context=X,this._tapNext=X.next||U.Z,this._tapError=X.error||U.Z,this._tapComplete=X.complete||U.Z)}_next(te){try{this._tapNext.call(this._context,te)}catch(X){return void this.destination.error(X)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(X){return void this.destination.error(X)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(We,ve,N)=>{"use strict";N.d(ve,{r:()=>O});var h=N(7574),U=N(5319);function O(ue,ee){return new h.y(J=>{const oe=new U.w;let te=0;return oe.add(ee.schedule(function(){te!==ue.length?(J.next(ue[te++]),J.closed||oe.add(this.schedule())):J.complete()})),oe})}},6465:(We,ve,N)=>{"use strict";N.d(ve,{o:()=>O});var h=N(5319);class U extends h.w{constructor(ee,J){super()}schedule(ee,J=0){return this}}class O extends U{constructor(ee,J){super(ee,J),this.scheduler=ee,this.work=J,this.pending=!1}schedule(ee,J=0){if(this.closed)return this;this.state=ee;const oe=this.id,te=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(te,oe,J)),this.pending=!0,this.delay=J,this.id=this.id||this.requestAsyncId(te,this.id,J),this}requestAsyncId(ee,J,oe=0){return setInterval(ee.flush.bind(ee,this),oe)}recycleAsyncId(ee,J,oe=0){if(null!==oe&&this.delay===oe&&!1===this.pending)return J;clearInterval(J)}execute(ee,J){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const oe=this._execute(ee,J);if(oe)return oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ee,J){let te,oe=!1;try{this.work(ee)}catch(X){oe=!0,te=!!X&&X||new Error(X)}if(oe)return this.unsubscribe(),te}_unsubscribe(){const ee=this.id,J=this.scheduler,oe=J.actions,te=oe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&oe.splice(te,1),null!=ee&&(this.id=this.recycleAsyncId(J,ee,null)),this.delay=null}}},6102:(We,ve,N)=>{"use strict";N.d(ve,{v:()=>U});let h=(()=>{class O{constructor(ee,J=O.now){this.SchedulerAction=ee,this.now=J}schedule(ee,J=0,oe){return new this.SchedulerAction(this,ee).schedule(oe,J)}}return O.now=()=>Date.now(),O})();class U extends h{constructor(ue,ee=h.now){super(ue,()=>U.delegate&&U.delegate!==this?U.delegate.now():ee()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ue,ee=0,J){return U.delegate&&U.delegate!==this?U.delegate.schedule(ue,ee,J):super.schedule(ue,ee,J)}flush(ue){const{actions:ee}=this;if(this.active)return void ee.push(ue);let J;this.active=!0;do{if(J=ue.execute(ue.state,ue.delay))break}while(ue=ee.shift());if(this.active=!1,J){for(;ue=ee.shift();)ue.unsubscribe();throw J}}}},3637:(We,ve,N)=>{"use strict";N.d(ve,{z:()=>O,P:()=>ue});var h=N(6465);const O=new(N(6102).v)(h.o),ue=O},7771:(We,ve,N)=>{"use strict";N.d(ve,{c:()=>J,N:()=>ee});var h=N(6465),O=N(6102);const ee=new class extends O.v{}(class extends h.o{constructor(te,X){super(te,X),this.scheduler=te,this.work=X}schedule(te,X=0){return X>0?super.schedule(te,X):(this.delay=X,this.state=te,this.scheduler.flush(this),this)}execute(te,X){return X>0||this.closed?super.execute(te,X):this._execute(te,X)}requestAsyncId(te,X,V=0){return null!==V&&V>0||null===V&&this.delay>0?super.requestAsyncId(te,X,V):te.flush(this)}}),J=ee},377:(We,ve,N)=>{"use strict";N.d(ve,{hZ:()=>U});const U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(We,ve,N)=>{"use strict";N.d(ve,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(We,ve,N)=>{"use strict";N.d(ve,{b:()=>h});const h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(We,ve,N)=>{"use strict";N.d(ve,{N:()=>U});const U=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(We,ve,N)=>{"use strict";function h(U){setTimeout(()=>{throw U},0)}N.d(ve,{z:()=>h})},4487:(We,ve,N)=>{"use strict";function h(U){return U}N.d(ve,{y:()=>h})},9796:(We,ve,N)=>{"use strict";N.d(ve,{k:()=>h});const h=Array.isArray||(U=>U&&"number"==typeof U.length)},9489:(We,ve,N)=>{"use strict";N.d(ve,{z:()=>h});const h=U=>U&&"number"==typeof U.length&&"function"!=typeof U},9105:(We,ve,N)=>{"use strict";function h(U){return"function"==typeof U}N.d(ve,{m:()=>h})},1555:(We,ve,N)=>{"use strict";function h(U){return null!==U&&"object"==typeof U}N.d(ve,{K:()=>h})},4072:(We,ve,N)=>{"use strict";function h(U){return!!U&&"function"!=typeof U.subscribe&&"function"==typeof U.then}N.d(ve,{t:()=>h})},4869:(We,ve,N)=>{"use strict";function h(U){return U&&"function"==typeof U.schedule}N.d(ve,{K:()=>h})},8640:(We,ve,N)=>{"use strict";function h(){}N.d(ve,{Z:()=>h})},7444:(We,ve,N)=>{"use strict";N.d(ve,{s:()=>$});var h=N(5015),U=N(4449),ue=N(377),J=N(6554),te=N(9489),X=N(4072),V=N(1555);const $=G=>{if(G&&"function"==typeof G[J.L])return(G=>ge=>{const Re=G[J.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(ge)})(G);if((0,te.z)(G))return(0,h.V)(G);if((0,X.t)(G))return(G=>ge=>(G.then(Re=>{ge.closed||(ge.next(Re),ge.complete())},Re=>ge.error(Re)).then(null,U.z),ge))(G);if(G&&"function"==typeof G[ue.hZ])return(G=>ge=>{const Re=G[ue.hZ]();for(;;){let xe;try{xe=Re.next()}catch(be){return ge.error(be),ge}if(xe.done){ge.complete();break}if(ge.next(xe.value),ge.closed)break}return"function"==typeof Re.return&&ge.add(()=>{Re.return&&Re.return()}),ge})(G);{const Re=`You provided ${(0,V.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},5015:(We,ve,N)=>{"use strict";N.d(ve,{V:()=>h});const h=U=>O=>{for(let ue=0,ee=U.length;ue<ee&&!O.closed;ue++)O.next(U[ue]);O.complete()}},3303:(We,ve,N)=>{"use strict";var h=N(7716);let U=null;function O(){return U}const oe=new h.OlP("DocumentToken");let te=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,h.Yz7)({factory:X,token:n,providedIn:"platform"}),n})();function X(){return(0,h.LFG)($)}const V=new h.OlP("Location Initialized");let $=(()=>{class n extends te{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(e){const s=O().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=O().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,a){G()?this._history.pushState(e,s,a):this.location.hash=a}replaceState(e,s,a){G()?this._history.replaceState(e,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe))},n.\u0275prov=(0,h.Yz7)({factory:ge,token:n,providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function ge(){return new $((0,h.LFG)(oe))}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function xe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function be(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,h.Yz7)({factory:ae,token:n,providedIn:"root"}),n})();function ae(n){const t=(0,h.LFG)(oe).location;return new Ce((0,h.LFG)(te),t&&t.origin||"")}const de=new h.OlP("appBaseHref");let Ce=(()=>{class n extends Ee{constructor(e,s){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+be(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${s}${a}`:s}pushState(e,s,a,c){const f=this.prepareExternalUrl(a+be(c));this._platformLocation.pushState(e,s,f)}replaceState(e,s,a,c){const f=this.prepareExternalUrl(a+be(c));this._platformLocation.replaceState(e,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,e)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(te),h.LFG(de,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends Ee{constructor(e,s){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(e){const s=Re(this._baseHref,e);return s.length>0?"#"+s:s}pushState(e,s,a,c){let f=this.prepareExternalUrl(a+be(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(e,s,f)}replaceState(e,s,a,c){let f=this.prepareExternalUrl(a+be(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(e,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,e)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(te),h.LFG(de,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ye=(()=>{class n{constructor(e,s){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=xe(ft(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+be(s))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,ft(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,s="",a=null){this._platformStrategy.pushState(a,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+be(s)),a)}replaceState(e,s="",a=null){this._platformStrategy.replaceState(a,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+be(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(a=>a(e,s))}subscribe(e,s,a){return this._subject.subscribe({next:e,error:s,complete:a})}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(Ee),h.LFG(te))},n.normalizeQueryParams=be,n.joinWithSlash=Re,n.stripTrailingSlash=xe,n.\u0275prov=(0,h.Yz7)({factory:vt,token:n,providedIn:"root"}),n})();function vt(){return new Ye((0,h.LFG)(Ee),(0,h.LFG)(te))}function ft(n){return n.replace(/\/index.html$/,"")}var lt=(()=>((lt=lt||{})[lt.Zero=0]="Zero",lt[lt.One=1]="One",lt[lt.Two=2]="Two",lt[lt.Few=3]="Few",lt[lt.Many=4]="Many",lt[lt.Other=5]="Other",lt))();const Oe=h.kL8;class Lt{}let vr=(()=>{class n extends Lt{constructor(e){super(),this.locale=e}getPluralCategory(e,s){switch(Oe(s||this.locale)(e)){case lt.Zero:return"zero";case lt.One:return"one";case lt.Two:return"two";case lt.Few:return"few";case lt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),lr=(()=>{class n{constructor(e,s,a,c){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{s?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class $r{constructor(t,e,s,a){this.$implicit=t,this.ngForOf=e,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rn=(()=>{class n{constructor(e,s,a){this._viewContainer=e,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=[];e.forEachOperation((a,c,f)=>{if(null==a.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new $r(null,this._ngForOf,-1,-1),null===f?void 0:f),b=new Fi(a,y);s.push(b)}else if(null==f)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const y=this._viewContainer.get(c);this._viewContainer.move(y,f);const b=new Fi(a,y);s.push(b)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const f=this._viewContainer.get(a);f.context.index=a,f.context.count=c,f.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,s){e.context.$implicit=s.item}static ngTemplateContextGuard(e,s){return!0}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Fi{constructor(t,e){this.record=t,this.view=e}}let xr=(()=>{class n{constructor(e,s){this._viewContainer=e,this._context=new Gs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){oi("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){oi("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Gs{constructor(){this.$implicit=null,this.ngIf=null}}function oi(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(t)}'.`)}let qs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[{provide:Lt,useClass:vr}]}),n})();function Jo(n){return"browser"===n}let Wl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Xo((0,h.LFG)(oe),window)}),n})();class Xo{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const c=a.shadowRoot;if(c){const f=c.getElementById(t)||c.querySelector(`[name="${t}"]`);if(f)return f}a=s.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),s=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],a-c[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=qi(this.window.history)||qi(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function qi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ea extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ea,U||(U=n)}onAndCancel(t,e,s){return t.addEventListener(e,s,!1),()=>{t.removeEventListener(e,s,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Fr=Fr||document.querySelector("base"),Fr?Fr.getAttribute("href"):null);return null==e?null:function(n){Sn=Sn||document.createElement("a"),Sn.setAttribute("href",n);const t=Sn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Fr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const s=e.indexOf("="),[a,c]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(a.trim()===t)return decodeURIComponent(c)}return null}(document.cookie,t)}}let Sn,Fr=null;const $d=new h.OlP("TRANSITION_ID"),bi=[{provide:h.ip1,useFactory:function(n,t,e){return()=>{e.get(h.CZH).donePromise.then(()=>{const s=O(),a=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)s.remove(a[c])})}},deps:[$d,oe,h.zs3],multi:!0}];class Ki{static init(){(0,h.VLi)(new Ki)}addToWindow(t){h.dqk.getAngularTestability=(s,a=!0)=>{const c=t.findTestabilityInTree(s,a);if(null==c)throw new Error("Could not find testability for element.");return c},h.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(s=>{const a=h.dqk.getAllAngularTestabilities();let c=a.length,f=!1;const y=function(b){f=f||b,c--,0==c&&s(f)};a.forEach(function(b){b.whenStable(y)})})}findTestabilityInTree(t,e,s){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:s?O().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Gl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Is=new h.OlP("EventManagerPlugins");let Pe=(()=>{class n{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,a){return this._findPluginFor(s).addEventListener(e,s,a)}addGlobalEventListener(e,s,a){return this._findPluginFor(s).addGlobalEventListener(e,s,a)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const a=this._plugins;for(let c=0;c<a.length;c++){const f=a[c];if(f.supports(e))return this._eventNameToPlugin.set(e,f),f}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(Is),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Yt{constructor(t){this._doc=t}addGlobalEventListener(t,e,s){const a=O().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,s)}}let Ys=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Hn=(()=>{class n extends Ys{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,a){e.forEach(c=>{const f=this._doc.createElement("style");f.textContent=c,a.push(s.appendChild(f))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(Qs),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(e,a,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Qs))}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Qs(n){O().remove(n)}const ds={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qr=/%COMP%/g;function br(n,t,e){for(let s=0;s<t.length;s++){let a=t[s];Array.isArray(a)?br(n,a,e):(a=a.replace(Qr,n),e.push(a))}return e}function Jr(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ui=(()=>{class n{constructor(e,s,a){this.eventManager=e,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Xr(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case h.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new Ka(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(e),a}case 1:case h.ifc.ShadowDom:return new Za(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const a=br(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(Pe),h.LFG(Hn),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Xr{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ds[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,s){t&&t.insertBefore(e,s)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let s="string"==typeof t?document.querySelector(t):t;if(!s)throw new Error(`The selector "${t}" did not match any elements`);return e||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,s,a){if(a){e=a+":"+e;const c=ds[a];c?t.setAttributeNS(c,e,s):t.setAttribute(e,s)}else t.setAttribute(e,s)}removeAttribute(t,e,s){if(s){const a=ds[s];a?t.removeAttributeNS(a,e):t.removeAttribute(`${s}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,s,a){a&(h.JOm.DashCase|h.JOm.Important)?t.style.setProperty(e,s,a&h.JOm.Important?"important":""):t.style[e]=s}removeStyle(t,e,s){s&h.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,s){t[e]=s}setValue(t,e){t.nodeValue=e}listen(t,e,s){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Jr(s)):this.eventManager.addEventListener(t,e,Jr(s))}}class Ka extends Xr{constructor(t,e,s,a){super(t),this.component=s;const c=br(a+"-"+s.id,s.styles,[]);e.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Qr,a+"-"+s.id),this.hostAttr="_nghost-%COMP%".replace(Qr,a+"-"+s.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const s=super.createElement(t,e);return super.setAttribute(s,this.contentAttr,""),s}}class Za extends Xr{constructor(t,e,s,a){super(t),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=br(a.id,a.styles,[]);for(let f=0;f<c.length;f++){const y=document.createElement("style");y.textContent=c[f],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,s){return super.insertBefore(this.nodeOrShadowRoot(t),e,s)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let aa=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,a){return e.addEventListener(s,a,!1),()=>this.removeEventListener(e,s,a)}removeEventListener(e,s,a){return e.removeEventListener(s,a)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ya={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Zi=new h.OlP("HammerGestureConfig"),Zl=new h.OlP("HammerLoader");let Js=(()=>{class n{constructor(){this.events=[],this.overrides={}}buildHammer(e){const s=new Hammer(e,this.options);s.get("pinch").set({enable:!0}),s.get("rotate").set({enable:!0});for(const a in this.overrides)s.get(a).set(this.overrides[a]);return s}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Qa=[{provide:Is,useClass:(()=>{class n extends Yt{constructor(e,s,a,c){super(e),this._config=s,this.console=a,this.loader=c,this._loaderPromise=null}supports(e){return!(!Ya.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,s,a){const c=this.manager.getZone();if(s=s.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let f=!1,y=()=>{f=!0};return this._loaderPromise.then(()=>{window.Hammer?f||(y=this.addEventListener(e,s,a)):y=()=>{}}).catch(()=>{y=()=>{}}),()=>{y()}}return c.runOutsideAngular(()=>{const f=this._config.buildHammer(e),y=function(b){c.runGuarded(function(){a(b)})};return f.on(s,y),()=>{f.off(s,y),"function"==typeof f.destroy&&f.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe),h.LFG(Zi),h.LFG(h.c2e),h.LFG(Zl,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[oe,Zi,h.c2e,[new h.FiY,Zl]]},{provide:Zi,useClass:Js,deps:[]}];let Yl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Qa}),n})();const Ja=["alt","control","meta","shift"],Ql={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Jl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xs=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,s,a){const c=n.parseEventName(s),f=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(e,c.domEventName,f))}static parseEventName(e){const s=e.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(s.pop());let f="";if(Ja.forEach(b=>{const T=s.indexOf(b);T>-1&&(s.splice(T,1),f+=b+".")}),f+=c,0!=s.length||0===c.length)return null;const y={};return y.domEventName=a,y.fullKey=f,y}static getEventFullKey(e){let s="",a=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&sr.hasOwnProperty(t)&&(t=sr[t]))}return Ql[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Ja.forEach(c=>{c!=a&&Jl[c](e)&&(s+=c+".")}),s+=a,s}static eventCallback(e,s,a){return c=>{n.getEventFullKey(c)===e&&a.runGuarded(()=>s(c))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ue=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function(){ea.makeCurrent(),Ki.init()},multi:!0},{provide:oe,useFactory:function(){return(0,h.RDi)(document),document},deps:[]}]),ht=[[],{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function(){return new h.qLn},deps:[]},{provide:Is,useClass:aa,multi:!0,deps:[oe,h.R0b,h.Lbi]},{provide:Is,useClass:Xs,multi:!0,deps:[oe]},[],{provide:Ui,useClass:Ui,deps:[Pe,Hn,h.AFp]},{provide:h.FYo,useExisting:Ui},{provide:Ys,useExisting:Hn},{provide:Hn,useClass:Hn,deps:[oe]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Pe,useClass:Pe,deps:[Is,h.R0b]},{provide:class{},useClass:Gl,deps:[]},[]];let Xe=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:h.AFp,useValue:e.appId},{provide:$d,useExisting:h.AFp},bi]}}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ht,imports:[qs,h.hGG]}),n})();"undefined"!=typeof window&&window;class hc{}const Ji="*";function sp(n,t){return{type:7,name:n,definitions:t,options:{}}}function Xa(n,t=null){return{type:4,styles:t,timings:n}}function eu(n,t=null){return{type:2,steps:n,options:t}}function fs(n){return{type:6,styles:n,offset:null}}function To(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Zd(n){Promise.resolve(null).then(n)}class Io{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Zd(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class tu{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,s=0,a=0;const c=this.players.length;0==c?Zd(()=>this._onFinish()):this.players.forEach(f=>{f.onDone(()=>{++e==c&&this._onFinish()}),f.onDestroy(()=>{++s==c&&this._onDestroy()}),f.onStart(()=>{++a==c&&this._onStart()})}),this.totalTime=this.players.reduce((f,y)=>Math.max(f,y.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(s=>{const a=s.totalTime?Math.min(1,e/s.totalTime):1;s.setPosition(a)})}getPosition(){const t=this.players.reduce((e,s)=>null===e||s.totalTime>e.totalTime?s:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}const As=[{id:"autumn",name:"\u041e\u0441\u0435\u043d\u044c",image:"assets/bgs/autumn.jpg"},{id:"beach",name:"\u041f\u043b\u044f\u0436",image:"assets/bgs/beach.jpg"},{id:"city",name:"\u0413\u043e\u0440\u043e\u0434",image:"assets/bgs/city.jpg"},{id:"fire",name:"\u041e\u0433\u043e\u043d\u044c",image:"assets/bgs/fire.jpg"},{id:"flowers",name:"\u0426\u0432\u0435\u0442\u044b",image:"assets/bgs/flowers.jpg"},{id:"guitar",name:"\u0413\u0438\u0442\u0430\u0440\u0430",image:"assets/bgs/guitar.jpg"},{id:"joker",name:"\u0414\u0436\u043e\u043a\u0435\u0440",image:"assets/bgs/joker.jpg"},{id:"leaf",name:"\u041b\u0438\u0441\u0442",image:"assets/bgs/leaf.jpg"},{id:"minimalistic_city",name:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0433\u043e\u0440\u043e\u0434",image:"assets/bgs/minimalistic_city.jpg"},{id:"neon_samurai",name:"\u041d\u0435\u043e\u043d\u043e\u0432\u044b\u0439 \u0441\u0430\u043c\u0443\u0440\u0430\u0439",image:"assets/bgs/neon_samurai.jpg"},{id:"paint",name:"\u041a\u0440\u0430\u0441\u043a\u0438",image:"assets/bgs/paint.jpg"},{id:"rainforest",name:"\u041b\u0435\u0441",image:"assets/bgs/rainforest.jpg"},{id:"shapes1",name:"\u0424\u0438\u0433\u0443\u0440\u044b 1",image:"assets/bgs/shapes1.jpg"},{id:"shapes2",name:"\u0424\u0438\u0433\u0443\u0440\u044b 2",image:"assets/bgs/shapes2.jpg"},{id:"sky",name:"\u041d\u0435\u0431\u043e",image:"assets/bgs/sky.jpg"},{id:"squares",name:"\u041a\u0432\u0430\u0434\u0440\u0430\u0442\u044b",image:"assets/bgs/squares.jpg"}];function Ao(n){return As.find(t=>t.id===n)}var Pr=N(9765),fa=N(7971);class Jn extends Pr.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fa.N;return this._value}next(t){super.next(this._value=t)}}var op=N(3320);function gc(n){return(0,op.contrastColor)({bgColor:n.toUpperCase(),threshold:128})}function Ss(n,t){for(const[e,s]of Object.entries(t))n.style[e]=s}function nu(n,t){return n.map((e,s)=>e.map((a,c)=>t(a,{y:s,x:c})))}function Nn(n,t){for(let e=0;e<n.length;e++)for(let s=0;s<n[e].length;s++)t(n[e][s],{y:e,x:s})}function Yd(n){return{x:Math.floor(Math.random()*n.x),y:Math.floor(Math.random()*n.y)}}function r_(n){return n[Math.floor(Math.random()*n.length)]}const ap={width:"100%",height:"100%",objectFit:"contain"};class i_{constructor(t){this.value=t}get html(){if("object"!=typeof this.value){let t=document.createElement("p");switch(t.style.margin="0px",typeof this.value){case"string":case"number":t.innerHTML=this.value}return t}switch(this.value.constructor.name){case"HTMLImageElement":return Ss(this.value,ap),this.value;case"HTMLParagraphElement":return this.value;default:if("image"===this.value.type){const t=document.createElement("img");return t.src=this.value.value,t.draggable=!1,t.style.padding="5px",t.style.boxSizing="border-box",Ss(t,ap),t}if("text"===this.value.type){let t=document.createElement("p");return t.style.margin="0px",t.innerHTML=this.value.value,t}{let t=document.createElement("p");return t.style.margin="0px",t.innerHTML=JSON.stringify(this.value),t}}}}class lp{constructor(t,e){e?(this.type=t,this.data=e):this.type="unknown"}}const up={position:"absolute",border:"2px solid black",boxSizing:"border-box",transitionDuration:"250ms",background:"white",display:"grid",placeItems:"center",fontSize:"44px",zIndex:"2",userSelect:"none"};class o_{constructor(t,e,s,a,c,f){var y,b,T;this.transformations=[],this._isMovingInto=!1,this.position={x:null!=t?t:0,y:null!=e?e:0},this.currentVariation=r_(s.variations),this.displayValue=new i_(this.currentVariation),this.value=s,this.trCallback=null!=c?c:null,this._cellSize=null!==(y=f.cellDisplaySize)&&void 0!==y?y:100,this._element=document.createElement("div"),this._element.childNodes.length>0?this._element.replaceChild(this.displayValue.html,this._element.childNodes[0]):this._element.appendChild(this.displayValue.html),Ss(this._element,Object.assign(Object.assign({width:this._cellSize+"px",height:this._cellSize+"px"},up),{fontSize:Math.floor(this._cellSize/3)+"px"})),this._updateAppearance(),function(n,t){Ss(n,{left:t.x+"px",top:t.y+"px"})}(this._element,{x:(null!==(b=this._cellSize)&&void 0!==b?b:100)*this.position.x,y:(null!==(T=this._cellSize)&&void 0!==T?T:100)*this.position.y}),this.newCellAnim();try{a.appendChild(this._element)}catch(x){console.error(`Could not add Cell(${t}, ${e}) due to an unknown error.`),console.log(x)}}scaleAnim(){this._element.animate([{transform:"scale(1)"},{transform:"scale(1.1)"},{transform:"scale(1)"}],{duration:250,easing:"ease"})}newCellAnim(){this._element.animate([{borderColor:"red"},{borderColor:"black"}],{duration:3e3,easing:"linear"}),this._element.animate([{transform:"scale(0)"},{transform:"scale(1)"}],{duration:450,easing:"ease"})}setValue(t){this.value=t,this.currentVariation=r_(t.variations),this._updateDisplayValue(),this.scaleAnim()}_updateAppearance(){var t,e;Ss(this._element,{background:null!==(t=this.value.color)&&void 0!==t?t:"white",color:gc(null!==(e=this.value.color)&&void 0!==e?e:"white")})}_updateDisplayValue(){var t;this.displayValue=new i_(this.currentVariation);const e=this.displayValue.html;"image"===this.currentVariation.type&&"#FFFFFF"===gc(null!==(t=this.value.color)&&void 0!==t?t:"white")&&(e.style.filter="invert(1)"),this._element.childNodes.length>0?this._element.replaceChild(e,this._element.childNodes[0]):this._element.appendChild(e),this._updateAppearance()}moveTo(t){this.position=t,this.transformations.push(new lp("moving",{from:this.position,to:t}))}moveInto(t){this.position=t,this.transformations.push(new lp("movingInto",{from:this.position,to:t})),this._isMovingInto=!0,this._element.style.zIndex="0"}applyAllTransformations(){let t,e,s;for(const c of this.transformations)t||(t=c.data.from),e=c.data.to,(!s||"movingInto"!==s)&&(s=c.type);let a=new lp(s,{from:t,to:e});this.applyTransformation(a)}applyTransformation(t){var e,s,a;if(null===(e=t.data)||void 0===e?void 0:e.to){const{to:c}=t.data,f=t.type;this._element.style.left=(null!==(s=this._cellSize)&&void 0!==s?s:100)*c.x+"px",this._element.style.top=(null!==(a=this._cellSize)&&void 0!==a?a:100)*c.y+"px","movingInto"===f&&setTimeout(()=>{this.trCallback({x:c.x,y:c.y})},250)}}destroy(){this._element.remove()}isEqualTo(t){return t.value.id===this.value.id}}const So=[{id:"v",variations:[{type:"text",value:"\u03c5"},{type:"text",value:"\u043c/\u0441"},{type:"image",value:"assets/symbols/speedometer.png"}],color:"#eee4da",scoreValue:0},{id:"L",variations:[{type:"text",value:"L"},{type:"text",value:"\u043c."},{type:"image",value:"assets/symbols/ruler.png"}],color:"#ead3a8",scoreValue:2},{id:"t",variations:[{type:"text",value:"t"},{type:"text",value:"\u0441\u0435\u043a."},{type:"image",value:"assets/symbols/clock.png"}],color:"#f3b27a",scoreValue:4},{id:"m",variations:[{type:"text",value:"m"},{type:"text",value:"\u043a\u0433"},{type:"image",value:"assets/symbols/scale.png"}],color:"#f68d56",scoreValue:8},{id:"V",variations:[{type:"text",value:"V"},{type:"text",value:"\u043c\xb3"},{type:"image",value:"assets/symbols/cube.png"}],color:"#f65e3b",scoreValue:16},{id:"ro",variations:[{type:"text",value:"\u03c1"},{type:"text",value:"\u043a\u0433/\u043c\xb3"},{type:"image",value:"assets/symbols/plotnost.png"}],color:"#ff3b0e",scoreValue:32},{id:"p",variations:[{type:"text",value:"p"},{type:"text",value:"\u041f\u0430."},{type:"image",value:"assets/symbols/press.png"}],color:"#edcf72",scoreValue:64},{id:"g",variations:[{type:"text",value:"g"},{type:"text",value:"\u043c/\u0441\xb2"},{type:"image",value:"assets/symbols/uskorenie.png"}],color:"#eac752",scoreValue:128},{id:"F",variations:[{type:"text",value:"F"},{type:"text",value:"\u041d."},{type:"image",value:"assets/symbols/dynamometer.png"}],color:"#dbb435",scoreValue:256},{id:"A",variations:[{type:"text",value:"A"},{type:"text",value:"\u0414\u0436."},{type:"image",value:"assets/symbols/work.png"}],color:"#d2a81b",scoreValue:512},{id:"P",variations:[{type:"text",value:"P"},{type:"text",value:"\u0412\u0430\u0442\u0442."},{type:"image",value:"assets/symbols/motor.png"}],color:"#b28a00",scoreValue:1024},{id:"R",variations:[{type:"text",value:"R"},{type:"text",value:"\u041e\u043c."},{type:"image",value:"assets/symbols/resistance.png"}],color:"#3e3933",scoreValue:2048},{id:"U",variations:[{type:"text",value:"U"},{type:"text",value:"\u0412."},{type:"image",value:"assets/symbols/voltmeter.png"}],color:"#191715",scoreValue:4096},{id:"I",variations:[{type:"text",value:"I"},{type:"text",value:"\u0410."},{type:"image",value:"assets/symbols/amperemeter.png"}],color:"#3e3933",scoreValue:8192},{id:"q",variations:[{type:"text",value:"q"},{type:"text",value:"\u041a\u043b."}],color:"#3e3933",scoreValue:16384},{id:"n",variations:[{type:"text",value:"\u03b7"},{type:"text",value:"%"}],scoreValue:32768}],ar=function(n){let t=[];for(const[e,s]of Object.entries(n))t.push({from:[s,s],result:n[parseInt(e)+1]});return t}(So),a0={position:"relative",backgroundImage:"repeating-linear-gradient(to right, transparent 0px 99px, black 99px 100px), repeating-linear-gradient(to bottom, transparent 0px 99px, black 99px 100px)",border:"2px solid black",borderBottomWidth:"1px",borderRightWidth:"1px"};class Qd{constructor(t,e){var s,a;this.cells=[],this.knownCellValues=[],this.lastCreatedCell=new Jn(""),this._trCallback=c=>{const f=this.cells.findIndex(y=>y.position.x===c.x&&y.position.y===c.y&&y._isMovingInto);-1!==f&&(!this.cells[f]||(this.cells[f].destroy(),this.cells.splice(f,1)))},this._fieldSize=null!==(s=null==e?void 0:e.fieldSize)&&void 0!==s?s:4,this._fieldDisplaySize=null!==(a=null==e?void 0:e.fieldDisplaySize)&&void 0!==a?a:400;for(let c=0;c<2;c++)this.knownCellValues.push(So[c].id);this.lastCreatedCell.next(""),this._element=document.createElement("div"),Ss(this._element,Object.assign(Object.assign({width:this._fieldDisplaySize+"px",height:this._fieldDisplaySize+"px"},a0),{backgroundImage:`repeating-linear-gradient(to right, transparent 0px ${this._fieldDisplaySize/this._fieldSize-1}px, black ${this._fieldDisplaySize/this._fieldSize-1}px ${this._fieldDisplaySize/this._fieldSize}px), \n                                repeating-linear-gradient(to bottom, transparent 0px ${this._fieldDisplaySize/this._fieldSize-1}px, black ${this._fieldDisplaySize/this._fieldSize-1}px ${this._fieldDisplaySize/this._fieldSize}px)`}));try{t.appendChild(this._element)}catch(c){console.error("Could not add Field to the page due to an unknown error."),console.error(c)}for(let c=0;c<2;c++)this.addRandomCell()}addRandomCell(){let t=Yd({x:this._fieldSize,y:this._fieldSize});for(;this.isOccupied(t);)t=Yd({x:this._fieldSize,y:this._fieldSize});const e=(n=r_(this.knownCellValues),So.find(t=>n===t.id));var n;e||console.error("Can't add a random Cell, because couldn't get a random CellValue"),this.cells.push(new o_(t.x,t.y,e,this._element,this._trCallback,{cellDisplaySize:this._fieldDisplaySize/this._fieldSize}))}getCellAt(t){const{x:e,y:s}=t,a=this.cells.filter(f=>f.position.x===e&&f.position.y===s),c={main:null,other:[]};return 1===a.length?c.main=a[0]:a.length>1&&(c.main=a[0],c.other=a.slice(1)),c}get _cellGrid(){let t=Array.from({length:this._fieldSize},e=>Array.from({length:this._fieldSize},s=>({main:null,other:[]})));return t=nu(t,(e,s)=>this.getCellAt(s)),t}isOccupied(t){return null!==this.getCellAt(t).main}slide(){let t=this._cellGrid;t=t.map(e=>{const s=e.filter(a=>null!==a.main);return s.concat(Array(this._fieldSize-s.length).fill({main:null,other:[]}))}),Nn(t,(e,s)=>{e.main&&e.main.moveTo(s);for(const a of e.other)a.moveTo(s)})}combine(){let t=0;return this._cellGrid.forEach((s,a)=>{let c=s;c.forEach((f,y)=>{const b=f,T=c[y+1];if(b&&T&&null!==b.main&&null!==T.main){const x=b.main,k=T.main;if(function(n,t){return!!ar.find(e=>e.from[0]===n&&e.from[1]===t)}(x.value,k.value)){const Z=function(n,t){return ar.find(e=>e.from[0]===n&&e.from[1]===t).result}(x.value,k.value);x.setValue(Z),k.moveInto(x.position),c[y]=Object.assign(Object.assign({},b),{main:x}),c[y+1]=Object.assign(Object.assign({},T),{main:null}),t+=Z.scoreValue}}})}),t}applyTransformations(){this.cells.forEach(t=>t.applyAllTransformations())}transpose(){function t(s){s.transformations=s.transformations.map(a=>{let c=a;if(c.data){const{from:f,to:y}=c.data;c.data.from={x:f.y,y:f.x},c.data.to={x:y.y,y:y.x}}return c})}Nn(this._cellGrid,(s,a)=>{s.main&&(t(s.main),s.main.moveTo({x:a.y,y:a.x}));for(const c of s.other)t(c),c.moveTo({x:a.y,y:a.x})})}flip(){const t=this._fieldSize;function e(a){a.transformations=a.transformations.map(c=>{let f=c;if(f.data){const{from:y,to:b}=f.data;f.data.from.x=t-1-y.x,f.data.to.x=t-1-b.x}return f})}Nn(this._cellGrid,(a,c)=>{a.main&&(e(a.main),a.main.moveTo({x:t-1-c.x,y:c.y}));for(const f of a.other)e(f),f.moveTo({x:t-1-c.x,y:c.y})})}isSpaceAvailable(){let t=!1;return Nn(this._cellGrid,s=>{null===s.main&&(t=!0)}),t}canMove(){let t=!1,e=this._cellGrid;e=e.map(c=>{const f=c.filter(y=>null!==y.main);return f.concat(Array(this._fieldSize-f.length).fill({main:null,other:[]}))});let s=nu(e,(c,f)=>{const{x:y,y:b}=f;let T=e;return T[y][b]=c,T});Nn(e,c=>{null===c.main&&(t=!0)});const a=c=>{c.forEach((f,y)=>{if(y===this._fieldSize-1)return;const T=c[y+1];f.main&&T.main&&f.main.isEqualTo(T.main)&&(t=!0)})};return e.forEach(a),s.forEach(a),t}saveField(){this._prevGrid=this.getValueGrid()}getValueGrid(){return nu(this._cellGrid,s=>{var a;return s.main?null===(a=s.main)||void 0===a?void 0:a.value.id:null})}hasChanged(){const t=this.getValueGrid();return!!this._prevGrid&&!function(n,t){let e=!0;return Nn(n,(s,a)=>{const{x:c,y:f}=a;s!==t[f][c]&&(e=!1)}),e}(t,this._prevGrid)}_removeAllCells(){for(let t=this.cells.length-1;t>=0;t--)this.cells[t].destroy(),this.cells.splice(t,1)}reset(){this._removeAllCells(),this.knownCellValues=[];for(let t=0;t<2;t++)this.knownCellValues.push(So[t].id);this.lastCreatedCell.next(""),this._prevGrid=void 0,this.addRandomCell(),this.addRandomCell()}}var Tn=(()=>{return(n=Tn||(Tn={}))[n.Up=0]="Up",n[n.Right=1]="Right",n[n.Down=2]="Down",n[n.Left=3]="Left",Tn;var n})(),wr=(()=>{return(n=wr||(wr={})).MoveLeft="mvL",n.MoveRight="mvR",n.MoveUp="mvU",n.MoveDown="mvD",wr;var n})(),ps=(()=>{return(n=ps||(ps={})).Transpose="transpose",n.Slide="slide",n.Combine="combine",n.ApplyTransformations="applytrans",n.Flip="flip",ps;var n})();class pa{constructor(t,e){this.score=new Jn(0),this.isGameOver=new Jn(!1);const{fieldSize:s,fieldDisplaySize:a,keybinds:c,debugKeybinds:f}=null!=e?e:{};this.field=new Qd(t,{fieldSize:s,fieldDisplaySize:a}),document.addEventListener("keydown",y=>{if(this.isGameOver.value||y.repeat)return;let b=[];c&&b.push(...Object.entries(c)),f&&b.push(...Object.entries(f));for(const[T,x]of b)T===y.key&&this.callAction(x)})}addScore(t){this.score.next(this.score.value+t)}callAction(t){switch(t){case wr.MoveLeft:this.move(Tn.Left);break;case wr.MoveRight:this.move(Tn.Right);break;case wr.MoveUp:this.move(Tn.Up);break;case wr.MoveDown:this.move(Tn.Down);break;case ps.Slide:this.field.slide();break;case ps.Combine:this.field.combine();break;case ps.Transpose:this.field.transpose();break;case ps.ApplyTransformations:this.field.applyTransformations();break;case ps.Flip:this.field.flip()}}move(t){switch(this.field.saveField(),t){case Tn.Left:this.field.slide(),this.addScore(this.field.combine()),this.field.slide();break;case Tn.Right:this.field.flip(),this.field.slide(),this.addScore(this.field.combine()),this.field.slide(),this.field.flip(),this.field.applyTransformations();break;case Tn.Up:this.field.flip(),this.field.transpose(),this.field.slide(),this.addScore(this.field.combine()),this.field.slide(),this.field.transpose(),this.field.flip(),this.field.applyTransformations();break;case Tn.Down:this.field.transpose(),this.field.flip(),this.field.slide(),this.addScore(this.field.combine()),this.field.slide(),this.field.flip(),this.field.transpose(),this.field.applyTransformations()}this.field.applyTransformations(),this.field.canMove()?(this.isGameOver.next(!1),this.field.isSpaceAvailable()&&this.field.hasChanged()&&this.field.addRandomCell()):this.isGameOver.next(!0)}}const Ro={keybinds:{ArrowUp:wr.MoveUp,ArrowDown:wr.MoveDown,ArrowLeft:wr.MoveLeft,ArrowRight:wr.MoveRight},fieldDisplaySize:375};let ga=(()=>{class n{constructor(){this.isMenuShown=new Jn(!0),this.isReady=new Jn(!1)}createGameInstance(e){this.game=new pa(e,Ro),this.isReady.next(!0)}getGameOver(){return this.game.isGameOver}getScore(){return this.game.score}getLastCreatedCell(){return this.game.field.lastCreatedCell}reset(){var e,s,a;null===(e=this.game)||void 0===e||e.score.next(0),null===(s=this.game)||void 0===s||s.isGameOver.next(!1),null===(a=this.game)||void 0===a||a.field.reset()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ru=(()=>{class n{constructor(e){this.document=e,this._theme=new Jn("light"),this._bg=new Jn(""),this._showControls=new Jn(!1),this.loadSavedData()}loadSavedData(){let e=window.localStorage.getItem("physics-n2048");if(e){let s=JSON.parse(e);const{theme:a,bg:c,showControls:f}=s;this._theme.next(null!=a?a:"light"),this._bg.next(null!=c?c:""),this._showControls.next(null!=f&&f)}}saveValue(e,s){let a=window.localStorage.getItem("physics-n2048");if(a)var c=JSON.parse(a);else c={};c[e]=s,window.localStorage.setItem("physics-n2048",JSON.stringify(c))}set theme(e){this._theme.next(e),this.document.body.style.setProperty("--theme",e),this.saveValue("theme",e)}get theme(){return this._theme.value}get themeObserver(){return this._theme}set bg(e){this._bg.next(e),this.saveValue("bg",e)}get bg(){return this._bg.value}get bgObserver(){return this._bg}set showControls(e){this._showControls.next(e),this.saveValue("showControls",e)}get showControls(){return this._showControls.value}get showControlsObserver(){return this._showControls}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Vr=N(4402),Et=N(5917),Jd=N(4869),iu=N(9796),Gn=N(7393);class yc extends Gn.L{notifyNext(t,e,s,a,c){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Po extends Gn.L{constructor(t,e,s){super(),this.parent=t,this.outerValue=e,this.outerIndex=s,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var l0=N(7444),ti=N(7574);function su(n,t,e,s,a=new Po(n,e,s)){if(!a.closed)return t instanceof ti.y?t.subscribe(a):(0,l0.s)(t)(a)}var Xd=N(6693);const cp={};class l_{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new gs(t,this.resultSelector))}}class gs extends yc{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(cp),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let s=0;s<e;s++)this.add(su(this,t[s],void 0,s))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,s){const a=this.values,f=this.toRespond?a[s]===cp?--this.toRespond:this.toRespond:0;a[s]=e,0===f&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(s){return void this.destination.error(s)}this.destination.next(e)}}const ma=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var th=N(3282);function Mo(...n){return(0,th.J)(1)((0,Et.of)(...n))}var Ti=N(9193);function Ec(n){return new ti.y(t=>{let e;try{e=n()}catch(a){return void t.error(a)}return(e?(0,Vr.D)(e):(0,Ti.c)()).subscribe(t)})}var u_=N(2441),xt=N(8002),No=N(5345);function dr(n,t){return"function"==typeof t?e=>e.pipe(dr((s,a)=>(0,Vr.D)(n(s,a)).pipe((0,xt.U)((c,f)=>t(s,c,a,f))))):e=>e.lift(new nh(n))}class nh{constructor(t){this.project=t}call(t,e){return e.subscribe(new _a(t,this.project))}}class _a extends No.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const s=this.index++;try{e=this.project(t,s)}catch(a){return void this.destination.error(a)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const s=new No.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,No.ft)(t,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const dp=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function bn(n){return t=>0===n?(0,Ti.c)():t.lift(new hp(n))}class hp{constructor(t){if(this.total=t,this.total<0)throw new dp}call(t,e){return e.subscribe(new u0(t,this.total))}}class u0 extends Gn.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,s=++this.count;s<=e&&(this.destination.next(t),s===e&&(this.destination.complete(),this.unsubscribe()))}}function Rs(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(a){return a.lift(new rh(n,t,e))}}class rh{constructor(t,e,s=!1){this.accumulator=t,this.seed=e,this.hasSeed=s}call(t,e){return e.subscribe(new fp(t,this.accumulator,this.seed,this.hasSeed))}}class fp extends Gn.L{constructor(t,e,s,a){super(t),this.accumulator=e,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let s;try{s=this.accumulator(this.seed,t,e)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function Ii(n,t){return function(s){return s.lift(new c_(n,t))}}class c_{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new el(t,this.predicate,this.thisArg))}}class el extends Gn.L{constructor(t,e,s){super(t),this.predicate=e,this.thisArg=s,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(s){return void this.destination.error(s)}e&&this.destination.next(t)}}function ui(n){return function(e){const s=new tl(n),a=e.lift(s);return s.caught=a}}class tl{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Oo(t,this.selector,this.caught))}}class Oo extends No.Ds{constructor(t,e,s){super(t),this.selector=e,this.caught=s}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new No.IY(this);this.add(s);const a=(0,No.ft)(e,s);a!==s&&this.add(a)}}}var ci=N(9773);function xo(n,t){return(0,ci.zg)(n,t,1)}function au(n){return function(e){return 0===n?(0,Ti.c)():e.lift(new Cc(n))}}class Cc{constructor(t){if(this.total=t,this.total<0)throw new dp}call(t,e){return e.subscribe(new bc(t,this.total))}}class bc extends Gn.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,s=this.total,a=this.count++;e.length<s?e.push(t):e[a%s]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<s;c++){const f=e++%s;t.next(a[f])}}t.complete()}}function pp(n=va){return t=>t.lift(new ih(n))}class ih{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ko(t,this.errorFactory))}}class ko extends Gn.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function va(){return new ma}function sh(n=null){return t=>t.lift(new gp(n))}class gp{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new mp(t,this.defaultValue))}}class mp extends Gn.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var oh=N(4487);function Fo(n,t){const e=arguments.length>=2;return s=>s.pipe(n?Ii((a,c)=>n(a,c,s)):oh.y,bn(1),e?sh(t):pp(()=>new ma))}var di=N(8307),_p=N(1307),Ea=N(5319);class nl{constructor(t){this.callback=t}call(t,e){return e.subscribe(new h_(t,this.callback))}}class h_ extends Gn.L{constructor(t,e){super(t),this.add(new Ea.w(e))}}class ms{constructor(t,e){this.id=t,this.url=e}}class yp extends ms{constructor(t,e,s="imperative",a=null){super(t,e),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lo extends ms{constructor(t,e,s){super(t,e),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lu extends ms{constructor(t,e,s){super(t,e),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vp extends ms{constructor(t,e,s){super(t,e),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uu extends ms{constructor(t,e,s,a){super(t,e),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ep extends ms{constructor(t,e,s,a){super(t,e),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ca extends ms{constructor(t,e,s,a,c){super(t,e),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class f_ extends ms{constructor(t,e,s,a){super(t,e),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p_ extends ms{constructor(t,e,s,a){super(t,e),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cp{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bp{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class g_{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vo{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wp{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tp{constructor(t,e,s){this.routerEvent=t,this.position=e,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class m_{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function rl(n){return new m_(n)}const lh="ngNavigationCancelingError";function wc(n){const t=Error("NavigationCancelingError: "+n);return t[lh]=!0,t}function y_(n,t,e){const s=e.path.split("/");if(s.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||s.length<n.length))return null;const a={};for(let c=0;c<s.length;c++){const f=s[c],y=n[c];if(f.startsWith(":"))a[f.substring(1)]=y;else if(f!==y.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function Xi(n,t){const e=n?Object.keys(n):void 0,s=t?Object.keys(t):void 0;if(!e||!s||e.length!=s.length)return!1;let a;for(let c=0;c<e.length;c++)if(a=e[c],!E_(n[a],t[a]))return!1;return!0}function E_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),s=[...t].sort();return e.every((a,c)=>s[c]===a)}return n===t}function Tc(n){return Array.prototype.concat.apply([],n)}function il(n){return n.length>0?n[n.length-1]:null}function zn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function ni(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Vr.D)(Promise.resolve(n)):(0,Et.of)(n)}const uh={exact:function b_(n,t,e){if(!Te(n.segments,t.segments)||!m(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const s in t.children)if(!n.children[s]||!b_(n.children[s],t.children[s],e))return!1;return!0},subset:v},Ic={exact:function(n,t){return Xi(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>E_(n[e],t[e]))},ignored:()=>!0};function C_(n,t,e){return uh[e.paths](n.root,t.root,e.matrixParams)&&Ic[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function v(n,t,e){return p(n,t,t.segments,e)}function p(n,t,e,s){if(n.segments.length>e.length){const a=n.segments.slice(0,e.length);return!(!Te(a,e)||t.hasChildren()||!m(a,e,s))}if(n.segments.length===e.length){if(!Te(n.segments,e)||!m(n.segments,e,s))return!1;for(const a in t.children)if(!n.children[a]||!v(n.children[a],t.children[a],s))return!1;return!0}{const a=e.slice(0,n.segments.length),c=e.slice(n.segments.length);return!!(Te(n.segments,a)&&m(n.segments,a,s)&&n.children[Jt])&&p(n.children[Jt],t,c,s)}}function m(n,t,e){return t.every((s,a)=>Ic[e](n[a].parameters,s.parameters))}class C{constructor(t,e,s){this.root=t,this.queryParams=e,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rl(this.queryParams)),this._queryParamMap}toString(){return yn.serialize(this)}}class I{constructor(t,e){this.segments=t,this.children=e,this.parent=null,zn(e,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vn(this)}}class P{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=rl(this.parameters)),this._parameterMap}toString(){return hh(this)}}function Te(n,t){return n.length===t.length&&n.every((e,s)=>e.path===t[s].path)}class Be{}class at{parse(t){const e=new d0(t);return new C(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${Mr(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const s=n[e];return Array.isArray(s)?s.map(a=>`${ba(e)}=${ba(a)}`).join("&"):`${ba(e)}=${ba(s)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const yn=new at;function vn(n){return n.segments.map(t=>hh(t)).join("/")}function Mr(n,t){if(!n.hasChildren())return vn(n);if(t){const e=n.children[Jt]?Mr(n.children[Jt],!1):"",s=[];return zn(n.children,(a,c)=>{c!==Jt&&s.push(`${c}:${Mr(a,!1)}`)}),s.length>0?`${e}(${s.join("//")})`:e}{const e=function(n,t){let e=[];return zn(n.children,(s,a)=>{a===Jt&&(e=e.concat(t(s,a)))}),zn(n.children,(s,a)=>{a!==Jt&&(e=e.concat(t(s,a)))}),e}(n,(s,a)=>a===Jt?[Mr(n.children[Jt],!1)]:[`${a}:${Mr(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${vn(n)}/${e[0]}`:`${vn(n)}/(${e.join("//")})`}}function In(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ba(n){return In(n).replace(/%3B/gi,";")}function sl(n){return In(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ol(n){return decodeURIComponent(n)}function Dc(n){return ol(n.replace(/\+/g,"%20"))}function hh(n){return`${sl(n.path)}${function(n){return Object.keys(n).map(t=>`;${sl(t)}=${sl(n[t])}`).join("")}(n.parameters)}`}const Sp=/^[^\/()?;=#]+/;function ph(n){const t=n.match(Sp);return t?t[0]:""}const Rp=/^[^=?&#]+/,Bi=/^[^?&#]+/;class d0{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(s[Jt]=new I(t,e)),s}parseSegment(){const t=ph(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new P(ol(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ph(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const a=ph(this.remaining);a&&(s=a,this.capture(s))}t[ol(e)]=ol(s)}parseQueryParam(t){const e=function(n){const t=n.match(Rp);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const f=function(n){const t=n.match(Bi);return t?t[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const a=Dc(e),c=Dc(s);if(t.hasOwnProperty(a)){let f=t[a];Array.isArray(f)||(f=[f],t[a]=f),f.push(c)}else t[a]=c}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=ph(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):t&&(c=Jt);const f=this.parseChildren();e[c]=1===Object.keys(f).length?f[Jt]:new I([],f),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class T_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ri(t,this._root);return e?e.children.map(s=>s.value):[]}firstChild(t){const e=ri(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=du(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return du(t,this._root).map(e=>e.value)}}function ri(n,t){if(n===t.value)return t;for(const e of t.children){const s=ri(n,e);if(s)return s}return null}function du(n,t){if(n===t.value)return[t];for(const e of t.children){const s=du(n,e);if(s.length)return s.unshift(t),s}return[]}class io{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function gh(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class h0 extends T_{constructor(t,e){super(t),this.snapshot=e,D_(this,t)}toString(){return this.snapshot.toString()}}function I_(n,t){const e=function(n,t){const f=new Pp([],{},{},"",{},Jt,t,null,n.root,-1,{});return new g0("",new io(f,[]))}(n,t),s=new Jn([new P("",{})]),a=new Jn({}),c=new Jn({}),f=new Jn({}),y=new Jn(""),b=new hu(s,a,f,y,c,Jt,t,e.root);return b.snapshot=e.root,new h0(new io(b,[]),e)}class hu{constructor(t,e,s,a,c,f,y,b){this.url=t,this.params=e,this.queryParams=s,this.fragment=a,this.data=c,this.outlet=f,this.component=y,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(t=>rl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(t=>rl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function f0(n,t="emptyOnly"){const e=n.pathFromRoot;let s=0;if("always"!==t)for(s=e.length-1;s>=1;){const a=e[s],c=e[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(c.component)break;s--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(s))}class Pp{constructor(t,e,s,a,c,f,y,b,T,x,k){this.url=t,this.params=e,this.queryParams=s,this.fragment=a,this.data=c,this.outlet=f,this.component=y,this.routeConfig=b,this._urlSegment=T,this._lastPathIndex=x,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class g0 extends T_{constructor(t,e){super(e),this.url=t,D_(this,e)}toString(){return A_(this._root)}}function D_(n,t){t.value._routerState=n,t.children.forEach(e=>D_(n,e))}function A_(n){const t=n.children.length>0?` { ${n.children.map(A_).join(", ")} } `:"";return`${n.value}${t}`}function mh(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Xi(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Xi(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Xi(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Xi(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Mp(n,t){return Xi(n.params,t.params)&&function(n,t){return Te(n,t)&&n.every((e,s)=>Xi(e.parameters,t[s].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Mp(n.parent,t.parent))}function S_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const s=e.value;s._futureSnapshot=t.value;const a=function(n,t,e){return t.children.map(s=>{for(const a of e.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return S_(n,s,a);return S_(n,s)})}(n,t,e);return new io(s,a)}{if(n.shouldAttach(t.value)){const c=n.retrieve(t.value);if(null!==c){const f=c.route;return R_(t,f),f}}const s=function(n){return new hu(new Jn(n.url),new Jn(n.params),new Jn(n.queryParams),new Jn(n.fragment),new Jn(n.data),n.outlet,n.component,n)}(t.value),a=t.children.map(c=>S_(n,c));return new io(s,a)}}function R_(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)R_(n.children[e],t.children[e])}function wa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _h(n){return"object"==typeof n&&null!=n&&n.outlets}function P_(n,t,e,s,a){let c={};return s&&zn(s,(f,y)=>{c[y]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),new C(e.root===n?t:m0(e.root,n,t),c,a)}function m0(n,t,e){const s={};return zn(n.children,(a,c)=>{s[c]=a===t?e:m0(a,t,e)}),new I(n.segments,s)}class _0{constructor(t,e,s){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=s,t&&s.length>0&&wa(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(_h);if(a&&a!==il(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ac{constructor(t,e,s){this.segmentGroup=t,this.processChildren=e,this.index=s}}function v0(n,t,e){if(n||(n=new I([],{})),0===n.segments.length&&n.hasChildren())return yh(n,t,e);const s=function(n,t,e){let s=0,a=t;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=e.length)return c;const f=n.segments[a],y=e[s];if(_h(y))break;const b=`${y}`,T=s<e.length-1?e[s+1]:null;if(a>0&&void 0===b)break;if(b&&T&&"object"==typeof T&&void 0===T.outlets){if(!C0(b,T,f))return c;s+=2}else{if(!C0(b,{},f))return c;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,t,e),a=e.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const c=new I(n.segments.slice(0,s.pathIndex),{});return c.children[Jt]=new I(n.segments.slice(s.pathIndex),n.children),yh(c,0,a)}return s.match&&0===a.length?new I(n.segments,{}):s.match&&!n.hasChildren()?Op(n,t,e):s.match?yh(n,0,a):Op(n,t,e)}function yh(n,t,e){if(0===e.length)return new I(n.segments,{});{const s=function(n){return _h(n[0])?n[0].outlets:{[Jt]:n}}(e),a={};return zn(s,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[f]=v0(n.children[f],t,c))}),zn(n.children,(c,f)=>{void 0===s[f]&&(a[f]=c)}),new I(n.segments,a)}}function Op(n,t,e){const s=n.segments.slice(0,t);let a=0;for(;a<e.length;){const c=e[a];if(_h(c)){const b=CI(c.outlets);return new I(s,b)}if(0===a&&wa(e[0])){s.push(new P(n.segments[t].path,E0(e[0]))),a++;continue}const f=_h(c)?c.outlets[Jt]:`${c}`,y=a<e.length-1?e[a+1]:null;f&&y&&wa(y)?(s.push(new P(f,E0(y))),a+=2):(s.push(new P(f,{})),a++)}return new I(s,{})}function CI(n){const t={};return zn(n,(e,s)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[s]=Op(new I([],{}),0,e))}),t}function E0(n){const t={};return zn(n,(e,s)=>t[s]=`${e}`),t}function C0(n,t,e){return n==e.path&&Xi(t,e.parameters)}class Uo{constructor(t,e,s,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=s,this.forwardEvent=a}activate(t){const e=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,s,t),mh(this.futureState.root),this.activateChildRoutes(e,s,t)}deactivateChildRoutes(t,e,s){const a=gh(e);t.children.forEach(c=>{const f=c.value.outlet;this.deactivateRoutes(c,a[f],s),delete a[f]}),zn(a,(c,f)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(t,e,s){const a=t.value,c=e?e.value:null;if(a===c)if(a.component){const f=s.getContext(a.outlet);f&&this.deactivateChildRoutes(t,e,f.children)}else this.deactivateChildRoutes(t,e,s);else c&&this.deactivateRouteAndItsChildren(e,s)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const s=e.getContext(t.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){const s=e.getContext(t.value.outlet),a=s&&t.value.component?s.children:e,c=gh(t);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(t,e,s){const a=gh(e);t.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],s),this.forwardEvent(new wp(c.value.snapshot))}),t.children.length&&this.forwardEvent(new ro(t.value.snapshot))}activateRoutes(t,e,s){const a=t.value,c=e?e.value:null;if(mh(a),a===c)if(a.component){const f=s.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,f.children)}else this.activateChildRoutes(t,e,s);else if(a.component){const f=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),f.children.onOutletReAttached(y.contexts),f.attachRef=y.componentRef,f.route=y.route.value,f.outlet&&f.outlet.attach(y.componentRef,y.route.value),bI(y.route)}else{const y=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),b=y?y.module.componentFactoryResolver:null;f.attachRef=null,f.route=a,f.resolver=b,f.outlet&&f.outlet.activateWith(a,b),this.activateChildRoutes(t,null,f.children)}}else this.activateChildRoutes(t,null,s)}}function bI(n){mh(n.value),n.children.forEach(bI)}class xp{constructor(t,e){this.routes=t,this.module=e}}function fu(n){return"function"==typeof n}function Ta(n){return n instanceof C}const Rc=Symbol("INITIAL_VALUE");function Pc(){return dr(n=>function(...n){let t,e;return(0,Jd.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,iu.k)(n[0])&&(n=n[0]),(0,Xd.n)(n,e).lift(new l_(t))}(n.map(t=>t.pipe(bn(1),function(...n){const t=n[n.length-1];return(0,Jd.K)(t)?(n.pop(),e=>Mo(n,e,t)):e=>Mo(n,e)}(Rc)))).pipe(Rs((t,e)=>{let s=!1;return e.reduce((a,c,f)=>a!==Rc?a:(c===Rc&&(s=!0),s||!1!==c&&f!==e.length-1&&!Ta(c)?a:c),t)},Rc),Ii(t=>t!==Rc),(0,xt.U)(t=>Ta(t)?t:!0===t),bn(1)))}let kp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,s){1&e&&h._UZ(0,"router-outlet")},directives:function(){return[Q0]},encapsulation:2}),n})();function Fp(n,t=""){for(let e=0;e<n.length;e++){const s=n[e];w0(s,mP(t,s))}}function w0(n,t){n.children&&Fp(n.children,t)}function mP(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function al(n){const t=n.children&&n.children.map(al),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Jt&&(e.component=kp),e}function es(n){return n.outlet||Jt}function N_(n,t){const e=n.filter(s=>es(s)===t);return e.push(...n.filter(s=>es(s)!==t)),e}const T0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Mc(n,t,e){var s;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},T0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(t.matcher||y_)(e,n,t);if(!c)return Object.assign({},T0);const f={};zn(c.posParams,(b,T)=>{f[T]=b.path});const y=c.consumed.length>0?Object.assign(Object.assign({},f),c.consumed[c.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:y,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function Lp(n,t,e,s,a="corrected"){if(e.length>0&&function(n,t,e){return e.some(s=>Vp(n,t,s)&&es(s)!==Jt)}(n,e,s)){const f=new I(t,function(n,t,e,s){const a={};a[Jt]=s,s._sourceSegment=n,s._segmentIndexShift=t.length;for(const c of e)if(""===c.path&&es(c)!==Jt){const f=new I([],{});f._sourceSegment=n,f._segmentIndexShift=t.length,a[es(c)]=f}return a}(n,t,s,new I(e,n.children)));return f._sourceSegment=n,f._segmentIndexShift=t.length,{segmentGroup:f,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(s=>Vp(n,t,s))}(n,e,s)){const f=new I(n.segments,function(n,t,e,s,a,c){const f={};for(const y of s)if(Vp(n,e,y)&&!a[es(y)]){const b=new I([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===c?n.segments.length:t.length,f[es(y)]=b}return Object.assign(Object.assign({},a),f)}(n,t,e,s,n.children,a));return f._sourceSegment=n,f._segmentIndexShift=t.length,{segmentGroup:f,slicedSegments:e}}const c=new I(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}function Vp(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function O_(n,t,e,s){return!!(es(n)===s||s!==Jt&&Vp(t,e,n))&&("**"===n.path||Mc(t,n,e).matched)}function Up(n,t,e){return 0===t.length&&!n.children[e]}class Nc{constructor(t){this.segmentGroup=t||null}}class Bp{constructor(t){this.urlTree=t}}function jp(n){return new ti.y(t=>t.error(new Nc(n)))}function I0(n){return new ti.y(t=>t.error(new Bp(n)))}function D0(n){return new ti.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class S0{constructor(t,e,s,a,c){this.configLoader=e,this.urlSerializer=s,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=t.get(h.h0i)}apply(){const t=Lp(this.urlTree.root,[],[],this.config).segmentGroup,e=new I(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Jt).pipe((0,xt.U)(c=>this.createUrlTree(x_(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ui(c=>{if(c instanceof Bp)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Nc?this.noMatchError(c):c}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Jt).pipe((0,xt.U)(a=>this.createUrlTree(x_(a),t.queryParams,t.fragment))).pipe(ui(a=>{throw a instanceof Nc?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,s){const a=t.segments.length>0?new I([],{[Jt]:t}):t;return new C(a,e,s)}expandSegmentGroup(t,e,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(t,e,s).pipe((0,xt.U)(c=>new I([],c))):this.expandSegment(t,s,e,s.segments,a,!0)}expandChildren(t,e,s){const a=[];for(const c of Object.keys(s.children))"primary"===c?a.unshift(c):a.push(c);return(0,Vr.D)(a).pipe(xo(c=>{const f=s.children[c],y=N_(e,c);return this.expandSegmentGroup(t,y,f,c).pipe((0,xt.U)(b=>({segment:b,outlet:c})))}),Rs((c,f)=>(c[f.outlet]=f.segment,c),{}),function(n,t){const e=arguments.length>=2;return s=>s.pipe(n?Ii((a,c)=>n(a,c,s)):oh.y,au(1),e?sh(t):pp(()=>new ma))}())}expandSegment(t,e,s,a,c,f){return(0,Vr.D)(s).pipe(xo(y=>this.expandSegmentAgainstRoute(t,e,s,y,a,c,f).pipe(ui(T=>{if(T instanceof Nc)return(0,Et.of)(null);throw T}))),Fo(y=>!!y),ui((y,b)=>{if(y instanceof ma||"EmptyError"===y.name){if(Up(e,a,c))return(0,Et.of)(new I([],{}));throw new Nc(e)}throw y}))}expandSegmentAgainstRoute(t,e,s,a,c,f,y){return O_(a,e,c,f)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,c,f):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,s,a,c,f):jp(e):jp(e)}expandSegmentAgainstRouteUsingRedirect(t,e,s,a,c,f){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,s,a,f):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,s,a,c,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,s,a){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?I0(c):this.lineralizeSegments(s,c).pipe((0,ci.zg)(f=>{const y=new I(f,{});return this.expandSegment(t,y,e,f,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,s,a,c,f){const{matched:y,consumedSegments:b,lastChild:T,positionalParamSegments:x}=Mc(e,a,c);if(!y)return jp(e);const k=this.applyRedirectCommands(b,a.redirectTo,x);return a.redirectTo.startsWith("/")?I0(k):this.lineralizeSegments(a,k).pipe((0,ci.zg)(Z=>this.expandSegment(t,e,s,Z.concat(c.slice(T)),f,!1)))}matchSegmentAgainstRoute(t,e,s,a,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,Et.of)(s._loadedConfig):this.configLoader.load(t.injector,s)).pipe((0,xt.U)(Z=>(s._loadedConfig=Z,new I(a,{})))):(0,Et.of)(new I(a,{}));const{matched:f,consumedSegments:y,lastChild:b}=Mc(e,s,a);if(!f)return jp(e);const T=a.slice(b);return this.getChildConfig(t,s,a).pipe((0,ci.zg)(k=>{const Z=k.module,pe=k.routes,{segmentGroup:Ie,slicedSegments:Ve}=Lp(e,y,T,pe),ze=new I(Ie.segments,Ie.children);if(0===Ve.length&&ze.hasChildren())return this.expandChildren(Z,pe,ze).pipe((0,xt.U)(Ht=>new I(y,Ht)));if(0===pe.length&&0===Ve.length)return(0,Et.of)(new I(y,{}));const $t=es(s)===c;return this.expandSegment(Z,ze,pe,Ve,$t?Jt:c,!0).pipe((0,xt.U)(dn=>new I(y.concat(dn.segments),dn.children)))}))}getChildConfig(t,e,s){return e.children?(0,Et.of)(new xp(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Et.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,s).pipe((0,ci.zg)(a=>{return a?this.configLoader.load(t.injector,e).pipe((0,xt.U)(c=>(e._loadedConfig=c,c))):(n=e,new ti.y(t=>t.error(wc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Et.of)(new xp([],t))}runCanLoadGuards(t,e,s){const a=e.canLoad;if(!a||0===a.length)return(0,Et.of)(!0);const c=a.map(f=>{const y=t.get(f);let b;if((n=y)&&fu(n.canLoad))b=y.canLoad(e,s);else{if(!fu(y))throw new Error("Invalid CanLoad guard");b=y(e,s)}var n;return ni(b)});return(0,Et.of)(c).pipe(Pc(),(0,di.b)(f=>{if(!Ta(f))return;const y=wc(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw y.url=f,y}),(0,xt.U)(f=>!0===f))}lineralizeSegments(t,e){let s=[],a=e.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,Et.of)(s);if(a.numberOfChildren>1||!a.children[Jt])return D0(t.redirectTo);a=a.children[Jt]}}applyRedirectCommands(t,e,s){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,s)}applyRedirectCreatreUrlTree(t,e,s,a){const c=this.createSegmentGroup(t,e.root,s,a);return new C(c,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const s={};return zn(t,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);s[c]=e[y]}else s[c]=a}),s}createSegmentGroup(t,e,s,a){const c=this.createSegments(t,e.segments,s,a);let f={};return zn(e.children,(y,b)=>{f[b]=this.createSegmentGroup(t,y,s,a)}),new I(c,f)}createSegments(t,e,s,a){return e.map(c=>c.path.startsWith(":")?this.findPosParam(t,c,a):this.findOrReturn(c,s))}findPosParam(t,e,s){const a=s[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let s=0;for(const a of e){if(a.path===t.path)return e.splice(s),a;s++}return t}}function x_(n){const t={};for(const s of Object.keys(n.children)){const c=x_(n.children[s]);(c.segments.length>0||c.hasChildren())&&(t[s]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Jt]){const t=n.children[Jt];return new I(n.segments.concat(t.segments),t.children)}return n}(new I(n.segments,t))}class P0{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Eh{constructor(t,e){this.component=t,this.route=e}}function M0(n,t,e){const s=n._root;return ll(s,t?t._root:null,e,[s.value])}function Oc(n,t,e){const s=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(s?s.module.injector:e).get(n)}function ll(n,t,e,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=gh(t);return n.children.forEach(f=>{(function(n,t,e,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,f=t?t.value:null,y=e?e.getContext(n.value.outlet):null;if(f&&c.routeConfig===f.routeConfig){const b=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Te(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Te(n.url,t.url)||!Xi(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mp(n,t)||!Xi(n.queryParams,t.queryParams);case"paramsChange":default:return!Mp(n,t)}}(f,c,c.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new P0(s)):(c.data=f.data,c._resolvedData=f._resolvedData),ll(n,t,c.component?y?y.children:null:e,s,a),b&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new Eh(y.outlet.component,f))}else f&&gu(t,y,a),a.canActivateChecks.push(new P0(s)),ll(n,null,c.component?y?y.children:null:e,s,a)})(f,c[f.value.outlet],e,s.concat([f.value]),a),delete c[f.value.outlet]}),zn(c,(f,y)=>gu(f,e.getContext(y),a)),a}function gu(n,t,e){const s=gh(n),a=n.value;zn(s,(c,f)=>{gu(c,a.component?t?t.children.getContext(f):null:t,e)}),e.canDeactivateChecks.push(new Eh(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class F_{}function L_(n){return new ti.y(t=>t.error(n))}class V0{constructor(t,e,s,a,c,f){this.rootComponentType=t,this.config=e,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f}recognize(){const t=Lp(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Jt);if(null===e)return null;const s=new Pp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new io(s,e),c=new g0(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(t){const e=t.value,s=f0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(s.params),e.data=Object.freeze(s.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,s){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,s)}processChildren(t,e){const s=[];for(const c of Object.keys(e.children)){const f=e.children[c],y=N_(t,c),b=this.processSegmentGroup(y,f,c);if(null===b)return null;s.push(...b)}const a=B0(s);return a.sort((t,e)=>t.value.outlet===Jt?-1:e.value.outlet===Jt?1:t.value.outlet.localeCompare(e.value.outlet)),a}processSegment(t,e,s,a){for(const c of t){const f=this.processSegmentAgainstRoute(c,e,s,a);if(null!==f)return f}return Up(e,s,a)?[]:null}processSegmentAgainstRoute(t,e,s,a){if(t.redirectTo||!O_(t,e,s,a))return null;let c,f=[],y=[];if("**"===t.path){const pe=s.length>0?il(s).parameters:{};c=new Pp(s,pe,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$0(t),es(t),t.component,t,j0(e),V_(e)+s.length,H0(t))}else{const pe=Mc(e,t,s);if(!pe.matched)return null;f=pe.consumedSegments,y=s.slice(pe.lastChild),c=new Pp(f,pe.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$0(t),es(t),t.component,t,j0(e),V_(e)+f.length,H0(t))}const b=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:T,slicedSegments:x}=Lp(e,f,y,b.filter(pe=>void 0===pe.redirectTo),this.relativeLinkResolution);var n;if(0===x.length&&T.hasChildren()){const pe=this.processChildren(b,T);return null===pe?null:[new io(c,pe)]}if(0===b.length&&0===x.length)return[new io(c,[])];const k=es(t)===a,Z=this.processSegment(b,T,x,k?Jt:a);return null===Z?null:[new io(c,Z)]}}function NI(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function B0(n){const t=[],e=new Set;for(const s of n){if(!NI(s)){t.push(s);continue}const a=t.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...s.children),e.add(a)):t.push(s)}for(const s of e){const a=B0(s.children);t.push(new io(s.value,a))}return t.filter(s=>!e.has(s))}function j0(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function V_(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function $0(n){return n.data||{}}function H0(n){return n.resolve||{}}function U_(n){return dr(t=>{const e=n(t);return e?(0,Vr.D)(e).pipe((0,xt.U)(()=>t)):(0,Et.of)(t)})}class z0 extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const xc=new h.OlP("ROUTES");class Ms{constructor(t,e,s,a){this.loader=t,this.compiler=e,this.onLoadStartListener=s,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe((0,xt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(e);const f=c.create(t);return new xp(Tc(f.injector.get(xc,void 0,h.XFs.Self|h.XFs.Optional)).map(al),f)}),ui(c=>{throw e._loader$=void 0,c}));return e._loader$=new u_.c(a,()=>new Pr.xQ).pipe((0,_p.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Vr.D)(this.loader.load(t)):ni(t()).pipe((0,ci.zg)(e=>e instanceof h.YKP?(0,Et.of)(e):(0,Vr.D)(this.compiler.compileModuleAsync(e))))}}class q0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kc,this.attachRef=null}}class kc{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const s=this.getOrCreateContext(t);s.outlet=e,this.contexts.set(t,s)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new q0,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ia{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function j_(n){throw n}function K0(n,t,e){return t.parse("/")}function Wp(n,t){return(0,Et.of)(null)}const yP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ts=(()=>{class n{constructor(e,s,a,c,f,y,b,T){this.rootComponentType=e,this.urlSerializer=s,this.rootContexts=a,this.location=c,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Pr.xQ,this.errorHandler=j_,this.malformedUriErrorHandler=K0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Wp,afterPreactivation:Wp},this.urlHandlingStrategy=new Ia,this.routeReuseStrategy=new z0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(h.h0i),this.console=f.get(h.c2e);const Z=f.get(h.R0b);this.isNgZoneEnabled=Z instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=new C(new I([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ms(y,b,pe=>this.triggerEvent(new Cp(pe)),pe=>this.triggerEvent(new bp(pe))),this.routerState=I_(this.currentUrlTree,this.rootComponentType),this.transitions=new Jn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const s=this.events;return e.pipe(Ii(a=>0!==a.id),(0,xt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),dr(a=>{let c=!1,f=!1;return(0,Et.of)(a).pipe((0,di.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),dr(y=>{const b=this.browserUrlTree.toString(),T=!this.navigated||y.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return mu(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,Et.of)(y).pipe(dr(k=>{const Z=this.transitions.getValue();return s.next(new yp(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),Z!==this.transitions.getValue()?Ti.E:Promise.resolve(k)}),function(n,t,e,s){return dr(a=>function(n,t,e,s,a){return new S0(n,t,e,s,a).apply()}(n,t,e,a.extractedUrl,s).pipe((0,xt.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,di.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function(n,t,e,s,a){return(0,ci.zg)(c=>function(n,t,e,s,a="emptyOnly",c="legacy"){try{const f=new V0(n,t,e,s,a,c).recognize();return null===f?L_(new F_):(0,Et.of)(f)}catch(f){return L_(f)}}(n,t,c.urlAfterRedirects,e(c.urlAfterRedirects),s,a).pipe((0,xt.U)(f=>Object.assign(Object.assign({},c),{targetSnapshot:f}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,di.b)(k=>{"eager"===this.urlUpdateStrategy&&(k.extras.skipLocationChange||this.setBrowserUrl(k.urlAfterRedirects,k),this.browserUrlTree=k.urlAfterRedirects);const Z=new uu(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);s.next(Z)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Z,extractedUrl:pe,source:Ie,restoredState:Ve,extras:ze}=y,$t=new yp(Z,this.serializeUrl(pe),Ie,Ve);s.next($t);const Dt=I_(pe,this.rootComponentType).snapshot;return(0,Et.of)(Object.assign(Object.assign({},y),{targetSnapshot:Dt,urlAfterRedirects:pe,extras:Object.assign(Object.assign({},ze),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),Ti.E}),U_(y=>{const{targetSnapshot:b,id:T,extractedUrl:x,rawUrl:k,extras:{skipLocationChange:Z,replaceUrl:pe}}=y;return this.hooks.beforePreactivation(b,{navigationId:T,appliedUrlTree:x,rawUrlTree:k,skipLocationChange:!!Z,replaceUrl:!!pe})}),(0,di.b)(y=>{const b=new Ep(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),(0,xt.U)(y=>Object.assign(Object.assign({},y),{guards:M0(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,t){return(0,ci.zg)(e=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:f}}=e;return 0===f.length&&0===c.length?(0,Et.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,s){return(0,Vr.D)(n).pipe((0,ci.zg)(a=>function(n,t,e,s,a){const c=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,Et.of)(!0);const f=c.map(y=>{const b=Oc(y,t,a);let T;if(function(n){return n&&fu(n.canDeactivate)}(b))T=ni(b.canDeactivate(n,t,e,s));else{if(!fu(b))throw new Error("Invalid CanDeactivate guard");T=ni(b(n,t,e,s))}return T.pipe(Fo())});return(0,Et.of)(f).pipe(Pc())}(a.component,a.route,e,t,s)),Fo(a=>!0!==a,!0))}(f,s,a,n).pipe((0,ci.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,t,e,s){return(0,Vr.D)(t).pipe(xo(a=>Mo(function(n,t){return null!==n&&t&&t(new g_(n)),(0,Et.of)(!0)}(a.route.parent,s),function(n,t){return null!==n&&t&&t(new Vo(n)),(0,Et.of)(!0)}(a.route,s),function(n,t,e){const s=t[t.length-1],c=t.slice(0,t.length-1).reverse().map(f=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(f)).filter(f=>null!==f).map(f=>Ec(()=>{const y=f.guards.map(b=>{const T=Oc(b,f.node,e);let x;if(function(n){return n&&fu(n.canActivateChild)}(T))x=ni(T.canActivateChild(s,n));else{if(!fu(T))throw new Error("Invalid CanActivateChild guard");x=ni(T(s,n))}return x.pipe(Fo())});return(0,Et.of)(y).pipe(Pc())}));return(0,Et.of)(c).pipe(Pc())}(n,a.path,e),function(n,t,e){const s=t.routeConfig?t.routeConfig.canActivate:null;if(!s||0===s.length)return(0,Et.of)(!0);const a=s.map(c=>Ec(()=>{const f=Oc(c,t,e);let y;if(function(n){return n&&fu(n.canActivate)}(f))y=ni(f.canActivate(t,n));else{if(!fu(f))throw new Error("Invalid CanActivate guard");y=ni(f(t,n))}return y.pipe(Fo())}));return(0,Et.of)(a).pipe(Pc())}(n,a.route,e))),Fo(a=>!0!==a,!0))}(s,c,n,t):(0,Et.of)(y)),(0,xt.U)(y=>Object.assign(Object.assign({},e),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,di.b)(y=>{if(Ta(y.guardsResult)){const T=wc(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw T.url=y.guardsResult,T}const b=new Ca(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(b)}),Ii(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),U_(y=>{if(y.guards.canActivateChecks.length)return(0,Et.of)(y).pipe((0,di.b)(b=>{const T=new f_(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(T)}),dr(b=>{let T=!1;return(0,Et.of)(b).pipe(function(n,t){return(0,ci.zg)(e=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=e;if(!a.length)return(0,Et.of)(e);let c=0;return(0,Vr.D)(a).pipe(xo(f=>function(n,t,e,s){return function(n,t,e,s){const a=Object.keys(n);if(0===a.length)return(0,Et.of)({});const c={};return(0,Vr.D)(a).pipe((0,ci.zg)(f=>function(n,t,e,s){const a=Oc(n,t,s);return ni(a.resolve?a.resolve(t,e):a(t,e))}(n[f],t,e,s).pipe((0,di.b)(y=>{c[f]=y}))),au(1),(0,ci.zg)(()=>Object.keys(c).length===a.length?(0,Et.of)(c):Ti.E))}(n._resolve,n,t,s).pipe((0,xt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),f0(n,e).resolve),null)))}(f.route,s,n,t)),(0,di.b)(()=>c++),au(1),(0,ci.zg)(f=>c===a.length?(0,Et.of)(e):Ti.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,di.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,di.b)(b=>{const T=new p_(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(T)}))}),U_(y=>{const{targetSnapshot:b,id:T,extractedUrl:x,rawUrl:k,extras:{skipLocationChange:Z,replaceUrl:pe}}=y;return this.hooks.afterPreactivation(b,{navigationId:T,appliedUrlTree:x,rawUrlTree:k,skipLocationChange:!!Z,replaceUrl:!!pe})}),(0,xt.U)(y=>{const b=function(n,t,e){const s=S_(n,t._root,e?e._root:void 0);return new h0(s,t)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:b})}),(0,di.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,t,e)=>(0,xt.U)(s=>(new Uo(t,s.targetRouterState,s.currentRouterState,e).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,di.b)({next(){c=!0},complete(){c=!0}}),function(n){return t=>t.lift(new nl(n))}(()=>{var y;if(!c&&!f){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),ui(y=>{if(f=!0,function(n){return n&&n[lh]}(y)){const b=Ta(y.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const T=new lu(a.id,this.serializeUrl(a.extractedUrl),y.message);s.next(T),b?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),k={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mu(a.source)};this.scheduleNavigation(x,"imperative",null,k,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new vp(a.id,this.serializeUrl(a.extractedUrl),y);s.next(b);try{a.resolve(this.errorHandler(y))}catch(T){a.reject(T)}}return Ti.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const s=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:c,urlTree:f}=s,y={replaceUrl:!0};if(c){const b=Object.assign({},c);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(y.state=b)}this.scheduleNavigation(f,a,c,y)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(e){var s;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(s=e.state)||void 0===s?void 0:s.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,s){if(!e)return!0;const a=s.urlTree.toString()===e.urlTree.toString();return s.transitionId!==e.transitionId||!a||!("hashchange"===s.source&&"popstate"===e.source||"popstate"===s.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Fp(e),this.config=e.map(al),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,s={}){const{relativeTo:a,queryParams:c,fragment:f,queryParamsHandling:y,preserveFragment:b}=s,T=a||this.routerState.root,x=b?this.currentUrlTree.fragment:f;let k=null;switch(y){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=c||null}return null!==k&&(k=this.removeEmptyProps(k)),function(n,t,e,s,a){if(0===e.length)return P_(t.root,t.root,t,s,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _0(!0,0,n);let t=0,e=!1;const s=n.reduce((a,c,f)=>{if("object"==typeof c&&null!=c){if(c.outlets){const y={};return zn(c.outlets,(b,T)=>{y[T]="string"==typeof b?b.split("/"):b}),[...a,{outlets:y}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===f?(c.split("/").forEach((y,b)=>{0==b&&"."===y||(0==b&&""===y?e=!0:".."===y?t++:""!=y&&a.push(y))}),a):[...a,c]},[]);return new _0(e,t,s)}(e);if(c.toRoot())return P_(t.root,new I([],{}),t,s,a);const f=function(n,t,e){if(n.isAbsolute)return new Ac(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const c=e.snapshot._urlSegment;return new Ac(c,c===t.root,0)}const s=wa(n.commands[0])?0:1;return function(n,t,e){let s=n,a=t,c=e;for(;c>a;){if(c-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new Ac(s,!1,a-c)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(c,t,n),y=f.processChildren?yh(f.segmentGroup,f.index,c.commands):v0(f.segmentGroup,f.index,c.commands);return P_(f.segmentGroup,y,t,s,a)}(T,this.currentUrlTree,e,k,null!=x?x:null)}navigateByUrl(e,s={skipLocationChange:!1}){const a=Ta(e)?e:this.parseUrl(e),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(e,s={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,s),s)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let s;try{s=this.urlSerializer.parse(e)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return s}isActive(e,s){let a;if(a=!0===s?Object.assign({},yP):!1===s?Object.assign({},Z0):s,Ta(e))return C_(this.currentUrlTree,e,a);const c=this.parseUrl(e);return C_(this.currentUrlTree,c,a)}removeEmptyProps(e){return Object.keys(e).reduce((s,a)=>{const c=e[a];return null!=c&&(s[a]=c),s},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Lo(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,s,a,c,f){var y,b;if(this.disposed)return Promise.resolve(!1);const T=this.getTransition(),x=mu(s)&&T&&!mu(T.source),pe=(this.lastSuccessfulId===T.id||this.currentNavigation?T.rawUrl:T.urlAfterRedirects).toString()===e.toString();if(x&&pe)return Promise.resolve(!0);let Ie,Ve,ze;f?(Ie=f.resolve,Ve=f.reject,ze=f.promise):ze=new Promise((dn,Ht)=>{Ie=dn,Ve=Ht});const $t=++this.navigationId;let Dt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Dt=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):Dt=0,this.setTransition({id:$t,targetPageId:Dt,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:c,resolve:Ie,reject:Ve,promise:ze,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ze.catch(dn=>Promise.reject(dn))}setBrowserUrl(e,s){const a=this.urlSerializer.serialize(e),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(e,s=!1){var a,c;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===f?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===f&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,s){const a=new lu(e.id,this.serializeUrl(e.extractedUrl),s);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,s){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:s}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(h.DyG),h.LFG(Be),h.LFG(kc),h.LFG(Ye),h.LFG(h.zs3),h.LFG(h.v3s),h.LFG(h.Sil),h.LFG(void 0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function mu(n){return"imperative"!==n}let ul=(()=>{class n{constructor(e,s,a,c,f){this.router=e,this.route=s,this.commands=[],this.onChanges=new Pr.xQ,null==a&&c.setAttribute(f.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:wh(this.skipLocationChange),replaceUrl:wh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wh(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(ts),h.Y36(hu),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,s){1&e&&h.NdJ("click",function(){return s.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[h.TTD]}),n})();function wh(n){return""===n||!!n}let Q0=(()=>{class n{constructor(e,s,a,c,f){this.parentContexts=e,this.location=s,this.resolver=a,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.name=c||Jt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,s){this.activated=e,this._activatedRoute=s,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const f=(s=s||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,b=new VI(e,y,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(kc),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class VI{constructor(t,e,s){this.route=t,this.childContexts=e,this.parent=s}get(t,e){return t===hu?this.route:t===kc?this.childContexts:this.parent.get(t,e)}}class UI{}class $_{preload(t,e){return(0,Et.of)(null)}}let X0=(()=>{class n{constructor(e,s,a,c,f){this.router=e,this.injector=c,this.preloadingStrategy=f,this.loader=new Ms(s,a,T=>e.triggerEvent(new Cp(T)),T=>e.triggerEvent(new bp(T)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(e=>e instanceof Lo),xo(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(h.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,s){const a=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const f=c._loadedConfig;a.push(this.processRoutes(f.module,f.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(e,c)):c.children&&a.push(this.processRoutes(e,c.children));return(0,Vr.D)(a).pipe((0,th.J)(),(0,xt.U)(c=>{}))}preloadConfig(e,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,Et.of)(s._loadedConfig):this.loader.load(e.injector,s)).pipe((0,ci.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(ts),h.LFG(h.v3s),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(UI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Th=(()=>{class n{constructor(e,s,a={}){this.router=e,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Lo&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Tp&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,s){this.router.triggerEvent(new Tp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(ts),h.LFG(Wl),h.LFG(void 0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Fc=new h.OlP("ROUTER_CONFIGURATION"),BI=new h.OlP("ROUTER_FORROOT_GUARD"),EP=[Ye,{provide:Be,useClass:at},{provide:ts,useFactory:function(n,t,e,s,a,c,f,y={},b,T){const x=new ts(null,n,t,e,s,a,c,Tc(f));return b&&(x.urlHandlingStrategy=b),T&&(x.routeReuseStrategy=T),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(y,x),y.enableTracing&&x.events.subscribe(k=>{var Z,pe;null===(Z=console.group)||void 0===Z||Z.call(console,`Router Event: ${k.constructor.name}`),console.log(k.toString()),console.log(k),null===(pe=console.groupEnd)||void 0===pe||pe.call(console)}),x},deps:[Be,kc,Ye,h.zs3,h.v3s,h.Sil,xc,Fc,[class{},new h.FiY],[class{},new h.FiY]]},kc,{provide:hu,useFactory:function(n){return n.routerState.root},deps:[ts]},{provide:h.v3s,useClass:h.EAV},X0,$_,class{preload(t,e){return e().pipe(ui(()=>(0,Et.of)(null)))}},{provide:Fc,useValue:{enableTracing:!1}}];function CP(){return new h.PXZ("Router",ts)}let bP=(()=>{class n{constructor(e,s){}static forRoot(e,s){return{ngModule:n,providers:[EP,jI(e),{provide:BI,useFactory:IP,deps:[[ts,new h.FiY,new h.tp0]]},{provide:Fc,useValue:s||{}},{provide:Ee,useFactory:TP,deps:[te,[new h.tBr(de),new h.FiY],Fc]},{provide:Th,useFactory:wP,deps:[ts,Wl,Fc]},{provide:UI,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:$_},{provide:h.PXZ,multi:!0,useFactory:CP},[Gp,{provide:h.ip1,multi:!0,useFactory:W_,deps:[Gp]},{provide:zp,useFactory:eC,deps:[Gp]},{provide:h.tb,multi:!0,useExisting:zp}]]}}static forChild(e){return{ngModule:n,providers:[jI(e)]}}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(BI,8),h.LFG(ts,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function wP(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Th(n,t,e)}function TP(n,t,e={}){return e.useHash?new Ne(n,t):new Ce(n,t)}function IP(n){return"guarded"}function jI(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:xc,multi:!0,useValue:n}]}let Gp=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Pr.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(y=>s=y),c=this.injector.get(ts),f=this.injector.get(Fc);return"disabled"===f.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,Et.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),a})}bootstrapListener(e){const s=this.injector.get(Fc),a=this.injector.get(X0),c=this.injector.get(Th),f=this.injector.get(ts),y=this.injector.get(h.z2F);e===y.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),a.setUpPreloading(),c.init(),f.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function W_(n){return n.appInitializer.bind(n)}function eC(n){return n.bootstrapListener.bind(n)}const zp=new h.OlP("Router Initializer");let dl=(()=>{class n{constructor(e,s){this.el=e,this.settingsService=s,this.normalStyles={},this.hoverStyles={},this.activeStyles={};const a=this.el.nativeElement.tagName.toLowerCase();this.settingsService.themeObserver.subscribe(y=>{if("button"===a||"select"===a){const b={border:"1px solid",borderRadius:"5px",padding:"5px"};"dark"===y?(this.normalStyles=Object.assign({backgroundColor:"#333",color:"white",borderColor:"#AAA"},b),this.hoverStyles={backgroundColor:"#444"},this.activeStyles={backgroundColor:"#222"}):"light"===y&&(this.normalStyles=Object.assign({backgroundColor:"#CCC",color:"black",borderColor:"#AAA"},b),this.hoverStyles={backgroundColor:"#DDD"},this.activeStyles={backgroundColor:"#AAA"})}else"div"===a?"light"===y?this.normalStyles={backgroundColor:"white",color:"black"}:"dark"===y&&(this.normalStyles={backgroundColor:"#111",color:"white"}):"p"===a&&("light"===y?this.normalStyles={color:"black"}:"dark"===y&&(this.normalStyles={color:"white"}));Ss(this.el.nativeElement,this.normalStyles)}),this.el.nativeElement.addEventListener("mouseenter",y=>{Ss(this.el.nativeElement,this.hoverStyles)}),this.el.nativeElement.addEventListener("mouseleave",y=>{Ss(this.el.nativeElement,this.normalStyles)});const c=y=>{Ss(this.el.nativeElement,this.activeStyles)},f=y=>{Ss(this.el.nativeElement,this.normalStyles)};this.el.nativeElement.addEventListener("mousedown",c),this.el.nativeElement.addEventListener("touchstart",c),this.el.nativeElement.addEventListener("mouseup",f),this.el.nativeElement.addEventListener("touchend",f)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.SBq),h.Y36(ru))},n.\u0275dir=h.lG2({type:n,selectors:[["","appThemed",""]]}),n})();var tC=N(538),B=N(3854),Di=N(8026),Lc=N(5422),Aa=N(3910),nC=N(3637),Ih=N(6682),Dh=N(8345);class G_{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Uc(t,this.compare,this.keySelector))}}class Uc extends Gn.L{constructor(t,e,s){super(t),this.keySelector=s,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:a}=this;e=a?a(t):t}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,e)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=e,this.destination.next(t))}}class Bc{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new WI(t,this.observables,this.project))}}class WI extends yc{constructor(t,e,s){super(t),this.observables=e,this.project=s,this.toRespond=[];const a=e.length;this.values=new Array(a);for(let c=0;c<a;c++)this.toRespond.push(c);for(let c=0;c<a;c++)this.add(su(this,e[c],void 0,c))}notifyNext(t,e,s){this.values[s]=e;const a=this.toRespond;if(a.length>0){const c=a.indexOf(s);-1!==c&&a.splice(c,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(s){return void this.destination.error(s)}this.destination.next(e)}}class iC{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new z_(t,this.predicate))}}class z_ extends Gn.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Un=N(2785),Ns=N(8939),GI=(N(4828),N(3394)),hl=N(8239);const zI="@firebase/database";let qp="";function sC(n){qp=n}class oC{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,B.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,B.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class qI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,B.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const aC=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new oC(t)}}catch(t){}return new qI},Hr=aC("localStorage"),Z_=aC("sessionStorage"),jc=new Lc.Yd("@firebase/database"),KI=function(){let n=1;return function(){return n++}}(),ZI=function(n){const t=(0,B.dS)(n),e=new B.gQ;e.update(t);const s=e.digest();return B.US.encodeByteArray(s)},$c=function(...n){let t="";for(let e=0;e<n.length;e++){const s=n[e];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?t+=$c.apply(null,s):t+="object"==typeof s?(0,B.Pz)(s):s,t+=" "}return t};let Hc=null,lC=!0;const Kp=function(n,t){(0,B.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(jc.logLevel=Lc.in.VERBOSE,Hc=jc.log.bind(jc),t&&Z_.set("logging_enabled",!0)):"function"==typeof n?Hc=n:(Hc=null,Z_.remove("logging_enabled"))},Wr=function(...n){if(!0===lC&&(lC=!1,null===Hc&&!0===Z_.get("logging_enabled")&&Kp(!0)),Hc){const t=$c.apply(null,n);Hc(t)}},Sh=function(n){return function(...t){Wr(n,...t)}},Y_=function(...n){const t="FIREBASE INTERNAL ERROR: "+$c(...n);jc.error(t)},$o=function(...n){const t=`FIREBASE FATAL ERROR: ${$c(...n)}`;throw jc.error(t),new Error(t)},Ai=function(...n){const t="FIREBASE WARNING: "+$c(...n);jc.warn(t)},Rh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Sa="[MIN_NAME]",so="[MAX_NAME]",fl=function(n,t){if(n===t)return 0;if(n===Sa||t===so)return-1;if(t===Sa||n===so)return 1;{const e=Yp(n),s=Yp(t);return null!==e?null!==s?e-s==0?n.length-t.length:e-s:-1:null!==s?1:n<t?-1:1}},JI=function(n,t){return n===t?0:n<t?-1:1},ns=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Pz)(t))},Ph=function(n){if("object"!=typeof n||null===n)return(0,B.Pz)(n);const t=[];for(const s in n)t.push(s);t.sort();let e="{";for(let s=0;s<t.length;s++)0!==s&&(e+=","),e+=(0,B.Pz)(t[s]),e+=":",e+=Ph(n[t[s]]);return e+="}",e},uC=function(n,t){const e=n.length;if(e<=t)return[n];const s=[];for(let a=0;a<e;a+=t)s.push(n.substring(a,a+t>e?e:a+t));return s};function ii(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const XI=function(n){(0,B.hu)(!Rh(n),"Invalid JSON number");const s=1023;let a,c,f,y,b;0===n?(c=0,f=0,a=1/n==-1/0?1:0):(a=n<0,(n=Math.abs(n))>=Math.pow(2,1-s)?(y=Math.min(Math.floor(Math.log(n)/Math.LN2),s),c=y+s,f=Math.round(n*Math.pow(2,52-y)-Math.pow(2,52))):(c=0,f=Math.round(n/Math.pow(2,-1074))));const T=[];for(b=52;b;b-=1)T.push(f%2?1:0),f=Math.floor(f/2);for(b=11;b;b-=1)T.push(c%2?1:0),c=Math.floor(c/2);T.push(a?1:0),T.reverse();const x=T.join("");let k="";for(b=0;b<64;b+=8){let Z=parseInt(x.substr(b,8),2).toString(16);1===Z.length&&(Z="0"+Z),k+=Z}return k.toLowerCase()},nD=new RegExp("^-?(0*)\\d{1,10}$"),Zp=-2147483648,Q_=2147483647,Yp=function(n){if(nD.test(n)){const t=Number(n);if(t>=Zp&&t<=Q_)return t}return null},Ra=function(n){try{n()}catch(t){setTimeout(()=>{throw Ai("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Mh=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class X_{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(s=>this.appCheck=s)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,s):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){Ai(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ey{constructor(t,e,s){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Wr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,s):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ai(t)}}let Wc=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ty=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ry="websocket",Ho="long_polling";class Gc{constructor(t,e,s,a,c=!1,f="",y=!1){this.secure=e,this.namespace=s,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=f,this.includeNamespaceInQueryParams=y,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hr.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Hr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pC(n,t,e){let s;if((0,B.hu)("string"==typeof t,"typeof type must == string"),(0,B.hu)("object"==typeof e,"typeof params must == object"),t===ry)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Ho)throw new Error("Unknown connection type: "+t);s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const a=[];return ii(e,(c,f)=>{a.push(c+"="+f)}),s+a.join("&")}class DP{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,B.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,B.p$)(this.counters_)}}const pl={},eg={};function yu(n){const t=n.toString();return pl[t]||(pl[t]=new DP),pl[t]}class sD{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<s.length;++a)s[a]&&Ra(()=>{this.onMessage_(s[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class qc{constructor(t,e,s,a,c,f,y){this.connId=t,this.repoInfo=e,this.applicationId=s,this.appCheckToken=a,this.authToken=c,this.transportSessionId=f,this.lastSessionId=y,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sh(t),this.stats_=yu(e),this.urlFn=b=>(this.appCheckToken&&(b.ac=this.appCheckToken),pC(e,Ho,b))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new sD(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bC((...c)=>{const[f,y,b,T,x]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===f)this.id=y,this.password=b;else{if("close"!==f)throw new Error("Unrecognized command received: "+f);y?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(y,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[f,y]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(f,y)},()=>{this.onClosed_()},this.urlFn);const s={start:"t"};s.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(s.cb=this.scriptTagHolder.uniqueCallbackIdentifier),s.v="5",this.transportSessionId&&(s.s=this.transportSessionId),this.lastSessionId&&(s.ls=this.lastSessionId),this.applicationId&&(s.p=this.applicationId),this.appCheckToken&&(s.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ty.test(location.hostname)&&(s.r="f");const a=this.urlFn(s);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qc.forceAllow_=!0}static forceDisallow(){qc.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!qc.forceAllow_&&(qc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,B.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const s=(0,B.h$)(e),a=uC(s,1840);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=t,s.pw=e,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,B.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class bC{constructor(t,e,s,a){if(this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=KI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=bC.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(y){Wr("frame writing exception"),y.stack&&Wr(y.stack),Wr(y)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Wr("No IE domain setting required")}catch(e){const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),s="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const f=this.pendingSegs.shift();s=s+"&seg"+a+"="+f.seg+"&ts"+a+"="+f.ts+"&d"+a+"="+f.d,a++}return e+=s,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,s){this.pendingSegs.push({seg:t,ts:e,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const s=()=>{this.outstandingRequests.delete(e),this.newRequest_()},a=setTimeout(s,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(a),s()})}addTag(t,e){(0,B.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const a=s.readyState;(!a||"loaded"===a||"complete"===a)&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),e())},s.onerror=()=>{Wr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(s){}},Math.floor(1))}}let qn=null;"undefined"!=typeof MozWebSocket?qn=MozWebSocket:"undefined"!=typeof WebSocket&&(qn=WebSocket);let Eu=(()=>{class n{constructor(e,s,a,c,f,y,b){this.connId=e,this.applicationId=a,this.appCheckToken=c,this.authToken=f,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sh(this.connId),this.stats_=yu(s),this.connURL=n.connectionURL_(s,y,b,c),this.nodeAdmin=s.nodeAdmin}static connectionURL_(e,s,a,c){const f={v:"5"};return!(0,B.Yr)()&&"undefined"!=typeof location&&location.hostname&&ty.test(location.hostname)&&(f.r="f"),s&&(f.s=s),a&&(f.ls=a),c&&(f.ac=c),pC(e,ry,f)}open(e,s){this.onDisconnect=s,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hr.set("previous_websocket_failure",!0);try{if((0,B.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${qp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const f=process.env,y=0===this.connURL.indexOf("wss://")?f.HTTPS_PROXY||f.https_proxy:f.HTTP_PROXY||f.http_proxy;y&&(c.proxy={origin:y}),this.mySock=new qn(this.connURL,[],c)}else this.mySock=new qn(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(a){this.log_("Error instantiating WebSocket.");const c=a.message||a.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const c=a.message||a.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const a=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&null!==qn&&!n.forceDisallow_}static previouslyFailed(){return Hr.isInMemoryStorage||!0===Hr.get("previous_websocket_failure")}markConnectionHealthy(){Hr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const a=(0,B.cI)(s);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const s=Number(e);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const s=e.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(s);else{const a=this.extractFrameCount_(s);null!==a&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const s=(0,B.Pz)(e);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const a=uC(s,16384);a.length>1&&this.sendString_(String(a.length));for(let c=0;c<a.length;c++)this.sendString_(a[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class TC{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[qc,Eu]}initTransports_(t){const e=Eu&&Eu.isAvailable();let s=e&&!Eu.previouslyFailed();if(t.webSocketOnly&&(e||Ai("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Eu];else{const a=this.transports_=[];for(const c of TC.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class cy{constructor(t,e,s,a,c,f,y,b,T,x){this.id=t,this.repoInfo_=e,this.applicationId_=s,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=f,this.onReady_=y,this.onDisconnect_=b,this.onKill_=T,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sh("c:"+this.id+":"),this.transportManager_=new TC(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,s)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=Mh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=ns("t",t),s=ns("d",t);if("c"===e)this.onSecondaryControl_(s);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=ns("t",t),s=ns("d",t);"c"===e?this.onControl_(s):"d"===e&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=ns("t",t);if("d"in t){const s=t.d;if("h"===e)this.onHandshake_(s);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(s):"r"===e?this.onReset_(s):"e"===e?Y_("Server Error: "+s):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Y_("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,s=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==s&&Ai("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,s),Mh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dy{put(t,e,s,a){}merge(t,e,s,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,s){}onDisconnectMerge(t,e,s){}onDisconnectCancel(t,e){}reportStats(t){}}class hy{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,B.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let a=0;a<s.length;a++)s[a].callback.apply(s[a].context,e)}}on(t,e,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:s});const a=this.getInitialEvent(t);a&&e.apply(s,a)}off(t,e,s){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let c=0;c<a.length;c++)if(a[c].callback===e&&(!s||s===a[c].context))return void a.splice(c,1)}validateEventType_(t){(0,B.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Oh extends hy{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Oh}getInitialEvent(t){return(0,B.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class On{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let s=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[s]=this.pieces_[a],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Dn(){return new On("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cu(n){return n.pieces_.length-n.pieceNum_}function Kn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new On(n.pieces_,t)}function fy(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function rg(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function pD(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new On(t,0)}function nr(n,t){const e=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)e.push(n.pieces_[s]);if(t instanceof On)for(let s=t.pieceNum_;s<t.pieces_.length;s++)e.push(t.pieces_[s]);else{const s=t.split("/");for(let a=0;a<s.length;a++)s[a].length>0&&e.push(s[a])}return new On(e,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Si(n,t){const e=Xt(n),s=Xt(t);if(null===e)return t;if(e===s)return Si(Kn(n),Kn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function NC(n,t){const e=rg(n,0),s=rg(t,0);for(let a=0;a<e.length&&a<s.length;a++){const c=fl(e[a],s[a]);if(0!==c)return c}return e.length===s.length?0:e.length<s.length?-1:1}function OC(n,t){if(Cu(n)!==Cu(t))return!1;for(let e=n.pieceNum_,s=t.pieceNum_;e<=n.pieces_.length;e++,s++)if(n.pieces_[e]!==t.pieces_[s])return!1;return!0}function Tr(n,t){let e=n.pieceNum_,s=t.pieceNum_;if(Cu(n)>Cu(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[s])return!1;++e,++s}return!0}class SP{constructor(t,e){this.errorPrefix_=e,this.parts_=rg(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=(0,B.ug)(this.parts_[s]);py(this)}}function py(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gl(n))}function gl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ig extends hy{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new ig}getInitialEvent(t){return(0,B.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const xh=1e3;let ag,bu=(()=>{class n extends dy{constructor(e,s,a,c,f,y,b,T){if(super(),this.repoInfo_=e,this.applicationId_=s,this.onDataUpdate_=a,this.onConnectStatus_=c,this.onServerInfoUpdate_=f,this.authTokenProvider_=y,this.appCheckTokenProvider_=b,this.authOverride_=T,this.id=n.nextPersistentConnectionId_++,this.log_=Sh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,T&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ig.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Oh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,s,a){const c=++this.requestNumber_,f={r:c,a:e,b:s};this.log_((0,B.Pz)(f)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(f),a&&(this.requestCBHash_[c]=a)}get(e){this.initConnection_();const s=new B.BH,a={p:e._path.toString(),q:e._queryObject},c={action:"g",request:a,onComplete:y=>{const b=y.d;"ok"===y.s?(this.onDataUpdate_(a.p,b,!1,null),s.resolve(b)):s.reject(b)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const f=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const y=this.outstandingGets_[f];void 0===y||c!==y||(delete this.outstandingGets_[f],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+f+" timed out on connection"),s.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(f),s.promise}listen(e,s,a,c){this.initConnection_();const f=e._queryIdentifier,y=e._path.toString();this.log_("Listen called for "+y+" "+f),this.listens.has(y)||this.listens.set(y,new Map),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(y).has(f),"listen() called twice for same path/queryId.");const b={onComplete:c,hashFn:s,query:e,tag:a};this.listens.get(y).set(f,b),this.connected_&&this.sendListen_(b)}sendGet_(e){const s=this.outstandingGets_[e];this.sendRequest("g",s.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(a)})}sendListen_(e){const s=e.query,a=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+a+" for "+c);const f={p:a};e.tag&&(f.q=s._queryObject,f.t=e.tag),f.h=e.hashFn(),this.sendRequest("q",f,b=>{const T=b.d,x=b.s;n.warnOnListenWarnings_(T,s),(this.listens.get(a)&&this.listens.get(a).get(c))===e&&(this.log_("listen response",b),"ok"!==x&&this.removeListen_(a,c),e.onComplete&&e.onComplete(x,T))})}static warnOnListenWarnings_(e,s){if(e&&"object"==typeof e&&(0,B.r3)(e,"w")){const a=(0,B.DV)(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',f=s._path.toString();Ai(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${f} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,B.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,s=(0,B.w9)(e)?"auth":"gauth",a={cred:e};null===this.authOverride_?a.noauth=!0:"object"==typeof this.authOverride_&&(a.authvar=this.authOverride_),this.sendRequest(s,a,c=>{const f=c.s,y=c.d||"error";this.authToken_===e&&("ok"===f?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(f,y))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const s=e.s,a=e.d||"error";"ok"===s?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,a)})}unlisten(e,s){const a=e._path.toString(),c=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+c),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,c)&&this.connected_&&this.sendUnlisten_(a,c,e._queryObject,s)}sendUnlisten_(e,s,a,c){this.log_("Unlisten on "+e+" for "+s);const f={p:e};c&&(f.q=a,f.t=c),this.sendRequest("n",f)}onDisconnectPut(e,s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,s,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:s,onComplete:a})}onDisconnectMerge(e,s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,s,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:s,onComplete:a})}onDisconnectCancel(e,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(e,s,a,c){const f={p:s,d:a};this.log_("onDisconnect "+e,f),this.sendRequest(e,f,y=>{c&&setTimeout(()=>{c(y.s,y.d)},Math.floor(0))})}put(e,s,a,c){this.putInternal("p",e,s,a,c)}merge(e,s,a,c){this.putInternal("m",e,s,a,c)}putInternal(e,s,a,c,f){this.initConnection_();const y={p:s,d:a};void 0!==f&&(y.h=f),this.outstandingPuts_.push({action:e,request:y,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+s)}sendPut_(e){const s=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,c=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(s,a,f=>{this.log_(s+" response",f),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(f.s,f.d)})}reportStats(e){if(this.connected_){const s={c:e};this.log_("reportStats",s),this.sendRequest("s",s,a=>{"ok"!==a.s&&this.log_("reportStats","Error sending stats: "+a.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,B.Pz)(e));const s=e.r,a=this.requestCBHash_[s];a&&(delete this.requestCBHash_[s],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,s){this.log_("handleServerMessage",e,s),"d"===e?this.onDataUpdate_(s.p,s.d,!1,s.t):"m"===e?this.onDataUpdate_(s.p,s.d,!0,s.t):"c"===e?this.onListenRevoked_(s.p,s.q):"ac"===e?this.onAuthRevoked_(s.s,s.d):"apc"===e?this.onAppCheckRevoked_(s.s,s.d):"sd"===e?this.onSecurityDebugPacket_(s):Y_("Unrecognized action received from server: "+(0,B.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-e);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,hl.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const s=e.onDataMessage_.bind(e),a=e.onReady_.bind(e),c=e.onRealtimeDisconnect_.bind(e),f=e.id+":"+n.nextConnectionId_++,y=e.lastSessionId;let b=!1,T=null;const x=function(){T?T.close():(b=!0,c())};e.realtime_={close:x,sendRequest:function(pe){(0,B.hu)(T,"sendRequest call when we're not connected not allowed."),T.sendRequest(pe)}};const Z=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[pe,Ie]=yield Promise.all([e.authTokenProvider_.getToken(Z),e.appCheckTokenProvider_.getToken(Z)]);b?Wr("getToken() completed but was canceled"):(Wr("getToken() completed. Creating connection."),e.authToken_=pe&&pe.accessToken,e.appCheckToken_=Ie&&Ie.token,T=new cy(f,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,s,a,c,Ve=>{Ai(Ve+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},y))}catch(pe){e.log_("Failed to get token: "+pe),b||(e.repoInfo_.nodeAdmin&&Ai(pe),x())}}})()}interrupt(e){Wr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const s=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const s=this.outstandingPuts_[e];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,s){let a;a=s?s.map(f=>Ph(f)).join("$"):"default";const c=this.removeListen_(e,a);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(e,s){const a=new On(e).toString();let c;if(this.listens.has(a)){const f=this.listens.get(a);c=f.get(s),f.delete(s),0===f.size&&this.listens.delete(a)}else c=void 0;return c}onAuthRevoked_(e,s){Wr("Auth token revoked: "+e+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,s){Wr("App check token revoked: "+e+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const s of e.values())this.sendListen_(s);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let s="js";(0,B.Yr)()&&(s=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+s+"."+qp.replace(/\./g,"-")]=1,(0,B.uI)()?e["framework.cordova"]=1:(0,B.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Oh.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new sn(t,e)}}class og{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const s=new sn(Sa,t),a=new sn(Sa,e);return 0!==this.compare(s,a)}minPost(){return sn.MIN}}class kh extends og{static get __EMPTY_NODE(){return ag}static set __EMPTY_NODE(t){ag=t}compare(t,e){return fl(t.name,e.name)}isDefinedOn(t){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return sn.MIN}maxPost(){return new sn(so,ag)}makePost(t,e){return(0,B.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new sn(t,ag)}toString(){return".key"}}const ji=new kh;class Fh{constructor(t,e,s,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=e?s(t.key,e):1,a&&(f*=-1),f<0)t=this.isReverse_?t.left:t.right;else{if(0===f){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Os,Nr=(()=>{class n{constructor(e,s,a,c,f){this.key=e,this.value=s,this.color=null!=a?a:n.RED,this.left=null!=c?c:rs.EMPTY_NODE,this.right=null!=f?f:rs.EMPTY_NODE}copy(e,s,a,c,f){return new n(null!=e?e:this.key,null!=s?s:this.value,null!=a?a:this.color,null!=c?c:this.left,null!=f?f:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,a){let c=this;const f=a(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,s,a),null):0===f?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(e,s,a)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return rs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,s){let a,c;if(a=this,s(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),0===s(e,a.key)){if(a.right.isEmpty())return rs.EMPTY_NODE;c=a.right.min_(),a=a.copy(c.key,c.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class rs{constructor(t,e=rs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new rs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Nr.BLACK,null,null))}remove(t){return new rs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Nr.BLACK,null,null))}get(t){let e,s=this.root_;for(;!s.isEmpty();){if(e=this.comparator_(t,s.key),0===e)return s.value;e<0?s=s.left:e>0&&(s=s.right)}return null}getPredecessorKey(t){let e,s=this.root_,a=null;for(;!s.isEmpty();){if(e=this.comparator_(t,s.key),0===e){if(s.left.isEmpty())return a?a.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}e<0?s=s.left:e>0&&(a=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Fh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Fh(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Fh(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Fh(this.root_,null,this.comparator_,!0,t)}}function _D(n,t){return fl(n.name,t.name)}function Vh(n,t){return fl(n,t)}rs.EMPTY_NODE=new class{copy(t,e,s,a,c){return this}insert(t,e,s){return new Nr(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hi=function(n){return"number"==typeof n?"number:"+XI(n):"string:"+n},ml=function(n){if(n.isLeafNode()){const t=n.val();(0,B.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,B.r3)(t,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===Os||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===Os||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Bh,lg,wu,fi=(()=>{class n{constructor(e,s=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=s,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ml(this.priorityNode_)}static set __childrenNodeConstructor(e){Bh=e}static get __childrenNodeConstructor(){return Bh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return tn(e)?this:".priority"===Xt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,s){return null}updateImmediateChild(e,s){return".priority"===e?this.updatePriority(s):s.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,s).updatePriority(this.priorityNode_)}updateChild(e,s){const a=Xt(e);return null===a?s:s.isEmpty()&&".priority"!==a?this:((0,B.hu)(".priority"!==a||1===Cu(e),".priority must be the last token in a path"),this.updateImmediateChild(a,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(e),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,s){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hi(this.priorityNode_.val())+":");const s=typeof this.value_;e+=s+":",e+="number"===s?XI(this.value_):this.value_,this.lazyHash_=ZI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const s=typeof e.value_,a=typeof this.value_,c=n.VALUE_TYPE_ORDER.indexOf(s),f=n.VALUE_TYPE_ORDER.indexOf(a);return(0,B.hu)(c>=0,"Unknown leaf type: "+s),(0,B.hu)(f>=0,"Unknown leaf type: "+a),c===f?"object"===a?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:f-c}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const s=e;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rn=new class extends og{compare(t,e){const s=t.node.getPriority(),a=e.node.getPriority(),c=s.compareTo(a);return 0===c?fl(t.name,e.name):c}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(so,new fi("[PRIORITY-POST]",wu))}makePost(t,e){const s=lg(t);return new sn(e,new fi("[PRIORITY-POST]",s))}toString(){return".priority"}},Jc=Math.log(2);class Xc{constructor(t){this.count=parseInt(Math.log(t+1)/Jc,10),this.current_=this.count-1;const a=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ma=function(n,t,e,s){n.sort(t);const a=function(b,T){const x=T-b;let k,Z;if(0===x)return null;if(1===x)return k=n[b],Z=e?e(k):k,new Nr(Z,k.node,Nr.BLACK,null,null);{const pe=parseInt(x/2,10)+b,Ie=a(b,pe),Ve=a(pe+1,T);return k=n[pe],Z=e?e(k):k,new Nr(Z,k.node,Nr.BLACK,Ie,Ve)}},y=function(b){let T=null,x=null,k=n.length;const Z=function(Ie,Ve){const ze=k-Ie,$t=k;k-=Ie;const Dt=a(ze+1,$t),dn=n[ze],Ht=e?e(dn):dn;pe(new Nr(Ht,dn.node,Ve,null,Dt))},pe=function(Ie){T?(T.left=Ie,T=Ie):(x=Ie,T=Ie)};for(let Ie=0;Ie<b.count;++Ie){const Ve=b.nextBitIsOne(),ze=Math.pow(2,b.count-(Ie+1));Ve?Z(ze,Nr.BLACK):(Z(ze,Nr.BLACK),Z(ze,Nr.RED))}return x}(new Xc(n.length));return new rs(s||t,y)};let _l;const Tu={};class Wo{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,B.hu)(Tu&&Rn,"ChildrenNode.ts has not been loaded"),_l=_l||new Wo({".priority":Tu},{".priority":Rn}),_l}get(t){const e=(0,B.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof rs?e:null}hasIndex(t){return(0,B.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,B.hu)(t!==ji,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let a=!1;const c=e.getIterator(sn.Wrap);let y,f=c.getNext();for(;f;)a=a||t.isDefinedOn(f.node),s.push(f),f=c.getNext();y=a?Ma(s,t.getCompare()):Tu;const b=t.toString(),T=Object.assign({},this.indexSet_);T[b]=t;const x=Object.assign({},this.indexes_);return x[b]=y,new Wo(x,T)}addToIndexes(t,e){const s=(0,B.UI)(this.indexes_,(a,c)=>{const f=(0,B.DV)(this.indexSet_,c);if((0,B.hu)(f,"Missing index implementation for "+c),a===Tu){if(f.isDefinedOn(t.node)){const y=[],b=e.getIterator(sn.Wrap);let T=b.getNext();for(;T;)T.name!==t.name&&y.push(T),T=b.getNext();return y.push(t),Ma(y,f.getCompare())}return Tu}{const y=e.get(t.name);let b=a;return y&&(b=b.remove(new sn(t.name,y))),b.insert(t,t.node)}});return new Wo(s,this.indexSet_)}removeFromIndexes(t,e){const s=(0,B.UI)(this.indexes_,a=>{if(a===Tu)return a;{const c=e.get(t.name);return c?a.remove(new sn(t.name,c)):a}});return new Wo(s,this.indexSet_)}}let ed,jt=(()=>{class n{constructor(e,s,a){this.children_=e,this.priorityNode_=s,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&ml(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ed||(ed=new n(new rs(Vh),null,Wo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ed}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const s=this.children_.get(e);return null===s?ed:s}}getChild(e){const s=Xt(e);return null===s?this:this.getImmediateChild(s).getChild(Kn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,s){if((0,B.hu)(s,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(s);{const a=new sn(e,s);let c,f;s.isEmpty()?(c=this.children_.remove(e),f=this.indexMap_.removeFromIndexes(a,this.children_)):(c=this.children_.insert(e,s),f=this.indexMap_.addToIndexes(a,this.children_));const y=c.isEmpty()?ed:this.priorityNode_;return new n(c,y,f)}}updateChild(e,s){const a=Xt(e);if(null===a)return s;{(0,B.hu)(".priority"!==Xt(e)||1===Cu(e),".priority must be the last token in a path");const c=this.getImmediateChild(a).updateChild(Kn(e),s);return this.updateImmediateChild(a,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const s={};let a=0,c=0,f=!0;if(this.forEachChild(Rn,(y,b)=>{s[y]=b.val(e),a++,f&&n.INTEGER_REGEXP_.test(y)?c=Math.max(c,Number(y)):f=!1}),!e&&f&&c<2*a){const y=[];for(const b in s)y[b]=s[b];return y}return e&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+hi(this.getPriority().val())+":"),this.forEachChild(Rn,(s,a)=>{const c=a.hash();""!==c&&(e+=":"+s+":"+c)}),this.lazyHash_=""===e?"":ZI(e)}return this.lazyHash_}getPredecessorChildName(e,s,a){const c=this.resolveIndex_(a);if(c){const f=c.getPredecessorKey(new sn(e,s));return f?f.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const s=this.resolveIndex_(e);if(s){const a=s.minKey();return a&&a.name}return this.children_.minKey()}getFirstChild(e){const s=this.getFirstChildName(e);return s?new sn(s,this.children_.get(s)):null}getLastChildName(e){const s=this.resolveIndex_(e);if(s){const a=s.maxKey();return a&&a.name}return this.children_.maxKey()}getLastChild(e){const s=this.getLastChildName(e);return s?new sn(s,this.children_.get(s)):null}forEachChild(e,s){const a=this.resolveIndex_(e);return a?a.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,s){const a=this.resolveIndex_(s);if(a)return a.getIteratorFrom(e,c=>c);{const c=this.children_.getIteratorFrom(e.name,sn.Wrap);let f=c.peek();for(;null!=f&&s.compare(f,e)<0;)c.getNext(),f=c.peek();return c}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,s){const a=this.resolveIndex_(s);if(a)return a.getReverseIteratorFrom(e,c=>c);{const c=this.children_.getReverseIteratorFrom(e.name,sn.Wrap);let f=c.peek();for(;null!=f&&s.compare(f,e)>0;)c.getNext(),f=c.peek();return c}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===td?-1:0}withIndex(e){if(e===ji||this.indexMap_.hasIndex(e))return this;{const s=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,s)}}isIndexed(e){return e===ji||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const s=e;if(this.getPriority().equals(s.getPriority())){if(this.children_.count()===s.children_.count()){const a=this.getIterator(Rn),c=s.getIterator(Rn);let f=a.getNext(),y=c.getNext();for(;f&&y;){if(f.name!==y.name||!f.node.equals(y.node))return!1;f=a.getNext(),y=c.getNext()}return null===f&&null===y}return!1}return!1}}resolveIndex_(e){return e===ji?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const td=new class extends jt{constructor(){super(new rs(Vh),jt.EMPTY_NODE,Wo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return jt.EMPTY_NODE}isEmpty(){return!1}};function hr(n,t=null){if(null===n)return jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,B.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fi(n,hr(t));if(n instanceof Array){let e=jt.EMPTY_NODE;return ii(n,(s,a)=>{if((0,B.r3)(n,s)&&"."!==s.substring(0,1)){const c=hr(a);(c.isLeafNode()||!c.isEmpty())&&(e=e.updateImmediateChild(s,c))}}),e.updatePriority(hr(t))}{const e=[];let s=!1;if(ii(n,(f,y)=>{if("."!==f.substring(0,1)){const b=hr(y);b.isEmpty()||(s=s||!b.getPriority().isEmpty(),e.push(new sn(f,b)))}}),0===e.length)return jt.EMPTY_NODE;const c=Ma(e,_D,f=>f.name,Vh);if(s){const f=Ma(e,Rn.getCompare());return new jt(c,hr(t),new Wo({".priority":f},{".priority":Rn}))}return new jt(c,hr(t),Wo.Default)}}Object.defineProperties(sn,{MIN:{value:new sn(Sa,jt.EMPTY_NODE)},MAX:{value:new sn(so,td)}}),kh.__EMPTY_NODE=jt.EMPTY_NODE,fi.__childrenNodeConstructor=jt,Os=td,wu=td,function(n){lg=n}(hr);class ug extends og{constructor(t){super(),this.indexPath_=t,(0,B.hu)(!tn(t)&&".priority"!==Xt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const s=this.extractChild(t.node),a=this.extractChild(e.node),c=s.compareTo(a);return 0===c?fl(t.name,e.name):c}makePost(t,e){const s=hr(t),a=jt.EMPTY_NODE.updateChild(this.indexPath_,s);return new sn(e,a)}maxPost(){const t=jt.EMPTY_NODE.updateChild(this.indexPath_,td);return new sn(so,t)}toString(){return rg(this.indexPath_,0).join("/")}}const cg=new class extends og{compare(t,e){const s=t.node.compareTo(e.node);return 0===s?fl(t.name,e.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(t,e){const s=hr(t);return new sn(e,s)}toString(){return".value"}},nd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",NP=function(){let n=0;const t=[];return function(e){const s=e===n;let a;n=e;const c=new Array(8);for(a=7;a>=0;a--)c[a]=nd.charAt(e%64),e=Math.floor(e/64);(0,B.hu)(0===e,"Cannot push at time == 0");let f=c.join("");if(s){for(a=11;a>=0&&63===t[a];a--)t[a]=0;t[a]++}else for(a=0;a<12;a++)t[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)f+=nd.charAt(t[a]);return(0,B.hu)(20===f.length,"nextPushId: Length should be 20."),f}}(),UC=function(n){if(n===""+Q_)return"-";const t=Yp(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let f=0;f<e.length;f++)e[f]=n.charAt(f);if(e.length<786)return e.push("-"),e.join("");let s=e.length-1;for(;s>=0&&"z"===e[s];)s--;if(-1===s)return so;const c=nd.charAt(nd.indexOf(e[s])+1);return e[s]=c,e.slice(0,s+1).join("")},_y=function(n){if(n===""+Zp)return Sa;const t=Yp(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let s=0;s<e.length;s++)e[s]=n.charAt(s);return"-"===e[e.length-1]?1===e.length?""+Q_:(delete e[e.length-1],e.join("")):(e[e.length-1]=nd.charAt(nd.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function BC(n){return{type:"value",snapshotNode:n}}function Iu(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function jh(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function $h(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class yy{constructor(t){this.index_=t}updateChild(t,e,s,a,c,f){(0,B.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const y=t.getImmediateChild(e);return y.getChild(a).equals(s.getChild(a))&&y.isEmpty()===s.isEmpty()||(null!=f&&(s.isEmpty()?t.hasChild(e)?f.trackChildChange(jh(e,y)):(0,B.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):y.isEmpty()?f.trackChildChange(Iu(e,s)):f.trackChildChange($h(e,s,y))),t.isLeafNode()&&s.isEmpty())?t:t.updateImmediateChild(e,s).withIndex(this.index_)}updateFullNode(t,e,s){return null!=s&&(t.isLeafNode()||t.forEachChild(Rn,(a,c)=>{e.hasChild(a)||s.trackChildChange(jh(a,c))}),e.isLeafNode()||e.forEachChild(Rn,(a,c)=>{if(t.hasChild(a)){const f=t.getImmediateChild(a);f.equals(c)||s.trackChildChange($h(a,c,f))}else s.trackChildChange(Iu(a,c))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?jt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rd{constructor(t){this.indexedFilter_=new yy(t.getIndex()),this.index_=t.getIndex(),this.startPost_=rd.getStartPost_(t),this.endPost_=rd.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,s,a,c,f){return this.matches(new sn(e,s))||(s=jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,s,a,c,f)}updateFullNode(t,e,s){e.isLeafNode()&&(e=jt.EMPTY_NODE);let a=e.withIndex(this.index_);a=a.updatePriority(jt.EMPTY_NODE);const c=this;return e.forEachChild(Rn,(f,y)=>{c.matches(new sn(f,y))||(a=a.updateImmediateChild(f,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,s)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class xP{constructor(t){this.rangedFilter_=new rd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,s,a,c,f){return this.rangedFilter_.matches(new sn(e,s))||(s=jt.EMPTY_NODE),t.getImmediateChild(e).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,s,a,c,f):this.fullLimitUpdateChild_(t,e,s,c,f)}updateFullNode(t,e,s){let a;if(e.isLeafNode()||e.isEmpty())a=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let c;a=jt.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;c.hasNext()&&f<this.limit_;){const y=c.getNext();let b;if(b=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),y)<=0:this.index_.compare(y,this.rangedFilter_.getEndPost())<=0,!b)break;a=a.updateImmediateChild(y.name,y.node),f++}}else{let c,f,y,b;if(a=e.withIndex(this.index_),a=a.updatePriority(jt.EMPTY_NODE),this.reverse_){b=a.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),f=this.rangedFilter_.getStartPost();const k=this.index_.getCompare();y=(Z,pe)=>k(pe,Z)}else b=a.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),f=this.rangedFilter_.getEndPost(),y=this.index_.getCompare();let T=0,x=!1;for(;b.hasNext();){const k=b.getNext();!x&&y(c,k)<=0&&(x=!0),x&&T<this.limit_&&y(k,f)<=0?T++:a=a.updateImmediateChild(k.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,s)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,s,a,c){let f;if(this.reverse_){const k=this.index_.getCompare();f=(Z,pe)=>k(pe,Z)}else f=this.index_.getCompare();const y=t;(0,B.hu)(y.numChildren()===this.limit_,"");const b=new sn(e,s),T=this.reverse_?y.getFirstChild(this.index_):y.getLastChild(this.index_),x=this.rangedFilter_.matches(b);if(y.hasChild(e)){const k=y.getImmediateChild(e);let Z=a.getChildAfterChild(this.index_,T,this.reverse_);for(;null!=Z&&(Z.name===e||y.hasChild(Z.name));)Z=a.getChildAfterChild(this.index_,Z,this.reverse_);const pe=null==Z?1:f(Z,b);if(x&&!s.isEmpty()&&pe>=0)return null!=c&&c.trackChildChange($h(e,s,k)),y.updateImmediateChild(e,s);{null!=c&&c.trackChildChange(jh(e,k));const Ve=y.updateImmediateChild(e,jt.EMPTY_NODE);return null!=Z&&this.rangedFilter_.matches(Z)?(null!=c&&c.trackChildChange(Iu(Z.name,Z.node)),Ve.updateImmediateChild(Z.name,Z.node)):Ve}}return s.isEmpty()?t:x&&f(T,b)>=0?(null!=c&&(c.trackChildChange(jh(T.name,T.node)),c.trackChildChange(Iu(e,s))),y.updateImmediateChild(e,s).updateImmediateChild(T.name,jt.EMPTY_NODE)):t}}class vy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sa}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:so}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rn}copy(){const t=new vy;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Ey(n,t,e){const s=n.copy();return s.startSet_=!0,void 0===t&&(t=null),s.indexStartValue_=t,null!=e?(s.startNameSet_=!0,s.indexStartName_=e):(s.startNameSet_=!1,s.indexStartName_=""),s}function Hh(n,t,e){const s=n.copy();return s.endSet_=!0,void 0===t&&(t=null),s.indexEndValue_=t,void 0!==e?(s.endNameSet_=!0,s.indexEndName_=e):(s.endNameSet_=!1,s.indexEndName_=""),s}function hg(n,t){const e=n.copy();return e.index_=t,e}function CD(n){const t={};if(n.isDefault())return t;let e;return n.index_===Rn?e="$priority":n.index_===cg?e="$value":n.index_===ji?e="$key":((0,B.hu)(n.index_ instanceof ug,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,B.Pz)(e),n.startSet_&&(t.startAt=(0,B.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,B.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,B.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,B.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function bD(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Rn&&(t.i=n.index_.toString()),t}class by extends dy{constructor(t,e,s,a){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.log_=Sh("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,B.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,s,a){const c=t._path.toString();this.log_("Listen called for "+c+" "+t._queryIdentifier);const f=by.getListenId_(t,s),y={};this.listens_[f]=y;const b=CD(t._queryParams);this.restRequest_(c+".json",b,(T,x)=>{let k=x;if(404===T&&(k=null,T=null),null===T&&this.onDataUpdate_(c,k,!1,s),(0,B.DV)(this.listens_,f)===y){let Z;Z=T?401===T?"permission_denied":"rest_error:"+T:"ok",a(Z,null)}})}unlisten(t,e){const s=by.getListenId_(t,e);delete this.listens_[s]}get(t){const e=CD(t._queryParams),s=t._path.toString(),a=new B.BH;return this.restRequest_(s+".json",e,(c,f)=>{let y=f;404===c&&(y=null,c=null),null===c?(this.onDataUpdate_(s,y,!1,null),a.resolve(y)):a.reject(new Error(y))}),a.promise}refreshAuthToken(t){}restRequest_(t,e={},s){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(e.auth=a.accessToken),c&&c.token&&(e.ac=c.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,B.xO)(e);this.log_("Sending REST request for "+f);const y=new XMLHttpRequest;y.onreadystatechange=()=>{if(s&&4===y.readyState){this.log_("REST Response for "+f+" received. status:",y.status,"response:",y.responseText);let b=null;if(y.status>=200&&y.status<300){try{b=(0,B.cI)(y.responseText)}catch(T){Ai("Failed to parse JSON response for "+f+": "+y.responseText)}s(null,b)}else 401!==y.status&&404!==y.status&&Ai("Got unsuccessful REST response for "+f+" Status: "+y.status),s(y.status);s=null}},y.open("GET",f,!0),y.send()})}}class wD{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Wh(){return{value:null,children:new Map}}function Gh(n,t,e){if(tn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const s=Xt(t);n.children.has(s)||n.children.set(s,Wh()),Gh(n.children.get(s),t=Kn(t),e)}}function wy(n,t){if(tn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Rn,(s,a)=>{Gh(n,new On(s),a)}),wy(n,t)}}if(n.children.size>0){const e=Xt(t);return t=Kn(t),n.children.has(e)&&wy(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function yl(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,s)=>{t(s,e)})}(n,(s,a)=>{yl(a,new On(t.toString()+"/"+s),e)})}class jC{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ii(this.last_,(s,a)=>{e[s]=e[s]-a}),this.last_=t,e}}class ID{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new jC(t);const s=1e4+2e4*Math.random();Mh(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),e={};let s=!1;ii(t,(a,c)=>{c>0&&(0,B.r3)(this.statsToReport_,a)&&(e[a]=c,s=!0)}),s&&this.server_.reportStats(e),Mh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _s=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_s||(_s={})),_s))();function Dy(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class pg{constructor(t,e,s){this.path=t,this.affectedTree=e,this.revert=s,this.type=_s.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new On(t));return new pg(Dn(),e,this.revert)}}return(0,B.hu)(Xt(this.path)===t,"operationForChild called for unrelated child."),new pg(Kn(this.path),this.affectedTree,this.revert)}}class zh{constructor(t,e){this.source=t,this.path=e,this.type=_s.LISTEN_COMPLETE}operationForChild(t){return tn(this.path)?new zh(this.source,Dn()):new zh(this.source,Kn(this.path))}}class vl{constructor(t,e,s){this.source=t,this.path=e,this.snap=s,this.type=_s.OVERWRITE}operationForChild(t){return tn(this.path)?new vl(this.source,Dn(),this.snap.getImmediateChild(t)):new vl(this.source,Kn(this.path),this.snap)}}class id{constructor(t,e,s){this.source=t,this.path=e,this.children=s,this.type=_s.MERGE}operationForChild(t){if(tn(this.path)){const e=this.children.subtree(new On(t));return e.isEmpty()?null:e.value?new vl(this.source,Dn(),e.value):new id(this.source,Dn(),e)}return(0,B.hu)(Xt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new id(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Na{constructor(t,e,s){this.node_=t,this.fullyInitialized_=e,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(tn(t))return this.isFullyInitialized()&&!this.filtered_;const e=Xt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class WC{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function gg(n,t,e,s,a,c){const f=s.filter(y=>y.type===e);f.sort((y,b)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,B.g5)("Should only compare child_ events.");const s=new sn(t.childName,t.snapshotNode),a=new sn(e.childName,e.snapshotNode);return n.index_.compare(s,a)}(n,y,b)),f.forEach(y=>{const b=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,y,c);a.forEach(T=>{T.respondsTo(y.type)&&t.push(T.createEvent(b,n.query_))})})}function Ry(n,t){return{eventCache:n,serverCache:t}}function Oa(n,t,e,s){return Ry(new Na(t,e,s),n.serverCache)}function GC(n,t,e,s){return Ry(n.eventCache,new Na(t,e,s))}function sd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Py;class Zn{constructor(t,e=(()=>(Py||(Py=new rs(JI)),Py))()){this.value=t,this.children=e}static fromObject(t){let e=new Zn(null);return ii(t,(s,a)=>{e=e.set(new On(s),a)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Dn(),value:this.value};if(tn(t))return null;{const s=Xt(t),a=this.children.get(s);if(null!==a){const c=a.findRootMostMatchingPathAndValue(Kn(t),e);return null!=c?{path:nr(new On(s),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(tn(t))return this;{const e=Xt(t),s=this.children.get(e);return null!==s?s.subtree(Kn(t)):new Zn(null)}}set(t,e){if(tn(t))return new Zn(e,this.children);{const s=Xt(t),c=(this.children.get(s)||new Zn(null)).set(Kn(t),e),f=this.children.insert(s,c);return new Zn(this.value,f)}}remove(t){if(tn(t))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const e=Xt(t),s=this.children.get(e);if(s){const a=s.remove(Kn(t));let c;return c=a.isEmpty()?this.children.remove(e):this.children.insert(e,a),null===this.value&&c.isEmpty()?new Zn(null):new Zn(this.value,c)}return this}}get(t){if(tn(t))return this.value;{const e=Xt(t),s=this.children.get(e);return s?s.get(Kn(t)):null}}setTree(t,e){if(tn(t))return e;{const s=Xt(t),c=(this.children.get(s)||new Zn(null)).setTree(Kn(t),e);let f;return f=c.isEmpty()?this.children.remove(s):this.children.insert(s,c),new Zn(this.value,f)}}fold(t){return this.fold_(Dn(),t)}fold_(t,e){const s={};return this.children.inorderTraversal((a,c)=>{s[a]=c.fold_(nr(t,a),e)}),e(t,this.value,s)}findOnPath(t,e){return this.findOnPath_(t,Dn(),e)}findOnPath_(t,e,s){const a=!!this.value&&s(e,this.value);if(a)return a;if(tn(t))return null;{const c=Xt(t),f=this.children.get(c);return f?f.findOnPath_(Kn(t),nr(e,c),s):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Dn(),e)}foreachOnPath_(t,e,s){if(tn(t))return this;{this.value&&s(e,this.value);const a=Xt(t),c=this.children.get(a);return c?c.foreachOnPath_(Kn(t),nr(e,a),s):new Zn(null)}}foreach(t){this.foreach_(Dn(),t)}foreach_(t,e){this.children.inorderTraversal((s,a)=>{a.foreach_(nr(t,s),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,s)=>{s.value&&t(e,s.value)})}}class xs{constructor(t){this.writeTree_=t}static empty(){return new xs(new Zn(null))}}function mg(n,t,e){if(tn(t))return new xs(new Zn(e));{const s=n.writeTree_.findRootMostValueAndPath(t);if(null!=s){const a=s.path;let c=s.value;const f=Si(a,t);return c=c.updateChild(f,e),new xs(n.writeTree_.set(a,c))}{const a=new Zn(e),c=n.writeTree_.setTree(t,a);return new xs(c)}}}function Ny(n,t,e){let s=n;return ii(e,(a,c)=>{s=mg(s,nr(t,a),c)}),s}function _g(n,t){if(tn(t))return xs.empty();{const e=n.writeTree_.setTree(t,new Zn(null));return new xs(e)}}function qh(n,t){return null!=Du(n,t)}function Du(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Si(e.path,t)):null}function Oy(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Rn,(s,a)=>{t.push(new sn(s,a))}):n.writeTree_.children.inorderTraversal((s,a)=>{null!=a.value&&t.push(new sn(s,a.value))}),t}function Go(n,t){if(tn(t))return n;{const e=Du(n,t);return new xs(null!=e?new Zn(e):n.writeTree_.subtree(t))}}function yg(n){return n.writeTree_.isEmpty()}function El(n,t){return vg(Dn(),n.writeTree_,t)}function vg(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let s=null;return t.children.inorderTraversal((a,c)=>{".priority"===a?((0,B.hu)(null!==c.value,"Priority writes must always be leaf nodes"),s=c.value):e=vg(nr(n,a),c,e)}),!e.getChild(n).isEmpty()&&null!==s&&(e=e.updateChild(nr(n,".priority"),s)),e}}function Kh(n,t){return tb(t,n)}function KC(n,t){if(n.snap)return Tr(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Tr(nr(n.path,e),t))return!0;return!1}function ZC(n){return n.visible}function ky(n,t,e){let s=xs.empty();for(let a=0;a<n.length;++a){const c=n[a];if(t(c)){const f=c.path;let y;if(c.snap)Tr(e,f)?(y=Si(e,f),s=mg(s,y,c.snap)):Tr(f,e)&&(y=Si(f,e),s=mg(s,Dn(),c.snap.getChild(y)));else{if(!c.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(Tr(e,f))y=Si(e,f),s=Ny(s,y,c.children);else if(Tr(f,e))if(y=Si(f,e),tn(y))s=Ny(s,Dn(),c.children);else{const b=(0,B.DV)(c.children,Xt(y));if(b){const T=b.getChild(Kn(y));s=mg(s,Dn(),T)}}}}}return s}function Fy(n,t,e,s,a){if(s||a){const c=Go(n.visibleWrites,t);return!a&&yg(c)?e:a||null!=e||qh(c,Dn())?El(ky(n.allWrites,function(T){return(T.visible||a)&&(!s||!~s.indexOf(T.writeId))&&(Tr(T.path,t)||Tr(t,T.path))},t),e||jt.EMPTY_NODE):null}{const c=Du(n.visibleWrites,t);if(null!=c)return c;{const f=Go(n.visibleWrites,t);return yg(f)?e:null!=e||qh(f,Dn())?El(f,e||jt.EMPTY_NODE):null}}}function Zh(n,t,e,s){return Fy(n.writeTree,n.treePath,t,e,s)}function Eg(n,t){return function(n,t,e){let s=jt.EMPTY_NODE;const a=Du(n.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(Rn,(c,f)=>{s=s.updateImmediateChild(c,f)}),s;if(e){const c=Go(n.visibleWrites,t);return e.forEachChild(Rn,(f,y)=>{const b=El(Go(c,new On(f)),y);s=s.updateImmediateChild(f,b)}),Oy(c).forEach(f=>{s=s.updateImmediateChild(f.name,f.node)}),s}return Oy(Go(n.visibleWrites,t)).forEach(f=>{s=s.updateImmediateChild(f.name,f.node)}),s}(n.writeTree,n.treePath,t)}function Vy(n,t,e,s){return function(n,t,e,s,a){(0,B.hu)(s||a,"Either existingEventSnap or existingServerSnap must exist");const c=nr(t,e);if(qh(n.visibleWrites,c))return null;{const f=Go(n.visibleWrites,c);return yg(f)?a.getChild(e):El(f,a.getChild(e))}}(n.writeTree,n.treePath,t,e,s)}function Uy(n,t){return function(n,t){return Du(n.visibleWrites,t)}(n.writeTree,nr(n.treePath,t))}function By(n,t,e){return function(n,t,e,s){const a=nr(t,e),c=Du(n.visibleWrites,a);return null!=c?c:s.isCompleteForChild(e)?El(Go(n.visibleWrites,a),s.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function jy(n,t){return tb(nr(n.treePath,t),n.writeTree)}function tb(n,t){return{treePath:n,writeTree:t}}class Gr{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,s=t.childName;(0,B.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==s,"Only non-priority child changes can be tracked.");const a=this.changeMap.get(s);if(a){const c=a.type;if("child_added"===e&&"child_removed"===c)this.changeMap.set(s,$h(s,t.snapshotNode,a.snapshotNode));else if("child_removed"===e&&"child_added"===c)this.changeMap.delete(s);else if("child_removed"===e&&"child_changed"===c)this.changeMap.set(s,jh(s,a.oldSnap));else if("child_changed"===e&&"child_added"===c)this.changeMap.set(s,Iu(s,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==c)throw(0,B.g5)("Illegal combination of changes: "+t+" occurred after "+a);this.changeMap.set(s,$h(s,t.snapshotNode,a.oldSnap))}}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}const rb=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,s){return null}};class $y{constructor(t,e,s=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=s}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const s=null!=this.optCompleteServerCache_?new Na(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return By(this.writes_,t,s)}}getChildAfterChild(t,e,s){const a=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xa(this.viewCache_),c=function(n,t,e,s,a,c){return function(n,t,e,s,a,c,f){let y;const b=Go(n.visibleWrites,t),T=Du(b,Dn());if(null!=T)y=T;else{if(null==e)return[];y=El(b,e)}if(y=y.withIndex(f),y.isEmpty()||y.isLeafNode())return[];{const x=[],k=f.getCompare(),Z=c?y.getReverseIteratorFrom(s,f):y.getIteratorFrom(s,f);let pe=Z.getNext();for(;pe&&x.length<a;)0!==k(pe,s)&&x.push(pe),pe=Z.getNext();return x}}(n.writeTree,n.treePath,t,e,s,a,c)}(this.writes_,a,e,1,s,t);return 0===c.length?null:c[0]}}function Au(n,t,e,s,a,c){const f=t.eventCache;if(null!=Uy(s,e))return t;{let y,b;if(tn(e))if((0,B.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const T=xa(t),k=Eg(s,T instanceof jt?T:jt.EMPTY_NODE);y=n.filter.updateFullNode(t.eventCache.getNode(),k,c)}else{const T=Zh(s,xa(t));y=n.filter.updateFullNode(t.eventCache.getNode(),T,c)}else{const T=Xt(e);if(".priority"===T){(0,B.hu)(1===Cu(e),"Can't have a priority with additional path components");const x=f.getNode();b=t.serverCache.getNode();const k=Vy(s,e,x,b);y=null!=k?n.filter.updatePriority(x,k):f.getNode()}else{const x=Kn(e);let k;if(f.isCompleteForChild(T)){b=t.serverCache.getNode();const Z=Vy(s,e,f.getNode(),b);k=null!=Z?f.getNode().getImmediateChild(T).updateChild(x,Z):f.getNode().getImmediateChild(T)}else k=By(s,T,t.serverCache);y=null!=k?n.filter.updateChild(f.getNode(),T,k,x,a,c):f.getNode()}}return Oa(t,y,f.isFullyInitialized()||tn(e),n.filter.filtersNodes())}}function Cg(n,t,e,s,a,c,f,y){const b=t.serverCache;let T;const x=f?n.filter:n.filter.getIndexedFilter();if(tn(e))T=x.updateFullNode(b.getNode(),s,null);else if(x.filtersNodes()&&!b.isFiltered()){const pe=b.getNode().updateChild(e,s);T=x.updateFullNode(b.getNode(),pe,null)}else{const pe=Xt(e);if(!b.isCompleteForPath(e)&&Cu(e)>1)return t;const Ie=Kn(e),ze=b.getNode().getImmediateChild(pe).updateChild(Ie,s);T=".priority"===pe?x.updatePriority(b.getNode(),ze):x.updateChild(b.getNode(),pe,ze,Ie,rb,null)}const k=GC(t,T,b.isFullyInitialized()||tn(e),x.filtersNodes());return Au(n,k,e,a,new $y(a,k,c),y)}function Hy(n,t,e,s,a,c,f){const y=t.eventCache;let b,T;const x=new $y(a,t,c);if(tn(e))T=n.filter.updateFullNode(t.eventCache.getNode(),s,f),b=Oa(t,T,!0,n.filter.filtersNodes());else{const k=Xt(e);if(".priority"===k)T=n.filter.updatePriority(t.eventCache.getNode(),s),b=Oa(t,T,y.isFullyInitialized(),y.isFiltered());else{const Z=Kn(e),pe=y.getNode().getImmediateChild(k);let Ie;if(tn(Z))Ie=s;else{const Ve=x.getCompleteChild(k);Ie=null!=Ve?".priority"===fy(Z)&&Ve.getChild(pD(Z)).isEmpty()?Ve:Ve.updateChild(Z,s):jt.EMPTY_NODE}b=pe.equals(Ie)?t:Oa(t,n.filter.updateChild(y.getNode(),k,Ie,Z,x,f),y.isFullyInitialized(),n.filter.filtersNodes())}}return b}function Wy(n,t){return n.eventCache.isCompleteForChild(t)}function Gy(n,t,e){return e.foreach((s,a)=>{t=t.updateChild(s,a)}),t}function ab(n,t,e,s,a,c,f,y){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let T,b=t;T=tn(e)?s:new Zn(null).setTree(e,s);const x=t.serverCache.getNode();return T.children.inorderTraversal((k,Z)=>{if(x.hasChild(k)){const Ie=Gy(0,t.serverCache.getNode().getImmediateChild(k),Z);b=Cg(n,b,new On(k),Ie,a,c,f,y)}}),T.children.inorderTraversal((k,Z)=>{const pe=!t.serverCache.isCompleteForChild(k)&&void 0===Z.value;if(!x.hasChild(k)&&!pe){const Ve=Gy(0,t.serverCache.getNode().getImmediateChild(k),Z);b=Cg(n,b,new On(k),Ve,a,c,f,y)}}),b}class ND{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,a=new yy(s.getIndex()),c=function(n){return n.loadsAllData()?new yy(n.getIndex()):n.hasLimit()?new xP(n):new rd(n)}(s);this.processor_=function(n){return{filter:n}}(c);const f=e.serverCache,y=e.eventCache,b=a.updateFullNode(jt.EMPTY_NODE,f.getNode(),null),T=c.updateFullNode(jt.EMPTY_NODE,y.getNode(),null),x=new Na(b,f.isFullyInitialized(),a.filtersNodes()),k=new Na(T,y.isFullyInitialized(),c.filtersNodes());this.viewCache_=Ry(k,x),this.eventGenerator_=new WC(this.query_)}get query(){return this.query_}}function oo(n,t){const e=xa(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!tn(t)&&!e.getImmediateChild(Xt(t)).isEmpty())?e.getChild(t):null}function ks(n){return 0===n.eventRegistrations_.length}function qy(n,t,e){const s=[];if(e){(0,B.hu)(null==t,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(c=>{const f=c.createCancelEvent(e,a);f&&s.push(f)})}if(t){let a=[];for(let c=0;c<n.eventRegistrations_.length;++c){const f=n.eventRegistrations_[c];if(f.matches(t)){if(t.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(c+1));break}}else a.push(f)}n.eventRegistrations_=a}else n.eventRegistrations_=[];return s}function cb(n,t,e,s){t.type===_s.MERGE&&null!==t.source.queryId&&((0,B.hu)(xa(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(sd(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,c=function(n,t,e,s,a){const c=new Gr;let f,y;if(e.type===_s.OVERWRITE){const T=e;T.source.fromUser?f=Hy(n,t,T.path,T.snap,s,a,c):((0,B.hu)(T.source.fromServer,"Unknown source."),y=T.source.tagged||t.serverCache.isFiltered()&&!tn(T.path),f=Cg(n,t,T.path,T.snap,s,a,y,c))}else if(e.type===_s.MERGE){const T=e;T.source.fromUser?f=function(n,t,e,s,a,c,f){let y=t;return s.foreach((b,T)=>{const x=nr(e,b);Wy(t,Xt(x))&&(y=Hy(n,y,x,T,a,c,f))}),s.foreach((b,T)=>{const x=nr(e,b);Wy(t,Xt(x))||(y=Hy(n,y,x,T,a,c,f))}),y}(n,t,T.path,T.children,s,a,c):((0,B.hu)(T.source.fromServer,"Unknown source."),y=T.source.tagged||t.serverCache.isFiltered(),f=ab(n,t,T.path,T.children,s,a,y,c))}else if(e.type===_s.ACK_USER_WRITE){const T=e;f=T.revert?function(n,t,e,s,a,c){let f;if(null!=Uy(s,e))return t;{const y=new $y(s,t,a),b=t.eventCache.getNode();let T;if(tn(e)||".priority"===Xt(e)){let x;if(t.serverCache.isFullyInitialized())x=Zh(s,xa(t));else{const k=t.serverCache.getNode();(0,B.hu)(k instanceof jt,"serverChildren would be complete if leaf node"),x=Eg(s,k)}x=x,T=n.filter.updateFullNode(b,x,c)}else{const x=Xt(e);let k=By(s,x,t.serverCache);null==k&&t.serverCache.isCompleteForChild(x)&&(k=b.getImmediateChild(x)),T=null!=k?n.filter.updateChild(b,x,k,Kn(e),y,c):t.eventCache.getNode().hasChild(x)?n.filter.updateChild(b,x,jt.EMPTY_NODE,Kn(e),y,c):b,T.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=Zh(s,xa(t)),f.isLeafNode()&&(T=n.filter.updateFullNode(T,f,c)))}return f=t.serverCache.isFullyInitialized()||null!=Uy(s,Dn()),Oa(t,T,f,n.filter.filtersNodes())}}(n,t,T.path,s,a,c):function(n,t,e,s,a,c,f){if(null!=Uy(a,e))return t;const y=t.serverCache.isFiltered(),b=t.serverCache;if(null!=s.value){if(tn(e)&&b.isFullyInitialized()||b.isCompleteForPath(e))return Cg(n,t,e,b.getNode().getChild(e),a,c,y,f);if(tn(e)){let T=new Zn(null);return b.getNode().forEachChild(ji,(x,k)=>{T=T.set(new On(x),k)}),ab(n,t,e,T,a,c,y,f)}return t}{let T=new Zn(null);return s.foreach((x,k)=>{const Z=nr(e,x);b.isCompleteForPath(Z)&&(T=T.set(x,b.getNode().getChild(Z)))}),ab(n,t,e,T,a,c,y,f)}}(n,t,T.path,T.affectedTree,s,a,c)}else{if(e.type!==_s.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+e.type);f=function(n,t,e,s,a){const c=t.serverCache;return Au(n,GC(t,c.getNode(),c.isFullyInitialized()||tn(e),c.isFiltered()),e,s,rb,a)}(n,t,e.path,s,c)}const b=c.getChanges();return function(n,t,e){const s=t.eventCache;if(s.isFullyInitialized()){const a=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=sd(n);(e.length>0||!n.eventCache.isFullyInitialized()||a&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&e.push(BC(sd(t)))}}(t,f,b),{viewCache:f,changes:b}}(n.processor_,a,t,e,s);return function(n,t){(0,B.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,c.viewCache),(0,B.hu)(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,db(n,c.changes,c.viewCache.eventCache.getNode(),null)}function db(n,t,e,s){return function(n,t,e,s){const a=[],c=[];return t.forEach(f=>{"child_changed"===f.type&&n.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&c.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(f.childName,f.snapshotNode))}),gg(n,a,"child_removed",t,s,e),gg(n,a,"child_added",t,s,e),gg(n,a,"child_moved",c,s,e),gg(n,a,"child_changed",t,s,e),gg(n,a,"value",t,s,e),a}(n.eventGenerator_,t,e,s?[s]:n.eventRegistrations_)}let bg,Jh;class wg{constructor(){this.views=new Map}}function Ky(n,t,e,s){const a=t.source.queryId;if(null!==a){const c=n.views.get(a);return(0,B.hu)(null!=c,"SyncTree gave us an op for an invalid query."),cb(c,t,e,s)}{let c=[];for(const f of n.views.values())c=c.concat(cb(f,t,e,s));return c}}function Zy(n,t,e,s,a){const f=n.views.get(t._queryIdentifier);if(!f){let y=Zh(e,a?s:null),b=!1;y?b=!0:s instanceof jt?(y=Eg(e,s),b=!1):(y=jt.EMPTY_NODE,b=!1);const T=Ry(new Na(y,b,!1),new Na(s,a,!1));return new ND(t,T)}return f}function pb(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function ka(n,t){let e=null;for(const s of n.views.values())e=e||oo(s,t);return e}function Yy(n,t){return t._queryParams.loadsAllData()?Qh(n):n.views.get(t._queryIdentifier)}function Ig(n,t){return null!=Yy(n,t)}function ao(n){return null!=Qh(n)}function Qh(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let _b=1;class Qy{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Zn(null),this.pendingWriteTree_={visibleWrites:xs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Dg(n,t,e,s,a){return function(n,t,e,s,a){(0,B.hu)(s>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),n.allWrites.push({path:t,snap:e,writeId:s,visible:a}),a&&(n.visibleWrites=mg(n.visibleWrites,t,e)),n.lastWriteId=s}(n.pendingWriteTree_,t,e,s,a),a?od(n,new vl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Cl(n,t,e=!1){const s=function(n,t){for(let e=0;e<n.allWrites.length;e++){const s=n.allWrites[e];if(s.writeId===t)return s}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(y=>y.writeId===t);(0,B.hu)(e>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[e];n.allWrites.splice(e,1);let a=s.visible,c=!1,f=n.allWrites.length-1;for(;a&&f>=0;){const y=n.allWrites[f];y.visible&&(f>=e&&KC(y,s.path)?a=!1:Tr(s.path,y.path)&&(c=!0)),f--}return!!a&&(c?(function(n){n.visibleWrites=ky(n.allWrites,ZC,Dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(s.snap?n.visibleWrites=_g(n.visibleWrites,s.path):ii(s.children,b=>{n.visibleWrites=_g(n.visibleWrites,nr(s.path,b))}),!0))}(n.pendingWriteTree_,t)){let c=new Zn(null);return null!=s.snap?c=c.set(Dn(),!0):ii(s.children,f=>{c=c.set(new On(f),!0)}),od(n,new pg(s.path,c,e))}return[]}function Xh(n,t,e){return od(n,new vl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Jy(n,t,e,s){const a=t._path,c=n.syncPointTree_.get(a);let f=[];if(c&&("default"===t._queryIdentifier||Ig(c,t))){const y=function(n,t,e,s){const a=t._queryIdentifier,c=[];let f=[];const y=ao(n);if("default"===a)for(const[b,T]of n.views.entries())f=f.concat(qy(T,e,s)),ks(T)&&(n.views.delete(b),T.query._queryParams.loadsAllData()||c.push(T.query));else{const b=n.views.get(a);b&&(f=f.concat(qy(b,e,s)),ks(b)&&(n.views.delete(a),b.query._queryParams.loadsAllData()||c.push(b.query)))}return y&&!ao(n)&&c.push(new((0,B.hu)(bg,"Reference.ts has not been loaded"),bg)(t._repo,t._path)),{removed:c,events:f}}(c,t,e,s);(function(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const b=y.removed;f=y.events;const T=-1!==b.findIndex(k=>k._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(a,(k,Z)=>ao(Z));if(T&&!x){const k=n.syncPointTree_.subtree(a);if(!k.isEmpty()){const Z=function(n){return n.fold((t,e,s)=>{if(e&&ao(e))return[Qh(e)];{let a=[];return e&&(a=pb(e)),ii(s,(c,f)=>{a=a.concat(f)}),a}})}(k);for(let pe=0;pe<Z.length;++pe){const Ie=Z[pe],Ve=Ie.query,ze=bb(n,Ie);n.listenProvider_.startListening(ad(Ve),Sg(n,Ve),ze.hashFn,ze.onComplete)}}}if(!x&&b.length>0&&!s)if(T){const k=null;n.listenProvider_.stopListening(ad(t),k)}else b.forEach(k=>{const Z=n.queryToTagMap.get(Rg(k));n.listenProvider_.stopListening(ad(k),Z)});!function(n,t){for(let e=0;e<t.length;++e){const s=t[e];if(!s._queryParams.loadsAllData()){const a=Rg(s),c=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(c)}}}(n,b)}return f}function vb(n,t,e){const s=t._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(s,(k,Z)=>{const pe=Si(k,s);a=a||ka(Z,pe),c=c||ao(Z)});let y,f=n.syncPointTree_.get(s);f?(c=c||ao(f),a=a||ka(f,Dn())):(f=new wg,n.syncPointTree_=n.syncPointTree_.set(s,f)),null!=a?y=!0:(y=!1,a=jt.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((Z,pe)=>{const Ie=ka(pe,Dn());Ie&&(a=a.updateImmediateChild(Z,Ie))}));const b=Ig(f,t);if(!b&&!t._queryParams.loadsAllData()){const k=Rg(t);(0,B.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const Z=_b++;n.queryToTagMap.set(k,Z),n.tagToQueryMap.set(Z,k)}let x=function(n,t,e,s,a,c){const f=Zy(n,t,s,a,c);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,f),function(n,t){n.eventRegistrations_.push(t)}(f,e),function(n,t){const e=n.viewCache_.eventCache,s=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Rn,(c,f)=>{s.push(Iu(c,f))}),e.isFullyInitialized()&&s.push(BC(e.getNode())),db(n,s,e.getNode(),t)}(f,e)}(f,t,e,Kh(n.pendingWriteTree_,s),a,y);if(!b&&!c){const k=Yy(f,t);x=x.concat(function(n,t,e){const s=t._path,a=Sg(n,t),c=bb(n,e),f=n.listenProvider_.startListening(ad(t),a,c.hashFn,c.onComplete),y=n.syncPointTree_.subtree(s);if(a)(0,B.hu)(!ao(y.value),"If we're adding a query, it shouldn't be shadowed");else{const b=y.fold((T,x,k)=>{if(!tn(T)&&x&&ao(x))return[Qh(x).query];{let Z=[];return x&&(Z=Z.concat(pb(x).map(pe=>pe.query))),ii(k,(pe,Ie)=>{Z=Z.concat(Ie)}),Z}});for(let T=0;T<b.length;++T){const x=b[T];n.listenProvider_.stopListening(ad(x),Sg(n,x))}}return f}(n,t,k))}return x}function Ag(n,t,e){const a=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(t,(f,y)=>{const T=ka(y,Si(f,t));if(T)return T});return Fy(a,t,c,e,!0)}function od(n,t){return Eb(t,n.syncPointTree_,null,Kh(n.pendingWriteTree_,Dn()))}function Eb(n,t,e,s){if(tn(n.path))return Cb(n,t,e,s);{const a=t.get(Dn());null==e&&null!=a&&(e=ka(a,Dn()));let c=[];const f=Xt(n.path),y=n.operationForChild(f),b=t.children.get(f);if(b&&y){const T=e?e.getImmediateChild(f):null,x=jy(s,f);c=c.concat(Eb(y,b,T,x))}return a&&(c=c.concat(Ky(a,n,s,e))),c}}function Cb(n,t,e,s){const a=t.get(Dn());null==e&&null!=a&&(e=ka(a,Dn()));let c=[];return t.children.inorderTraversal((f,y)=>{const b=e?e.getImmediateChild(f):null,T=jy(s,f),x=n.operationForChild(f);x&&(c=c.concat(Cb(x,y,b,T)))}),a&&(c=c.concat(Ky(a,n,s,e))),c}function bb(n,t){const e=t.query,s=Sg(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||jt.EMPTY_NODE).hash(),onComplete:a=>{if("ok"===a)return s?function(n,t,e){const s=Xy(n,e);if(s){const a=Pg(s),c=a.path,f=a.queryId,y=Si(c,t);return Mg(n,c,new zh(Dy(f),y))}return[]}(n,e._path,s):function(n,t){return od(n,new zh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const c=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const s=new Error(n+" at "+t._path.toString()+": "+e);return s.code=n.toUpperCase(),s}(a,e);return Jy(n,e,null,c)}}}}function Sg(n,t){const e=Rg(t);return n.queryToTagMap.get(e)}function Rg(n){return n._path.toString()+"$"+n._queryIdentifier}function Xy(n,t){return n.tagToQueryMap.get(t)}function Pg(n){const t=n.indexOf("$");return(0,B.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new On(n.substr(0,t))}}function Mg(n,t,e){const s=n.syncPointTree_.get(t);return(0,B.hu)(s,"Missing sync point for query tag that we're tracking"),Ky(s,e,Kh(n.pendingWriteTree_,t),null)}function ad(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,B.hu)(Jh,"Reference.ts has not been loaded"),Jh)(n._repo,n._path):n}class Ng{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ng(e)}node(){return this.node_}}class Og{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=nr(this.path_,t);return new Og(this.syncTree_,e)}node(){return Ag(this.syncTree_,this.path_)}}const tv=function(n,t,e){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Su(n[".sv"],t,e):"object"==typeof n[".sv"]?$D(n[".sv"],t):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Su=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,B.hu)(!1,"Unexpected server value: "+n)}},$D=function(n,t,e){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;"number"!=typeof s&&(0,B.hu)(!1,"Unexpected increment value: "+s);const a=t.node();if((0,B.hu)(null!=a,"Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return s;const f=a.getValue();return"number"!=typeof f?s:f+s},Ab=function(n,t,e,s){return Sb(t,new Og(e,n),s)},bl=function(n,t,e){return Sb(n,new Ng(t),e)};function Sb(n,t,e){const s=n.getPriority().val(),a=tv(s,t.getImmediateChild(".priority"),e);let c;if(n.isLeafNode()){const f=n,y=tv(f.getValue(),t,e);return y!==f.getValue()||a!==f.getPriority().val()?new fi(y,hr(a)):n}{const f=n;return c=f,a!==f.getPriority().val()&&(c=c.updatePriority(new fi(a))),f.forEachChild(Rn,(y,b)=>{const T=Sb(b,t.getImmediateChild(y),e);T!==b&&(c=c.updateImmediateChild(y,T))}),c}}class ef{constructor(t="",e=null,s={children:{},childCount:0}){this.name=t,this.parent=e,this.node=s}}function nv(n,t){let e=t instanceof On?t:new On(t),s=n,a=Xt(e);for(;null!==a;){const c=(0,B.DV)(s.node.children,a)||{children:{},childCount:0};s=new ef(a,s,c),e=Kn(e),a=Xt(e)}return s}function wl(n){return n.node.value}function xg(n,t){n.node.value=t,rv(n)}function HD(n){return n.node.childCount>0}function kg(n,t){ii(n.node.children,(e,s)=>{t(new ef(e,n,s))})}function Rb(n,t,e,s){e&&!s&&t(n),kg(n,a=>{Rb(a,t,!0,s)}),e&&s&&t(n)}function Tl(n){return new On(null===n.parent?n.name:Tl(n.parent)+"/"+n.name)}function rv(n){null!==n.parent&&function(n,t,e){const s=function(n){return void 0===wl(n)&&!HD(n)}(e),a=(0,B.r3)(n.node.children,t);s&&a?(delete n.node.children[t],n.node.childCount--,rv(n)):!s&&!a&&(n.node.children[t]=e.node,n.node.childCount++,rv(n))}(n.parent,n.name,n)}const Lg=/[\[\].#$\/\u0000-\u001F\u007F]/,Ir=/[\[\].#$\u0000-\u001F\u007F]/,Pb=10485760,tf=function(n){return"string"==typeof n&&0!==n.length&&!Lg.test(n)},Vg=function(n){return"string"==typeof n&&0!==n.length&&!Ir.test(n)},ld=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Rh(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},lo=function(n,t,e,s){s&&void 0===t||ud((0,B.gK)(n,"value"),t,e)},ud=function(n,t,e){const s=e instanceof On?new SP(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+gl(s));if("function"==typeof t)throw new Error(n+"contains a function "+gl(s)+" with contents = "+t.toString());if(Rh(t))throw new Error(n+"contains "+t.toString()+" "+gl(s));if("string"==typeof t&&t.length>Pb/3&&(0,B.ug)(t)>Pb)throw new Error(n+"contains a string greater than "+Pb+" utf8 bytes "+gl(s)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let a=!1,c=!1;if(ii(t,(f,y)=>{if(".value"===f)a=!0;else if(".priority"!==f&&".sv"!==f&&(c=!0,!tf(f)))throw new Error(n+" contains an invalid key ("+f+") "+gl(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,B.ug)(t),py(n)})(s,f),ud(n,y,s),function(n){const t=n.parts_.pop();n.byteLength_-=(0,B.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(s)}),a&&c)throw new Error(n+' contains ".value" child '+gl(s)+" in addition to actual children.")}},Nb=function(n,t,e,s){if(s&&void 0===t)return;const a=(0,B.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(a+" must be an object containing the children to replace.");const c=[];ii(t,(f,y)=>{const b=new On(f);if(ud(a,y,nr(e,b)),".priority"===fy(b)&&!ld(y))throw new Error(a+"contains an invalid value for '"+b.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(b)}),function(n,t){let e,s;for(e=0;e<t.length;e++){s=t[e];const c=rg(s);for(let f=0;f<c.length;f++)if((".priority"!==c[f]||f!==c.length-1)&&!tf(c[f]))throw new Error(n+"contains an invalid key ("+c[f]+") in path "+s.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(NC);let a=null;for(e=0;e<t.length;e++){if(s=t[e],null!==a&&Tr(a,s))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+s.toString());a=s}}(a,c)},iv=function(n,t,e){if(!e||void 0!==t){if(Rh(t))throw new Error((0,B.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ld(t))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},nf=function(n,t,e,s){if(!(s&&void 0===e||tf(e)))throw new Error((0,B.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Fa=function(n,t,e,s){if(!(s&&void 0===e||Vg(e)))throw new Error((0,B.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fs=function(n,t){if(".info"===Xt(t))throw new Error(n+" failed = Can't modify data under /.info/")},Ob=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!tf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vg(n)}(e))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ug{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rf(n,t){let e=null;for(let s=0;s<t.length;s++){const a=t[s],c=a.getPath();null!==e&&!OC(c,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:c}),e.events.push(a)}e&&n.eventLists_.push(e)}function Bg(n,t,e){rf(n,e),xb(n,s=>OC(s,t))}function ys(n,t,e){rf(n,e),xb(n,s=>Tr(s,t)||Tr(t,s))}function xb(n,t){n.recursionDepth_++;let e=!0;for(let s=0;s<n.eventLists_.length;s++){const a=n.eventLists_[s];a&&(t(a.path)?(sf(n.eventLists_[s]),n.eventLists_[s]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function sf(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const s=e.getEventRunner();Hc&&Wr("event: "+e.toString()),Ra(s)}}}const cd="repo_interrupt";class KD{constructor(t,e,s,a){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=s,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ug,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wh(),this.transactionQueueTree_=new ef,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sv(n){const e=n.infoData_.getNode(new On(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function dd(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:sv(n)})}function ov(n,t,e,s,a){n.dataUpdateCount++;const c=new On(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let f=[];if(a)if(s){const b=(0,B.UI)(e,T=>hr(T));f=function(n,t,e,s){const a=Xy(n,s);if(a){const c=Pg(a),f=c.path,y=c.queryId,b=Si(f,t),T=Zn.fromObject(e);return Mg(n,f,new id(Dy(y),b,T))}return[]}(n.serverSyncTree_,c,b,a)}else{const b=hr(e);f=function(n,t,e,s){const a=Xy(n,s);if(null!=a){const c=Pg(a),f=c.path,y=c.queryId,b=Si(f,t);return Mg(n,f,new vl(Dy(y),b,e))}return[]}(n.serverSyncTree_,c,b,a)}else if(s){const b=(0,B.UI)(e,T=>hr(T));f=function(n,t,e){const s=Zn.fromObject(e);return od(n,new id({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,s))}(n.serverSyncTree_,c,b)}else{const b=hr(e);f=Xh(n.serverSyncTree_,c,b)}let y=c;f.length>0&&(y=uo(n,c)),ys(n.eventQueue_,y,f)}function kb(n,t){av(n,"connected",t),!1===t&&function(n){hd(n,"onDisconnectEvents");const t=dd(n),e=Wh();yl(n.onDisconnect_,Dn(),(a,c)=>{const f=Ab(a,c,n.serverSyncTree_,t);Gh(e,a,f)});let s=[];yl(e,Dn(),(a,c)=>{s=s.concat(Xh(n.serverSyncTree_,a,c));const f=Gg(n,a);uo(n,f)}),n.onDisconnect_=Wh(),ys(n.eventQueue_,Dn(),s)}(n)}function av(n,t,e){const s=new On("/.info/"+t),a=hr(e);n.infoData_.updateSnapshot(s,a);const c=Xh(n.infoSyncTree_,s,a);ys(n.eventQueue_,s,c)}function jg(n){return n.nextWriteId_++}function Lb(n,t,e,s,a){hd(n,"set",{path:t.toString(),value:e,priority:s});const c=dd(n),f=hr(e,s),y=Ag(n.serverSyncTree_,t),b=bl(f,y,c),T=jg(n),x=Dg(n.serverSyncTree_,t,b,T,!0);rf(n.eventQueue_,x),n.server_.put(t.toString(),f.val(!0),(Z,pe)=>{const Ie="ok"===Z;Ie||Ai("set at "+t+" failed: "+Z);const Ve=Cl(n.serverSyncTree_,T,!Ie);ys(n.eventQueue_,t,Ve),Il(0,a,Z,pe)});const k=Gg(n,t);uo(n,k),ys(n.eventQueue_,k,[])}function Vb(n,t,e){n.server_.onDisconnectCancel(t.toString(),(s,a)=>{"ok"===s&&wy(n.onDisconnect_,t),Il(0,e,s,a)})}function of(n,t,e,s){const a=hr(e);n.server_.onDisconnectPut(t.toString(),a.val(!0),(c,f)=>{"ok"===c&&Gh(n.onDisconnect_,t,a),Il(0,s,c,f)})}function Ru(n,t,e){let s;s=".info"===Xt(t._path)?Jy(n.infoSyncTree_,t,e):Jy(n.serverSyncTree_,t,e),Bg(n.eventQueue_,t._path,s)}function Bb(n){n.persistentConnection_&&n.persistentConnection_.interrupt(cd)}function hd(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Wr(e,...t)}function Il(n,t,e,s){t&&Ra(()=>{if("ok"===e)t(null);else{const a=(e||"error").toUpperCase();let c=a;s&&(c+=": "+s);const f=new Error(c);f.code=a,t(f)}})}function $g(n,t,e){return Ag(n.serverSyncTree_,t,e)||jt.EMPTY_NODE}function Hg(n,t=n.transactionQueueTree_){if(t||Wg(n,t),wl(t)){const e=jb(n,t);(0,B.hu)(e.length>0,"Sending zero length transaction queue"),e.every(a=>0===a.status)&&function(n,t,e){const s=e.map(T=>T.currentWriteId),a=$g(n,t,s);let c=a;const f=a.hash();for(let T=0;T<e.length;T++){const x=e[T];(0,B.hu)(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const k=Si(t,x.path);c=c.updateChild(k,x.currentOutputSnapshotRaw)}const y=c.val(!0),b=t;n.server_.put(b.toString(),y,T=>{hd(n,"transaction put response",{path:b.toString(),status:T});let x=[];if("ok"===T){const k=[];for(let Z=0;Z<e.length;Z++)e[Z].status=2,x=x.concat(Cl(n.serverSyncTree_,e[Z].currentWriteId)),e[Z].onComplete&&k.push(()=>e[Z].onComplete(null,!0,e[Z].currentOutputSnapshotResolved)),e[Z].unwatcher();Wg(n,nv(n.transactionQueueTree_,t)),Hg(n,n.transactionQueueTree_),ys(n.eventQueue_,t,x);for(let Z=0;Z<k.length;Z++)Ra(k[Z])}else{if("datastale"===T)for(let k=0;k<e.length;k++)e[k].status=3===e[k].status?4:0;else{Ai("transaction at "+b.toString()+" failed: "+T);for(let k=0;k<e.length;k++)e[k].status=4,e[k].abortReason=T}uo(n,t)}},f)}(n,Tl(t),e)}else HD(t)&&kg(t,e=>{Hg(n,e)})}function uo(n,t){const e=lv(n,t),s=Tl(e);return function(n,t,e){if(0===t.length)return;const s=[];let a=[];const f=t.filter(y=>0===y.status).map(y=>y.currentWriteId);for(let y=0;y<t.length;y++){const b=t[y],T=Si(e,b.path);let k,x=!1;if((0,B.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===b.status)x=!0,k=b.abortReason,a=a.concat(Cl(n.serverSyncTree_,b.currentWriteId,!0));else if(0===b.status)if(b.retryCount>=25)x=!0,k="maxretry",a=a.concat(Cl(n.serverSyncTree_,b.currentWriteId,!0));else{const Z=$g(n,b.path,f);b.currentInputSnapshot=Z;const pe=t[y].update(Z.val());if(void 0!==pe){ud("transaction failed: Data returned ",pe,b.path);let Ie=hr(pe);"object"==typeof pe&&null!=pe&&(0,B.r3)(pe,".priority")||(Ie=Ie.updatePriority(Z.getPriority()));const ze=b.currentWriteId,$t=dd(n),Dt=bl(Ie,Z,$t);b.currentOutputSnapshotRaw=Ie,b.currentOutputSnapshotResolved=Dt,b.currentWriteId=jg(n),f.splice(f.indexOf(ze),1),a=a.concat(Dg(n.serverSyncTree_,b.path,Dt,b.currentWriteId,b.applyLocally)),a=a.concat(Cl(n.serverSyncTree_,ze,!0))}else x=!0,k="nodata",a=a.concat(Cl(n.serverSyncTree_,b.currentWriteId,!0))}ys(n.eventQueue_,e,a),a=[],x&&(t[y].status=2,setTimeout(t[y].unwatcher,Math.floor(0)),t[y].onComplete&&s.push("nodata"===k?()=>t[y].onComplete(null,!1,t[y].currentInputSnapshot):()=>t[y].onComplete(new Error(k),!1,null)))}Wg(n,n.transactionQueueTree_);for(let y=0;y<s.length;y++)Ra(s[y]);Hg(n,n.transactionQueueTree_)}(n,jb(n,e),s),s}function lv(n,t){let e,s=n.transactionQueueTree_;for(e=Xt(t);null!==e&&void 0===wl(s);)s=nv(s,e),e=Xt(t=Kn(t));return s}function jb(n,t){const e=[];return uv(n,t,e),e.sort((s,a)=>s.order-a.order),e}function uv(n,t,e){const s=wl(t);if(s)for(let a=0;a<s.length;a++)e.push(s[a]);kg(t,a=>{uv(n,a,e)})}function Wg(n,t){const e=wl(t);if(e){let s=0;for(let a=0;a<e.length;a++)2!==e[a].status&&(e[s]=e[a],s++);e.length=s,xg(t,e.length>0?e:void 0)}kg(t,s=>{Wg(n,s)})}function Gg(n,t){const e=Tl(lv(n,t)),s=nv(n.transactionQueueTree_,t);return function(n,t,e){let s=n.parent;for(;null!==s;){if(t(s))return!0;s=s.parent}}(s,a=>{cv(n,a)}),cv(n,s),Rb(s,a=>{cv(n,a)}),e}function cv(n,t){const e=wl(t);if(e){const s=[];let a=[],c=-1;for(let f=0;f<e.length;f++)3===e[f].status||(1===e[f].status?((0,B.hu)(c===f-1,"All SENT items should be at beginning of queue."),c=f,e[f].status=3,e[f].abortReason="set"):((0,B.hu)(0===e[f].status,"Unexpected transaction status in abort"),e[f].unwatcher(),a=a.concat(Cl(n.serverSyncTree_,e[f].currentWriteId,!0)),e[f].onComplete&&s.push(e[f].onComplete.bind(null,new Error("set"),!1,null))));-1===c?xg(t,void 0):e.length=c+1,ys(n.eventQueue_,Tl(t),a);for(let f=0;f<s.length;f++)Ra(s[f])}}const zg=function(n,t){const e=$b(n),s=e.namespace;return"firebase.com"===e.domain&&$o(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||"undefined"===s)&&"localhost"!==e.domain&&$o("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ai("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Gc(e.host,e.secure,s,t,"ws"===e.scheme||"wss"===e.scheme,"",s!==e.subdomain),path:new On(e.pathString)}},$b=function(n){let t="",e="",s="",a="",c="",f=!0,y="https",b=443;if("string"==typeof n){let T=n.indexOf("//");T>=0&&(y=n.substring(0,T-1),n=n.substring(T+2));let x=n.indexOf("/");-1===x&&(x=n.length);let k=n.indexOf("?");-1===k&&(k=n.length),t=n.substring(0,Math.min(x,k)),x<k&&(a=function(n){let t="";const e=n.split("/");for(let s=0;s<e.length;s++)if(e[s].length>0){let a=e[s];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(c){}t+="/"+a}return t}(n.substring(x,k)));const Z=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const s=e.split("=");2===s.length?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ai(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,k)));T=t.indexOf(":"),T>=0?(f="https"===y||"wss"===y,b=parseInt(t.substring(T+1),10)):T=t.length;const pe=t.slice(0,T);if("localhost"===pe.toLowerCase())e="localhost";else if(pe.split(".").length<=2)e=pe;else{const Ie=t.indexOf(".");s=t.substring(0,Ie).toLowerCase(),e=t.substring(Ie+1),c=s}"ns"in Z&&(c=Z.ns)}return{host:t,port:b,domain:e,subdomain:s,secure:f,scheme:y,pathString:a,namespace:c}};class Hb{constructor(t,e,s,a){this.eventType=t,this.eventRegistration=e,this.snapshot=s,this.prevName=a}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Pz)(this.snapshot.exportVal())}}class Wb{constructor(t,e,s){this.eventRegistration=t,this.error=e,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Gb{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class qg{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new B.BH;return Vb(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Fs("OnDisconnect.remove",this._path);const t=new B.BH;return of(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Fs("OnDisconnect.set",this._path),lo("OnDisconnect.set",t,this._path,!1);const e=new B.BH;return of(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Fs("OnDisconnect.setWithPriority",this._path),lo("OnDisconnect.setWithPriority",t,this._path,!1),iv("OnDisconnect.setWithPriority",e,!1);const s=new B.BH;return function(n,t,e,s,a){const c=hr(e,s);n.server_.onDisconnectPut(t.toString(),c.val(!0),(f,y)=>{"ok"===f&&Gh(n.onDisconnect_,t,c),Il(0,a,f,y)})}(this._repo,this._path,t,e,s.wrapCallback(()=>{})),s.promise}update(t){Fs("OnDisconnect.update",this._path),Nb("OnDisconnect.update",t,this._path,!1);const e=new B.BH;return function(n,t,e,s){if((0,B.xb)(e))return Wr("onDisconnect().update() called with empty data.  Don't do anything."),void Il(0,s,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(a,c)=>{"ok"===a&&ii(e,(f,y)=>{const b=hr(y);Gh(n.onDisconnect_,nr(t,f),b)}),Il(0,s,a,c)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class is{constructor(t,e,s,a){this._repo=t,this._path=e,this._queryParams=s,this._orderByCalled=a}get key(){return tn(this._path)?null:fy(this._path)}get ref(){return new Ls(this._repo,this._path)}get _queryIdentifier(){const t=bD(this._queryParams),e=Ph(t);return"{}"===e?"default":e}get _queryObject(){return bD(this._queryParams)}isEqual(t){if(!((t=(0,B.m9)(t))instanceof is))return!1;const e=this._repo===t._repo,s=OC(this._path,t._path);return e&&s&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function af(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Dl(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===ji){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Sa)throw new Error(s);if("string"!=typeof t)throw new Error(a)}if(n.hasEnd()){if(n.getIndexEndName()!==so)throw new Error(s);if("string"!=typeof e)throw new Error(a)}}else if(n.getIndex()===Rn){if(null!=t&&!ld(t)||null!=e&&!ld(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof ug||n.getIndex()===cg,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Kg(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ls extends is{constructor(t,e){super(t,e,new vy,!1)}get parent(){const t=pD(this._path);return null===t?null:new Ls(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Pu{constructor(t,e,s){this._node=t,this.ref=e,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new On(t),s=Mu(this.ref,t);return new Pu(this._node.getChild(e),s,Rn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(s,a)=>t(new Pu(a,Mu(this.ref,s),Rn)))}hasChild(t){const e=new On(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function zb(n,t){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==t?Mu(n._root,t):n._root}function qb(n,t){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const e=zg(t,n._repo.repoInfo_.nodeAdmin);Ob("refFromURL",e);const s=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&s.host!==n._repo.repoInfo_.host&&$o("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+n._repo.repoInfo_.host+")"),zb(n,e.path.toString())}function Mu(n,t){return null===Xt((n=(0,B.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Fa("child","path",e,!1)):Fa("child","path",t,!1),new Ls(n._repo,nr(n._path,t));var e}function hv(n,t){n=(0,B.m9)(n),Fs("set",n._path),lo("set",t,n._path,!1);const e=new B.BH;return Lb(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function iA(n,t){Nb("update",t,n._path,!1);const e=new B.BH;return function(n,t,e,s){hd(n,"update",{path:t.toString(),value:e});let a=!0;const c=dd(n),f={};if(ii(e,(y,b)=>{a=!1,f[y]=Ab(nr(t,y),hr(b),n.serverSyncTree_,c)}),a)Wr("update() called with empty data.  Don't do anything."),Il(0,s,"ok",void 0);else{const y=jg(n),b=function(n,t,e,s){!function(n,t,e,s){(0,B.hu)(s>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:s,visible:!0}),n.visibleWrites=Ny(n.visibleWrites,t,e),n.lastWriteId=s}(n.pendingWriteTree_,t,e,s);const a=Zn.fromObject(e);return od(n,new id({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,a))}(n.serverSyncTree_,t,f,y);rf(n.eventQueue_,b),n.server_.merge(t.toString(),e,(T,x)=>{const k="ok"===T;k||Ai("update at "+t+" failed: "+T);const Z=Cl(n.serverSyncTree_,y,!k),pe=Z.length>0?uo(n,t):t;ys(n.eventQueue_,pe,Z),Il(0,s,T,x)}),ii(e,T=>{const x=Gg(n,nr(t,T));uo(n,x)}),ys(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function sA(n){return function(n,t){const e=function(n,t){const e=t._path;let s=null;n.syncPointTree_.foreachOnPath(e,(T,x)=>{const k=Si(T,e);s=s||ka(x,k)});let a=n.syncPointTree_.get(e);a?s=s||ka(a,Dn()):(a=new wg,n.syncPointTree_=n.syncPointTree_.set(e,a));const c=null!=s,f=c?new Na(s,!0,!1):null;return function(n){return sd(n.viewCache_)}(Zy(a,t,Kh(n.pendingWriteTree_,t._path),c?f.getNode():jt.EMPTY_NODE,c))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(s=>{const a=hr(s).withIndex(t._queryParams.getIndex()),c=Xh(n.serverSyncTree_,t._path,a);return Bg(n.eventQueue_,t._path,c),Promise.resolve(a)},s=>(hd(n,"get for query "+(0,B.Pz)(t)+" failed: "+s),Promise.reject(new Error(s))))}((n=(0,B.m9)(n))._repo,n).then(t=>new Pu(t,new Ls(n._repo,n._path),n._queryParams.getIndex()))}class Zg{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const s=e._queryParams.getIndex();return new Hb("value",this,new Pu(t.snapshotNode,new Ls(e._repo,e._path),s))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Wb(this,t,e):null}matches(t){return t instanceof Zg&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class fd{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Wb(this,t,e):null}createEvent(t,e){(0,B.hu)(null!=t.childName,"Child events should have a childName.");const s=Mu(new Ls(e._repo,e._path),t.childName),a=e._queryParams.getIndex();return new Hb(t.type,this,new Pu(t.snapshotNode,s,a),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof fd&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Nu(n,t,e,s,a){let c;if("object"==typeof s&&(c=void 0,a=s),"function"==typeof s&&(c=s),a&&a.onlyOnce){const b=e,T=(x,k)=>{Ru(n._repo,n,y),b(x,k)};T.userCallback=e.userCallback,T.context=e.context,e=T}const f=new Gb(e,c||void 0),y="value"===t?new Zg(f):new fd(t,f);return function(n,t,e){let s;s=".info"===Xt(t._path)?vb(n.infoSyncTree_,t,e):vb(n.serverSyncTree_,t,e),Bg(n.eventQueue_,t._path,s)}(n._repo,n,y),()=>Ru(n._repo,n,y)}function Yg(n,t,e,s){return Nu(n,"value",t,e,s)}function Qg(n,t,e,s){return Nu(n,"child_added",t,e,s)}function Qb(n,t,e,s){return Nu(n,"child_changed",t,e,s)}function Jb(n,t,e,s){return Nu(n,"child_moved",t,e,s)}function Jg(n,t,e,s){return Nu(n,"child_removed",t,e,s)}function Xb(n,t,e){let s=null;const a=e?new Gb(e):null;"value"===t?s=new Zg(a):t&&(s=new fd(t,a)),Ru(n._repo,n,s)}class Vs{}class ew extends Vs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lo("endAt",this._value,t._path,!0);const e=Hh(t._queryParams,this._value,this._key);if(Kg(e),Dl(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(t._repo,t._path,e,t._orderByCalled)}}class nw extends Vs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lo("endBefore",this._value,t._path,!1);const e=function(n,t,e){let s,a;return n.index_===ji?("string"==typeof t&&(t=_y(t)),a=Hh(n,t,e)):(s=null==e?Sa:_y(e),a=Hh(n,t,s)),a.endBeforeSet_=!0,a}(t._queryParams,this._value,this._key);if(Kg(e),Dl(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(t._repo,t._path,e,t._orderByCalled)}}class oA extends Vs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lo("startAt",this._value,t._path,!0);const e=Ey(t._queryParams,this._value,this._key);if(Kg(e),Dl(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new is(t._repo,t._path,e,t._orderByCalled)}}class pd extends Vs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){lo("startAfter",this._value,t._path,!1);const e=function(n,t,e){let s;if(n.index_===ji)"string"==typeof t&&(t=UC(t)),s=Ey(n,t,e);else{let a;a=null==e?so:UC(e),s=Ey(n,t,a)}return s.startAfterSet_=!0,s}(t._queryParams,this._value,this._key);if(Kg(e),Dl(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new is(t._repo,t._path,e,t._orderByCalled)}}class fv extends Vs{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class lA extends Vs{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class uA extends Vs{constructor(t){super(),this._path=t}_apply(t){af(t,"orderByChild");const e=new On(this._path);if(tn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new ug(e),a=hg(t._queryParams,s);return Dl(a),new is(t._repo,t._path,a,!0)}}class cA extends Vs{_apply(t){af(t,"orderByKey");const e=hg(t._queryParams,ji);return Dl(e),new is(t._repo,t._path,e,!0)}}class iw extends Vs{_apply(t){af(t,"orderByPriority");const e=hg(t._queryParams,Rn);return Dl(e),new is(t._repo,t._path,e,!0)}}class em extends Vs{_apply(t){af(t,"orderByValue");const e=hg(t._queryParams,cg);return Dl(e),new is(t._repo,t._path,e,!0)}}class hA extends Vs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(lo("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ew(this._value,this._key)._apply(new oA(this._value,this._key)._apply(t))}}function co(n,...t){let e=(0,B.m9)(n);for(const s of t)e=s._apply(e);return e}(function(n){(0,B.hu)(!bg,"__referenceConstructor has already been defined"),bg=n})(Ls),function(n){(0,B.hu)(!Jh,"__referenceConstructor has already been defined"),Jh=n}(Ls);const pv={};function nm(n,t,e,s,a){let c=s||n.options.databaseURL;void 0===c&&(n.options.projectId||$o("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wr("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let b,T,f=zg(c,a),y=f.repoInfo;"undefined"!=typeof process&&(T=process.env.FIREBASE_DATABASE_EMULATOR_HOST),T?(b=!0,c=`http://${T}?ns=${y.namespace}`,f=zg(c,a),y=f.repoInfo):b=!f.repoInfo.secure;const x=a&&b?new Wc(Wc.OWNER):new ey(n.name,n.options,t);Ob("Invalid Firebase Database URL",f),tn(f.path)||$o("Database URL must point to the root of a Firebase Database (not including a child path).");const k=function(n,t,e,s){let a=pv[t.name];a||(a={},pv[t.name]=a);let c=a[n.toURLString()];return c&&$o("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new KD(n,false,e,s),a[n.toURLString()]=c,c}(y,n,x,new X_(n.name,e));return new gA(k,n)}class gA{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=yu(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new by(n.repoInfo_,(s,a,c,f)=>{ov(n,s,a,c,f)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kb(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Pz)(e)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new bu(n.repoInfo_,t,(s,a,c,f)=>{ov(n,s,a,c,f)},s=>{kb(n,s)},s=>{!function(n,t){ii(t,(e,s)=>{av(n,e,s)})}(n,s)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=function(n,t){const e=n.toString();return eg[e]||(eg[e]=t()),eg[e]}(n.repoInfo_,()=>new ID(n.stats_,n.server_)),n.infoData_=new wD,n.infoSyncTree_=new Qy({startListening:(s,a,c,f)=>{let y=[];const b=n.infoData_.getNode(s._path);return b.isEmpty()||(y=Xh(n.infoSyncTree_,s._path,b),setTimeout(()=>{f("ok")},0)),y},stopListening:()=>{}}),av(n,"connected",!1),n.serverSyncTree_=new Qy({startListening:(s,a,c,f)=>(n.server_.listen(s,c,a,(y,b)=>{const T=f(y,b);ys(n.eventQueue_,s._path,T)}),[]),stopListening:(s,a)=>{n.server_.unlisten(s,a)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ls(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=pv[t];(!e||e[n.key]!==n)&&$o(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Bb(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&$o("Cannot call "+t+" on a deleted database.")}}function mA(n=(0,Di.getApp)(),t){return(0,Di._getProvider)(n,"database").getImmediate({identifier:t})}function uw(n,t){Kp(n,t)}class EA{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bu.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},bu.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},sC(Di.SDK_VERSION),(0,Di._registerComponent)(new Aa.wA("database",(t,{instanceIdentifier:e})=>nm(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Di.registerVersion)(zI,"0.12.5",void 0),(0,Di.registerVersion)(zI,"0.12.5","esm2017");const bA=new Lc.Yd("@firebase/database-compat"),wA=function(n){bA.warn("FIREBASE WARNING: "+n)};class DA{constructor(t){this._delegate=t}cancel(t){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),s=>t(s)),e}remove(t){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),s=>t(s)),e}set(t,e){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",e,!0);const s=this._delegate.set(t);return e&&s.then(()=>e(null),a=>e(a)),s}setWithPriority(t,e,s){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",s,!0);const a=this._delegate.setWithPriority(t,e);return s&&a.then(()=>s(null),c=>s(c)),a}update(t,e){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const a={};for(let c=0;c<t.length;++c)a[""+c]=t[c];t=a,wA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",e,!0);const s=this._delegate.update(t);return e&&s.then(()=>e(null),a=>e(a)),s}}class AA{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Al{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Fa("DataSnapshot.child","path",t,!1),new Al(this._database,this._delegate.child(t))}hasChild(t){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Fa("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Al(this._database,e)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new vs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class pi{constructor(t,e){this.database=t,this._delegate=e}on(t,e,s,a){var c;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",e,!1);const f=pi.getCancelAndContextArgs_("Query.on",s,a),y=(T,x)=>{e.call(f.context,new Al(this.database,T),x)};y.userCallback=e,y.context=f.context;const b=null===(c=f.cancel)||void 0===c?void 0:c.bind(f.context);switch(t){case"value":return Yg(this._delegate,y,b),e;case"child_added":return Qg(this._delegate,y,b),e;case"child_removed":return Jg(this._delegate,y,b),e;case"child_changed":return Qb(this._delegate,y,b),e;case"child_moved":return Jb(this._delegate,y,b),e;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,s){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,B.Wj)("Query.off","callback",e,!0),(0,B.lb)("Query.off","context",s,!0),e){const a=()=>{};a.userCallback=e,a.context=s,Xb(this._delegate,t,a)}else Xb(this._delegate,t)}get(){return sA(this._delegate).then(t=>new Al(this.database,t))}once(t,e,s,a){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",e,!0);const c=pi.getCancelAndContextArgs_("Query.once",s,a),f=new B.BH,y=(T,x)=>{const k=new Al(this.database,T);e&&e.call(c.context,k,x),f.resolve(k)};y.userCallback=e,y.context=c.context;const b=T=>{c.cancel&&c.cancel.call(c.context,T),f.reject(T)};switch(t){case"value":Yg(this._delegate,y,b,{onlyOnce:!0});break;case"child_added":Qg(this._delegate,y,b,{onlyOnce:!0});break;case"child_removed":Jg(this._delegate,y,b,{onlyOnce:!0});break;case"child_changed":Qb(this._delegate,y,b,{onlyOnce:!0});break;case"child_moved":Jb(this._delegate,y,b,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return f.promise}limitToFirst(t){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new pi(this.database,co(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fv(n)}(t)))}limitToLast(t){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new pi(this.database,co(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lA(n)}(t)))}orderByChild(t){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new pi(this.database,co(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Fa("orderByChild","path",n,!1),new uA(n)}(t)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new pi(this.database,co(this._delegate,new cA))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new pi(this.database,co(this._delegate,new iw))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new pi(this.database,co(this._delegate,new em))}startAt(t=null,e){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new pi(this.database,co(this._delegate,function(n=null,t){return nf("startAt","key",t,!0),new oA(n,t)}(t,e)))}startAfter(t=null,e){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new pi(this.database,co(this._delegate,function(n,t){return nf("startAfter","key",t,!0),new pd(n,t)}(t,e)))}endAt(t=null,e){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new pi(this.database,co(this._delegate,function(n,t){return nf("endAt","key",t,!0),new ew(n,t)}(t,e)))}endBefore(t=null,e){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new pi(this.database,co(this._delegate,function(n,t){return nf("endBefore","key",t,!0),new nw(n,t)}(t,e)))}equalTo(t,e){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new pi(this.database,co(this._delegate,function(n,t){return nf("equalTo","key",t,!0),new hA(n,t)}(t,e)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof pi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,s){const a={cancel:void 0,context:void 0};if(e&&s)a.cancel=e,(0,B.Wj)(t,"cancel",a.cancel,!0),a.context=s,(0,B.lb)(t,"context",a.context,!0);else if(e)if("object"==typeof e&&null!==e)a.context=e;else{if("function"!=typeof e)throw new Error((0,B.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");a.cancel=e}return a}get ref(){return new vs(this.database,new Ls(this._delegate._repo,this._delegate._path))}}class vs extends pi{constructor(t,e){super(t,new is(e._repo,e._path,new vy,!1)),this.database=t,this._delegate=e}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new vs(this.database,Mu(this._delegate,t))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new vs(this.database,t):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new vs(this.database,this._delegate.root)}set(t,e){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",e,!0);const s=hv(this._delegate,t);return e&&s.then(()=>e(null),a=>e(a)),s}update(t,e){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const a={};for(let c=0;c<t.length;++c)a[""+c]=t[c];t=a,wA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fs("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",e,!0);const s=iA(this._delegate,t);return e&&s.then(()=>e(null),a=>e(a)),s}setWithPriority(t,e,s){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",s,!0);const a=function(n,t,e){if(Fs("setWithPriority",n._path),lo("setWithPriority",t,n._path,!1),iv("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const s=new B.BH;return Lb(n._repo,n._path,t,e,s.wrapCallback(()=>{})),s.promise}(this._delegate,t,e);return s&&a.then(()=>s(null),c=>s(c)),a}remove(t){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Fs("remove",n._path),hv(n,null)}(this._delegate);return t&&e.then(()=>t(null),s=>t(s)),e}transaction(t,e,s){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,B.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,s){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,s);const a=function(n,t,e){var s;if(n=(0,B.m9)(n),Fs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const a=null===(s=null==e?void 0:e.applyLocally)||void 0===s||s,c=new B.BH,y=Yg(n,()=>{});return function(n,t,e,s,a,c){hd(n,"transaction on "+t);const f={path:t,update:e,onComplete:s,status:null,order:KI(),applyLocally:c,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},y=$g(n,t,void 0);f.currentInputSnapshot=y;const b=f.update(y.val());if(void 0===b)f.unwatcher(),f.currentOutputSnapshotRaw=null,f.currentOutputSnapshotResolved=null,f.onComplete&&f.onComplete(null,!1,f.currentInputSnapshot);else{ud("transaction failed: Data returned ",b,f.path),f.status=0;const T=nv(n.transactionQueueTree_,t),x=wl(T)||[];let k;x.push(f),xg(T,x),"object"==typeof b&&null!==b&&(0,B.r3)(b,".priority")?(k=(0,B.DV)(b,".priority"),(0,B.hu)(ld(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=(Ag(n.serverSyncTree_,t)||jt.EMPTY_NODE).getPriority().val();const Z=dd(n),pe=hr(b,k),Ie=bl(pe,y,Z);f.currentOutputSnapshotRaw=pe,f.currentOutputSnapshotResolved=Ie,f.currentWriteId=jg(n);const Ve=Dg(n.serverSyncTree_,t,Ie,f.currentWriteId,f.applyLocally);ys(n.eventQueue_,t,Ve),Hg(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(b,T,x)=>{let k=null;b?c.reject(b):(k=new Pu(x,new Ls(n._repo,n._path),Rn),c.resolve(new EA(T,k)))},y,a),c.promise}(this._delegate,t,{applyLocally:s}).then(c=>new AA(c.committed,new Al(this.database,c.snapshot)));return e&&a.then(c=>e(null,c.committed,c.snapshot),c=>e(c,!1,null)),a}setPriority(t,e){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",e,!0);const s=function(n,t){n=(0,B.m9)(n),Fs("setPriority",n._path),iv("setPriority",t,!1);const e=new B.BH;return Lb(n._repo,nr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&s.then(()=>e(null),a=>e(a)),s}push(t,e){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",e,!0);const s=function(n,t){n=(0,B.m9)(n),Fs("push",n._path),lo("push",t,n._path,!0);const e=sv(n._repo),s=NP(e),a=Mu(n,s),c=Mu(n,s);let f;return f=null!=t?hv(c,t).then(()=>c):Promise.resolve(c),a.then=f.then.bind(f),a.catch=f.then.bind(f,void 0),a}(this._delegate,t),a=s.then(f=>new vs(this.database,f));e&&a.then(()=>e(null),f=>e(f));const c=new vs(this.database,s);return c.then=a.then.bind(a),c.catch=a.catch.bind(a,void 0),c}onDisconnect(){return Fs("Reference.onDisconnect",this._delegate._path),new DA(new qg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uf{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,s={}){!function(n,t,e,s={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&$o("Cannot call useEmulator() after instance has already been initialized.");const a=n._repoInternal;let c;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&$o('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Wc(Wc.OWNER);else if(s.mockUserToken){const f="string"==typeof s.mockUserToken?s.mockUserToken:(0,B.Sg)(s.mockUserToken,n.app.options.projectId);c=new Wc(f)}!function(n,t,e,s){n.repoInfo_=new Gc(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),s&&(n.authTokenProvider_=s)}(a,t,e,c)}(this._delegate,t,e,s)}ref(t){if((0,B.Dv)("database.ref",0,1,arguments.length),t instanceof vs){const e=qb(this._delegate,t.toString());return new vs(this,e)}{const e=zb(this._delegate,t);return new vs(this,e)}}refFromURL(t){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const s=qb(this._delegate,t);return new vs(this,s)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),Bb(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(cd)}(n._repo)}(this._delegate)}}uf.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var zP=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:s,namespace:a,nodeAdmin:c=!1}){sC(e);const f=new Aa.zt("auth-internal",new Aa.H0("database-standalone"));return f.setComponent(new Aa.wA("auth-internal",()=>s,"PRIVATE")),{instance:new uf(nm(n,f,void 0,t,c),n),namespace:a}}});const RA=uf.ServerValue;!function(n){n.INTERNAL.registerComponent(new Aa.wA("database-compat",(t,{instanceIdentifier:e})=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("database").getImmediate({identifier:e});return new uf(a,s)},"PUBLIC").setServiceProps({Reference:vs,Query:pi,Database:uf,DataSnapshot:Al,enableLogging:uw,INTERNAL:zP,ServerValue:RA}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(GI.Z);var df=N(9746),PA=N(7771),MA=N(8858);class im extends Pr.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Ou(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,s=e?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=s.length;let f;if(this.closed)throw new fa.N;if(this.isStopped||this.hasError?f=Ea.w.EMPTY:(this.observers.push(t),f=new MA.W(this,t)),a&&t.add(t=new df.ht(t,a)),e)for(let y=0;y<c&&!t.closed;y++)t.next(s[y]);else for(let y=0;y<c&&!t.closed;y++)t.next(s[y].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),f}_getNow(){return(this.scheduler||PA.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,s=this._windowTime,a=this._events,c=a.length;let f=0;for(;f<c&&!(t-a[f].time<s);)f++;return c>e&&(f=Math.max(f,c-e)),f>0&&a.splice(0,f),a}}class Ou{constructor(t,e){this.time=t,this.value=e}}function _v(n,t,e){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:s}){let a,f,c=0,y=!1,b=!1;return function(x){let k;c++,!a||y?(y=!1,a=new im(n,t,s),k=a.subscribe(this),f=x.subscribe({next(Z){a.next(Z)},error(Z){y=!0,a.error(Z)},complete(){b=!0,f=void 0,a.complete()}}),b&&(f=void 0)):k=a.subscribe(this),this.add(()=>{c--,k.unsubscribe(),k=void 0,f&&!b&&e&&0===c&&(f.unsubscribe(),f=void 0,a=void 0)})}}(s))}function OA(n,t){return t?dr(()=>n,t):dr(()=>n)}var yv=N(3101),Sl=N(2329);class xu{constructor(t){return t}}class sm{constructor(){return(0,Sl.C6)()}}const La=new Map,md={activated:!1,tokenObservers:[]},ff={initialized:!1,enabled:!1};function gi(n){return La.get(n)||md}function dt(n,t){La.set(n,t)}function $i(){return ff}class jA{constructor(t,e,s,a,c){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,hl.Z)(function*(){e.stop();try{e.pending=new B.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new B.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(s){e.retryPolicy(s)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const un=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bv(n){if(!gi(n).activated)throw un.create("use-before-activation",{appName:n.name})}function Rl(n,t){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,hl.Z)(function*({url:n,body:t},e){const s={"Content-Type":"application/json"},a=e.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(t),headers:s};let f,y;try{f=yield fetch(n,c)}catch(k){throw un.create("fetch-network-error",{originalErrorMessage:k.message})}if(200!==f.status)throw un.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(k){throw un.create("fetch-parse-error",{originalErrorMessage:k.message})}const b=y.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw un.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(b[1]),x=Date.now();return{token:y.attestationToken,expireTimeMillis:x+T,issuedAtTimeMillis:x}})).apply(this,arguments)}function GA(n,t){const{projectId:e,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:t}}}const Va="firebase-app-check-store";let gf=null;function Vu(){return gf||(gf=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=s=>{n(s.target.result)},e.onerror=s=>{var a;t(un.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},e.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(Va,{keyPath:"compositeKey"})}}}catch(e){t(un.create("storage-open",{originalErrorMessage:e.message}))}}),gf)}function yd(){return(yd=(0,hl.Z)(function*(n,t){const s=(yield Vu()).transaction(Va,"readwrite"),c=s.objectStore(Va).put({compositeKey:n,value:t});return new Promise((f,y)=>{c.onsuccess=b=>{f()},s.onerror=b=>{var T;y(un.create("storage-set",{originalErrorMessage:null===(T=b.target.error)||void 0===T?void 0:T.message}))}})})).apply(this,arguments)}const dm=new Lc.Yd("@firebase/app-check");function qA(n,t){return(0,B.hl)()?function(n,t){return function(n,t){return yd.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{dm.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function yw(){return $i().enabled}function vw(){return Ew.apply(this,arguments)}function Ew(){return(Ew=(0,hl.Z)(function*(){const n=$i();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const KA={error:"UNKNOWN_ERROR"};function Ri(n){return B.US.encodeString(JSON.stringify(n),!1)}function hm(n){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,hl.Z)(function*(n,t=!1){const e=n.app;bv(e);const s=gi(e);let c,a=s.token;if(!a){const b=yield s.cachedTokenPromise;b&&fm(b)&&(a=b)}if(!t&&a&&fm(a))return{token:a.token};let y,f=!1;if(yw()){s.exchangeTokenPromise||(s.exchangeTokenPromise=Rl(GA(e,yield vw()),n.platformLoggerProvider).then(T=>(s.exchangeTokenPromise=void 0,T)),f=!0);const b=yield s.exchangeTokenPromise;return yield qA(e,b),dt(e,Object.assign(Object.assign({},s),{token:b})),{token:b.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(b=>(s.exchangeTokenPromise=void 0,b)),f=!0),a=yield s.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?dm.warn(b.message):dm.error(b),c=b}return a?(y={token:a.token},dt(e,Object.assign(Object.assign({},s),{token:a})),yield qA(e,a)):y=YA(c),f&&bw(e,y),y})).apply(this,arguments)}function Av(n,t){const e=gi(n),s=e.tokenObservers.filter(a=>a.next!==t);0===s.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),dt(n,Object.assign(Object.assign({},e),{tokenObservers:s}))}function Cw(n){const{app:t}=n,e=gi(t);let s=e.tokenRefresher;s||(s=function(n){const{app:t}=n;return new jA((0,hl.Z)(function*(){let s;if(s=gi(t).token?yield hm(n,!0):yield hm(n),s.error)throw s.error}),()=>!0,()=>{const e=gi(t);if(e.token){let s=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,e.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),dt(t,Object.assign(Object.assign({},e),{tokenRefresher:s}))),!s.isRunning()&&e.isTokenAutoRefreshEnabled&&s.start()}function bw(n,t){const e=gi(n).tokenObservers;for(const s of e)try{"EXTERNAL"===s.type&&null!=t.error?s.error(t.error):s.next(t)}catch(a){}}function fm(n){return n.expireTimeMillis-Date.now()>0}function YA(n){return{token:Ri(KA),error:n}}class Sv{constructor(t,e){this.app=t,this.platformLoggerProvider=e}_delete(){const{tokenObservers:t}=gi(this.app);for(const e of t)Av(this.app,e.next);return Promise.resolve()}}const aS="app-check-internal";(0,Di._registerComponent)(new Aa.wA("app-check",n=>function(n,t){return new Sv(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(aS).initialize()})),(0,Di._registerComponent)(new Aa.wA(aS,n=>function(n){return{getToken:t=>hm(n,t),addTokenListener:t=>function(n,t,e,s){const{app:a}=n,c=gi(a),f={next:e,error:s,type:t};if(dt(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,f]})),c.token&&fm(c.token)){const y=c.token;Promise.resolve().then(()=>{e({token:y.token}),Cw(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Cw(n))}(n,"INTERNAL",t),removeTokenListener:t=>Av(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Di.registerVersion)("@firebase/app-check","0.5.3");class Cf{constructor(){return(0,Un.vb)("app-check")}}"undefined"!=typeof window&&window;var Rw=N(7841);const Mw=new h.OlP("angularfire2.auth.use-emulator"),Nw=new h.OlP("angularfire2.auth.settings"),Ow=new h.OlP("angularfire2.auth.tenant-id"),kv=new h.OlP("angularfire2.auth.langugage-code"),xw=new h.OlP("angularfire2.auth.use-device-language"),hS=new h.OlP("angularfire.auth.persistence"),kw=(n,t,e,s,a,c,f,y)=>(0,Ns.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=t.runOutsideAngular(()=>n.auth());if(e&&b.useEmulator(...e),s&&(b.tenantId=s),b.languageCode=a,c&&b.useDeviceLanguage(),f)for(const[T,x]of Object.entries(f))b.settings[T]=x;return y&&b.setPersistence(y),b},[e,s,a,c,f,y]);let Fv=(()=>{class n{constructor(e,s,a,c,f,y,b,T,x,k,Z,pe){const Ie=new Pr.xQ,Ve=(0,Et.of)(void 0).pipe((0,df.QV)(f.outsideAngular),dr(()=>c.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,4828)))),(0,xt.U)(()=>(0,Ns.on)(e,c,s)),(0,xt.U)(ze=>kw(ze,c,y,T,x,k,b,Z)),_v({bufferSize:1,refCount:!1}));if(function(n){return"server"===n}(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Et.of)(null);else{Ve.pipe(Fo()).subscribe();const $t=Ve.pipe(dr(Ht=>Ht.getRedirectResult().then(yi=>yi,()=>null)),Un.iC,_v({bufferSize:1,refCount:!1})),Dt=Ve.pipe(dr(Ht=>new ti.y(yi=>({unsubscribe:c.runOutsideAngular(()=>Ht.onAuthStateChanged(xi=>yi.next(xi),xi=>yi.error(xi),()=>yi.complete()))})))),dn=Ve.pipe(dr(Ht=>new ti.y(yi=>({unsubscribe:c.runOutsideAngular(()=>Ht.onIdTokenChanged(xi=>yi.next(xi),xi=>yi.error(xi),()=>yi.complete()))}))));this.authState=$t.pipe(OA(Dt),(0,yv.R)(f.outsideAngular),(0,df.QV)(f.insideAngular)),this.user=$t.pipe(OA(dn),(0,yv.R)(f.outsideAngular),(0,df.QV)(f.insideAngular)),this.idToken=this.user.pipe(dr(Ht=>Ht?(0,Vr.D)(Ht.getIdToken()):(0,Et.of)(null))),this.idTokenResult=this.user.pipe(dr(Ht=>Ht?(0,Vr.D)(Ht.getIdTokenResult()):(0,Et.of)(null))),this.credential=(0,Ih.T)($t,Ie,this.authState.pipe(Ii(Ht=>!Ht))).pipe((0,xt.U)(Ht=>(null==Ht?void 0:Ht.user)?Ht:null),(0,yv.R)(f.outsideAngular),(0,df.QV)(f.insideAngular))}return(0,Ns.pX)(this,Ve,c,{spy:{apply:(ze,$t,Dt)=>{(ze.startsWith("signIn")||ze.startsWith("createUser"))&&Dt.then(dn=>Ie.next(dn))}}})}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(Ns.Dh),h.LFG(Ns.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(Mw,8),h.LFG(Nw,8),h.LFG(Ow,8),h.LFG(kv,8),h.LFG(xw,8),h.LFG(hS,8),h.LFG(Cf,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Lw(n){return null==n}function fS(n){return"function"==typeof n.set}function Lv(n,t){return fS(t)?t:n.ref(t)}function Vw(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(fS(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Uu(n,t,e="on",s=nC.z){return new ti.y(a=>{let c=null;return c=n[e](t,(f,y)=>{s.schedule(()=>{a.next({snapshot:f,prevKey:y})}),"once"===e&&s.schedule(()=>a.complete())},f=>{s.schedule(()=>a.error(f))}),"on"===e?{unsubscribe(){null!=c&&n.off(t,c)}}:{unsubscribe(){}}}).pipe((0,xt.U)(a=>{const{snapshot:c,prevKey:f}=a;let y=null;return c.exists()&&(y=c.key),{type:t,payload:c,prevKey:f,key:y}}),(0,Dh.B)())}function Uw(n,t){const e=n.length;for(let s=0;s<e;s++)if(n[s].payload.key===t)return s;return-1}function mS(n,t){const{payload:e,prevKey:s,key:a}=t,c=Uw(n,a),f=function(n,t){if(Lw(t))return 0;{const e=Uw(n,t);return-1===e?n.length:e+1}}(n,s);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let y=null;t.payload.forEach(b=>{const T={payload:b,type:"value",prevKey:y,key:b.key};return y=b.key,n=[...n,T],!1})}return n;case"child_added":if(c>-1){const y=n[c-1];(y&&y.key||null)!==s&&(n=n.filter(b=>b.payload.key!==e.key)).splice(f,0,t)}else{if(null==s)return[t,...n];(n=n.slice()).splice(f,0,t)}return n;case"child_removed":return n.filter(y=>y.payload.key!==e.key);case"child_changed":return n.map(y=>y.payload.key===a?t:y);case"child_moved":if(c>-1){const y=n.splice(c,1)[0];return(n=n.slice()).splice(f,0,y),n}return n;default:return n}}function Bw(n){return(Lw(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function jw(n,t,e){return function(n,t,e){return Uu(n,"value","once",e).pipe(dr(s=>{const a=[(0,Et.of)(s)];return t.forEach(c=>a.push(Uu(n,c,"on",e))),(0,Ih.T)(...a).pipe(Rs(mS,[]))}),e=>e.lift(new G_(void 0,void 0)))}(n,t=Bw(t),e)}function $w(n,t,e){const s=(t=Bw(t)).map(a=>Uu(n,a,"on",e));return(0,Ih.T)(...s)}function Ed(n,t){return function(s,a){return Vw(s,{stringCase:()=>n.child(s)[t](a),firebaseCase:()=>s[t](a),snapshotCase:()=>s.ref[t](a)})}}function Hw(n){return function(e){return e?Vw(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Vv(n,t){return function(){return Uu(n,"value","on",t)}}const zw=new h.OlP("angularfire2.realtimeDatabaseURL"),ES=new h.OlP("angularfire2.database.use-emulator");let qw=(()=>{class n{constructor(e,s,a,c,f,y,b,T,x,k,Z,pe,Ie,Ve,ze){this.schedulers=y;const $t=b,Dt=(0,Ns.on)(e,f,s);T&&kw(Dt,f,x,Z,pe,Ie,k,Ve),this.database=(0,Ns.cc)(`${Dt.name}.database.${a}`,"AngularFireDatabase",Dt.name,()=>{const dn=f.runOutsideAngular(()=>Dt.database(a||void 0));return $t&&dn.useEmulator(...$t),dn},[$t])}list(e,s){const a=this.schedulers.ngZone.runOutsideAngular(()=>Lv(this.database,e));let c=a;return s&&(c=s(a)),function(n,t){const e=t.schedulers.outsideAngular,s=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Ed(s,"update"),set:Ed(s,"set"),push:a=>s.push(a),remove:Hw(s),snapshotChanges:a=>jw(n,a,e).pipe(Un.iC),stateChanges:a=>$w(n,a,e).pipe(Un.iC),auditTrail:a=>function(n,t,e){return function(n,t,e){return function(n,t){return Uu(n,"value","on",t).pipe((0,xt.U)(e=>{let s;return e.payload.forEach(a=>(s=a.key,!1)),{data:e,lastKeyToLoad:s}}))}(n,e).pipe(function(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new Bc(n,e))}}(t),(0,xt.U)(([a,c])=>{const f=a.lastKeyToLoad,y=c.map(b=>b.key);return{actions:c,lastKeyToLoad:f,loadedKeys:y}}),function(n){return t=>t.lift(new iC(n))}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,xt.U)(a=>a.actions))}(n,$w(n,t).pipe(Rs((a,c)=>[...a,c],[])),e)}(n,a,e).pipe(Un.iC),valueChanges:(a,c)=>jw(n,a,e).pipe((0,xt.U)(y=>y.map(b=>c&&c.idField?Object.assign(Object.assign({},b.payload.val()),{[c.idField]:b.key}):b.payload.val())),Un.iC)}}(c,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>Vv(n,t.schedulers.outsideAngular)().pipe(Un.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Vv(n,t.schedulers.outsideAngular)().pipe(Un.iC,(0,xt.U)(s=>s.payload.exists()?s.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Lv(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(Ns.Dh),h.LFG(Ns.xv,8),h.LFG(zw,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(ES,8),h.LFG(Fv,8),h.LFG(Mw,8),h.LFG(Nw,8),h.LFG(Ow,8),h.LFG(kv,8),h.LFG(xw,8),h.LFG(hS,8),h.LFG(Cf,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CS=(()=>{class n{constructor(){Rw.Z.registerVersion("angularfire",Un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[qw]}),n})(),Uv=(()=>{class n{constructor(e,s,a){this.db=e,this.auth=s,this.gameService=a}getHighscores(){const e=(s,a)=>s.score<a.score?1:s.score>a.score?-1:0;return this.db.list("highscores").valueChanges().pipe((0,di.b)(s=>s.sort(e)))}login(){return this.auth.signInWithPopup(new tC.N)}logout(){this.auth.signOut()}getAuthState(){return this.auth.authState}sendScore(){return new Promise((e,s)=>{this.auth.authState.subscribe(a=>{this.db.list("highscores").set(a.uid,{name:a.displayName,score:this.gameService.getScore().value}).then(c=>{e(null)})})})}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(qw),h.LFG(Fv),h.LFG(ga))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bS=["fieldContainer"];function wS(n,t){if(1&n){const e=h.EpF();h.TgZ(0,"div",3),h.TgZ(1,"div",4),h.TgZ(2,"p",5),h._uU(3,"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430!"),h.qZA(),h.TgZ(4,"button",6),h.NdJ("click",function(){return h.CHM(e),h.oxw().sendScore()}),h._uU(5,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0451\u0442"),h.qZA(),h.qZA(),h.qZA()}if(2&n){const e=h.oxw();h.Q6J("@fade",void 0)("ngClass",e.theme),h.xp6(4),h.Q6J("disabled",e.isScoreButtonDisabled)}}let TS=(()=>{class n{constructor(e,s,a){this.gameService=e,this.highscores=s,this.settings=a,this.isGameOver=!1,this.isScoreButtonDisabled=!1,this.theme="light",this.highscores.getAuthState().subscribe(c=>{this.isScoreButtonDisabled=!c}),this.settings.themeObserver.subscribe(c=>this.theme=c)}ngAfterViewInit(){this.gameService.createGameInstance(this.fieldContainer.nativeElement),this.gameService.getGameOver().subscribe(e=>{this.isGameOver=e,this.isScoreButtonDisabled=!1}),this.gameService.game.field._element.addEventListener("swipe",e=>{let a,s=e.detail.directions;s.top&&(a=Tn.Up),s.bottom&&(a=Tn.Down),s.left&&(a=Tn.Left),s.right&&(a=Tn.Right)})}sendScore(){this.highscores.sendScore().then(e=>this.isScoreButtonDisabled=!0)}onSwipe(e){var s;let c;Math.abs(e.deltaX)>40&&(c=e.deltaX>0?Tn.Right:Tn.Left),Math.abs(e.deltaY)>40&&(c=e.deltaY>0?Tn.Down:Tn.Up),null===(s=this.gameService.game)||void 0===s||s.move(c)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(ga),h.Y36(Uv),h.Y36(ru))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-field"]],viewQuery:function(e,s){if(1&e&&h.Gf(bS,5),2&e){let a;h.iGM(a=h.CRH())&&(s.fieldContainer=a.first)}},decls:3,vars:1,consts:[[1,"fieldContainer",3,"swipe"],["fieldContainer",""],["class","gameOverText",3,"ngClass",4,"ngIf"],[1,"gameOverText",3,"ngClass"],[1,"flex"],["appThemed",""],["appThemed","",3,"disabled","click"]],template:function(e,s){1&e&&(h.TgZ(0,"div",0,1),h.NdJ("swipe",function(c){return s.onSwipe(c)}),h.YNc(2,wS,6,3,"div",2),h.qZA()),2&e&&(h.xp6(2),h.Q6J("ngIf",s.isGameOver))},directives:[xr,lr,dl],styles:["div.gameOverText[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:3;display:grid;place-items:center;font-family:sans-serif}div.gameOverText.light[_ngcontent-%COMP%]{background:rgba(255,255,255,.75)}div.gameOverText.dark[_ngcontent-%COMP%]{background:rgba(17,17,17,.75)}div.fieldContainer[_ngcontent-%COMP%]{position:relative;background:rgba(255,255,255,.25)}"],data:{animation:[sp("fade",[To(":enter",[fs({opacity:0}),Xa("0.15s ease",fs({opacity:1}))]),To(":leave",[fs({opacity:1}),Xa("0.15s ease",fs({opacity:0}))])])]}}),n})();function Tf(n,t){if(1&n){const e=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){return h.CHM(e),h.oxw().login()}),h._uU(1,"\u0412\u043e\u0439\u0442\u0438"),h.qZA()}}function If(n,t){if(1&n){const e=h.EpF();h.ynx(0),h.TgZ(1,"button",3),h.NdJ("click",function(){return h.CHM(e),h.oxw().logout()}),h._uU(2,"\u0412\u044b\u0439\u0442\u0438"),h.qZA(),h.TgZ(3,"p",4),h._uU(4),h.qZA(),h._UZ(5,"img",5),h.BQk()}if(2&n){const e=h.oxw();h.xp6(4),h.Oqu(e.name),h.xp6(1),h.Q6J("src",e.imageURL,h.LSH)}}let IS=(()=>{class n{constructor(e,s){this.highscores=e,this.settings=s,this.isLoggedIn=!1,this.theme="light",e.getAuthState().subscribe(a=>{a?(this.isLoggedIn=!0,this.imageURL=a.photoURL,this.name=a.displayName):this.isLoggedIn=!1}),s.themeObserver.subscribe(a=>this.theme=a)}login(){this.highscores.login()}logout(){this.highscores.logout()}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(Uv),h.Y36(ru))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-auth-panel"]],decls:3,vars:3,consts:[[1,"root",3,"ngClass"],["appThemed","",3,"click",4,"ngIf"],[4,"ngIf"],["appThemed","",3,"click"],["appThemed",""],[3,"src"]],template:function(e,s){1&e&&(h.TgZ(0,"div",0),h.YNc(1,Tf,2,0,"button",1),h.YNc(2,If,6,2,"ng-container",2),h.qZA()),2&e&&(h.Q6J("ngClass",s.theme),h.xp6(1),h.Q6J("ngIf",!s.isLoggedIn),h.xp6(1),h.Q6J("ngIf",s.isLoggedIn))},directives:[lr,xr,dl],styles:["div.root[_ngcontent-%COMP%]{display:flex;grid-gap:5px;gap:5px;height:29px;align-items:center;padding:5px;border-radius:10px}div.root.light[_ngcontent-%COMP%]{background:rgba(255,255,255,.75)}div.root.dark[_ngcontent-%COMP%]{background:rgba(17,17,17,.75)}p[_ngcontent-%COMP%]{margin:auto 0;font-family:sans-serif}img[_ngcontent-%COMP%]{max-height:48px;width:auto;border-radius:5px}"]}),n})(),Bv=(()=>{class n{constructor(e){this.game=e}move(e){var s;null===(s=this.game.game)||void 0===s||s.move(e)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(ga))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-game-controls"]],decls:8,vars:0,consts:[["appThemed","",1,"up",3,"click"],["appThemed","",1,"right",3,"click"],["appThemed","",1,"down",3,"click"],["appThemed","",1,"left",3,"click"]],template:function(e,s){1&e&&(h.TgZ(0,"button",0),h.NdJ("click",function(){return s.move(0)}),h._uU(1,"\u290a"),h.qZA(),h.TgZ(2,"button",1),h.NdJ("click",function(){return s.move(1)}),h._uU(3,"\u21db"),h.qZA(),h.TgZ(4,"button",2),h.NdJ("click",function(){return s.move(2)}),h._uU(5,"\u290b"),h.qZA(),h.TgZ(6,"button",3),h.NdJ("click",function(){return s.move(3)}),h._uU(7,"\u21da"),h.qZA())},directives:[dl],styles:['[_nghost-%COMP%]{display:grid;grid-template:". u ." 1fr "l . r" 1fr ". d ." 1fr/1fr 1fr 1fr}button[_ngcontent-%COMP%]{width:75px;height:50px;font-size:48px;line-height:24px}button.up[_ngcontent-%COMP%]{grid-area:u}button.down[_ngcontent-%COMP%]{grid-area:d}button.left[_ngcontent-%COMP%]{grid-area:l}button.right[_ngcontent-%COMP%]{grid-area:r}']}),n})();function Yo(n,t){1&n&&h._UZ(0,"br")}function DS(n,t){1&n&&h._UZ(0,"app-game-controls")}function mm(n,t){if(1&n&&(h.TgZ(0,"div"),h.TgZ(1,"div"),h._UZ(2,"router-outlet",7,8),h.qZA(),h.qZA()),2&n){const e=h.MAs(3),s=h.oxw();h.Q6J("@fade",void 0),h.xp6(1),h.Q6J("@menuRouteAnimation",s.prepareRoute(e))}}let AS=(()=>{class n{constructor(e,s,a,c){this.gameService=e,this.document=s,this.settingsService=a,this.router=c,this.isMenuShown=!0,this.isGameOver=!1,this.lcc="",this.score=0,this.theme="light",this.showControls=!1,this.gameService.isMenuShown.subscribe(f=>this.isMenuShown=f),this.gameService.isReady.subscribe(f=>{f&&(this.gameService.getScore().subscribe(y=>this.score=y),this.gameService.getLastCreatedCell().subscribe(y=>this.lcc=y))}),this.settingsService.bgObserver.subscribe(f=>{let b="";Ao(f)&&(b=`url(${Ao(f).image})`),this.document.body.style.backgroundImage=b}),this.settingsService.themeObserver.subscribe(f=>{this.theme=f;let y="";"light"===f?y="white":"dark"===f&&(y="#111"),this.document.body.style.backgroundColor=y}),this.settingsService.showControlsObserver.subscribe(f=>this.showControls=f),this.document.addEventListener("keydown",f=>{"Escape"===f.code&&(this.gameService.isMenuShown.next(!this.isMenuShown),c.navigate([""])),"F1"===f.code&&this.gameService.game.isGameOver.next(!0)})}prepareRoute(e){var s;return null===(s=null==e?void 0:e.activatedRouteData)||void 0===s?void 0:s.animation}showMenu(){this.gameService.isMenuShown.next(!0)}resetGame(){this.gameService.reset()}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(ga),h.Y36(oe),h.Y36(ru),h.Y36(ts))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:15,vars:6,consts:[[1,"center"],[1,"flex","main",3,"ngClass"],["appThemed","",1,"score"],[4,"ngIf"],[1,"controls"],["appThemed","",3,"click"],[1,"authPanel"],[1,"outlet"],["outlet","outlet"]],template:function(e,s){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"p",2),h._uU(3),h.YNc(4,Yo,1,0,"br",3),h._uU(5),h.qZA(),h._UZ(6,"app-field"),h.TgZ(7,"div",4),h.TgZ(8,"button",5),h.NdJ("click",function(){return s.showMenu()}),h._uU(9,"\u041c\u0435\u043d\u044e"),h.qZA(),h.TgZ(10,"button",5),h.NdJ("click",function(){return s.resetGame()}),h._uU(11,"\u0421\u0431\u0440\u043e\u0441"),h.qZA(),h.qZA(),h.YNc(12,DS,1,0,"app-game-controls",3),h.qZA(),h.qZA(),h.YNc(13,mm,4,2,"div",3),h._UZ(14,"app-auth-panel",6)),2&e&&(h.xp6(1),h.Q6J("ngClass",s.theme),h.xp6(2),h.hij("\u0421\u0447\u0451\u0442: ",s.score," "),h.xp6(1),h.Q6J("ngIf",s.lcc.length>0),h.xp6(1),h.hij(" ",s.lcc.length>0?"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f: "+s.lcc:"",""),h.xp6(7),h.Q6J("ngIf",s.showControls),h.xp6(1),h.Q6J("ngIf",s.isMenuShown))},directives:[lr,dl,xr,TS,IS,Bv,Q0],styles:["div.center[_ngcontent-%COMP%]{display:grid;place-items:center;height:100vh}[_nghost-%COMP%]{height:100vh}div.controls[_ngcontent-%COMP%]{display:flex;width:100%;grid-gap:5px;gap:5px}div.controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{flex-grow:1}p.score[_ngcontent-%COMP%]{margin:5px;width:100px;text-align:center;font-family:sans-serif}.authPanel[_ngcontent-%COMP%]{position:fixed;z-index:10;top:0;right:0;margin:10px}div.main[_ngcontent-%COMP%]{border-radius:10px;padding:5px}div.main.light[_ngcontent-%COMP%]{background:rgba(255,255,255,.75)}div.main.dark[_ngcontent-%COMP%]{background:rgba(17,17,17,.75)}"],data:{animation:[sp("fade",[To(":enter",[fs({opacity:0,zIndex:9,position:"relative"}),Xa("0.25s ease",fs({opacity:1,zIndex:9}))]),To(":leave",[fs({opacity:1,zIndex:9,position:"relative"}),Xa("0.25s ease",fs({opacity:0,zIndex:9}))])]),sp("menuRouteAnimation",[To("Main <=> *",[])])]}}),n})();function SS(n,t){1&n&&(h.TgZ(0,"button",3),h._uU(1,"\u041d\u0430\u0437\u0430\u0434"),h.qZA())}const cM=["*"];let Cd=(()=>{class n{constructor(){this.notMain=!1}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-screen"]],inputs:{notMain:"notMain"},ngContentSelectors:cM,decls:4,vars:1,consts:[["appThemed","",1,"root"],[1,"flex"],["appThemed","","routerLink","/",4,"ngIf"],["appThemed","","routerLink","/"]],template:function(e,s){1&e&&(h.F$t(),h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.Hsn(2),h.YNc(3,SS,2,0,"button",2),h.qZA(),h.qZA()),2&e&&(h.xp6(3),h.Q6J("ngIf",s.notMain))},directives:[dl,xr,ul],styles:["div.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:5px;gap:5px;width:-moz-fit-content;width:fit-content;align-items:center;font-family:sans-serif}table[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-family:sans-serif}h1[_ngcontent-%COMP%]{font-size:48px;margin:10px;text-align:center}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border-collapse:collapse;border:2px solid gray}td[_ngcontent-%COMP%]{padding:5px}div.root[_ngcontent-%COMP%]{display:grid;place-items:center;justify-content:center;margin:0;width:100vw;height:100vh;position:fixed;top:0;z-index:9!important;background:white}"]}),n})();function jv(n,t){if(1&n&&(h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.qZA()),2&n){const e=t.$implicit;h.xp6(2),h.Oqu(e.name),h.xp6(2),h.Oqu(e.score)}}function Kw(n,t){if(1&n&&(h.TgZ(0,"table"),h.TgZ(1,"tr"),h.TgZ(2,"td"),h._uU(3,"\u0418\u043c\u044f"),h.qZA(),h.TgZ(4,"td"),h._uU(5,"\u0421\u0447\u0451\u0442"),h.qZA(),h.qZA(),h.YNc(6,jv,5,2,"tr",2),h.qZA()),2&n){const e=h.oxw();h.xp6(6),h.Q6J("ngForOf",e.data)}}function $v(n,t){1&n&&(h.TgZ(0,"p"),h._uU(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),h.qZA())}let Hv=(()=>{class n{constructor(e){this.highscores=e,e.getHighscores().subscribe(s=>this.data=s)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(Uv))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-highscores"]],decls:5,vars:3,consts:[[3,"notMain"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,s){1&e&&(h.TgZ(0,"app-screen",0),h.TgZ(1,"h1"),h._uU(2,"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0435\u043a\u043e\u0440\u0434\u043e\u0432"),h.qZA(),h.YNc(3,Kw,7,1,"table",1),h.YNc(4,$v,2,0,"p",1),h.qZA()),2&e&&(h.Q6J("notMain",!0),h.xp6(3),h.Q6J("ngIf",s.data),h.xp6(1),h.Q6J("ngIf",!s.data))},directives:[Cd,xr,rn],styles:["div.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:5px;gap:5px;width:-moz-fit-content;width:fit-content;align-items:center;font-family:sans-serif}table[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-family:sans-serif}h1[_ngcontent-%COMP%]{font-size:48px;margin:10px;text-align:center}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border-collapse:collapse;border:2px solid gray}td[_ngcontent-%COMP%]{padding:5px}"]}),n})(),RS=(()=>{class n{constructor(e){this.gameService=e}ngOnInit(){}hideMenu(){this.gameService.isMenuShown.next(!1)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(ga))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-main-menu"]],decls:12,vars:0,consts:[[1,"flex"],["appThemed","",3,"click"],["appThemed","","routerLink","rules"],["appThemed","","routerLink","settings"],["appThemed","","routerLink","highscores"]],template:function(e,s){1&e&&(h.TgZ(0,"app-screen"),h.TgZ(1,"h1"),h._uU(2,"\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 2048"),h.qZA(),h.TgZ(3,"div",0),h.TgZ(4,"button",1),h.NdJ("click",function(){return s.hideMenu()}),h._uU(5,"\u0418\u0433\u0440\u0430\u0442\u044c"),h.qZA(),h.TgZ(6,"button",2),h._uU(7,"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"),h.qZA(),h.TgZ(8,"button",3),h._uU(9,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),h.qZA(),h.TgZ(10,"button",4),h._uU(11,"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0435\u043a\u043e\u0440\u0434\u043e\u0432"),h.qZA(),h.qZA(),h.qZA())},directives:[Cd,dl,ul],styles:["div.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:5px;gap:5px;width:-moz-fit-content;width:fit-content;align-items:center;font-family:sans-serif}table[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-family:sans-serif}h1[_ngcontent-%COMP%]{font-size:48px;margin:10px;text-align:center}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border-collapse:collapse;border:2px solid gray}td[_ngcontent-%COMP%]{padding:5px}"]}),n})(),PS=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-rules"]],decls:17,vars:1,consts:[[3,"notMain"],[2,"text-align","center"]],template:function(e,s){1&e&&(h.TgZ(0,"app-screen",0),h.TgZ(1,"h1"),h._uU(2,"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"),h.qZA(),h.TgZ(3,"p",1),h._uU(4," \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043b\u0435 4\u04454, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043f\u043e\u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043f\u043b\u0438\u0442\u043a\u0438 \u0441 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430\u043c\u0438, \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0449\u0438\u0435 \u043f\u043e-\u0440\u0430\u0437\u043d\u043e\u043c\u0443 (\u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043f\u0440\u0435\u0434\u043c\u0435\u0442, \u0430\u0441\u0441\u043e\u0446\u0438\u0438\u043e\u0440\u0430\u043d\u043d\u044b\u0439 \u0441 \u044d\u0442\u043e\u0439 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u043e\u0439). "),h._UZ(5,"br"),h._uU(6," \u0421\u043e\u0435\u0434\u0438\u043d\u044f\u044f \u044d\u0442\u0438 \u043f\u043b\u0438\u0442\u043a\u0438, \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043f\u043b\u0438\u0442\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u043e\u0432\u043e\u0439 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u043e\u0439. "),h._UZ(7,"br"),h._uU(8," \u041f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u0441\u0442\u0440\u0435\u043b\u043e\u043a \u043d\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0435, \u043a\u043d\u043e\u043f\u043e\u043a \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u044d\u043a\u0440\u0430\u043d\u0435 (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445) \u0438\u043b\u0438 \u0441\u0432\u0430\u0439\u043f\u043e\u0432 \u043f\u043e \u043f\u043e\u043b\u044e, "),h._UZ(9,"br"),h._uU(10," \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0441\u0434\u0432\u0438\u0433 \u0432\u0441\u0435\u0445 \u043f\u043b\u0438\u0442\u043e\u043a \u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u0438 \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f. "),h._UZ(11,"br"),h._uU(12," \u041f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u0434\u0432\u0438\u0433\u0430 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u043e\u0432\u0430\u044f \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u0430\u044f \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u0441\u0432\u0435\u0447\u0435\u043d\u0430 \u043a\u0440\u0430\u0441\u043d\u044b\u043c. "),h._UZ(13,"br"),h._uU(14,' \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u043d\u0430 \u043e\u0434\u043d\u0443 \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043d\u0430\u0437\u0430\u0434 \u043a\u043d\u043e\u043f\u043a\u043e\u0439 "\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0445\u043e\u0434". '),h._UZ(15,"br"),h._uU(16," \u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0440\u0435\u043a\u043e\u0440\u0434\u043e\u0432 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u0445\u043e\u0434 \u043a\u043d\u043e\u043f\u043a\u043e\u0439 \u0432 \u0443\u0433\u043b\u0443 \u044d\u043a\u0440\u0430\u043d\u0430. "),h.qZA(),h.qZA()),2&e&&h.Q6J("notMain",!0)},directives:[Cd],styles:["div.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:5px;gap:5px;width:-moz-fit-content;width:fit-content;align-items:center;font-family:sans-serif}table[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-family:sans-serif}h1[_ngcontent-%COMP%]{font-size:48px;margin:10px;text-align:center}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border-collapse:collapse;border:2px solid gray}td[_ngcontent-%COMP%]{padding:5px}"]}),n})();var MS=N(1555);function Df(n,t){return new ti.y(e=>{const s=n.length;if(0===s)return void e.complete();const a=new Array(s);let c=0,f=0;for(let y=0;y<s;y++){const b=(0,Vr.D)(n[y]);let T=!1;e.add(b.subscribe({next:x=>{T||(T=!0,f++),a[y]=x},error:x=>e.error(x),complete:()=>{c++,(c===s||!T)&&(f===s&&e.next(t?t.reduce((x,k,Z)=>(x[k]=a[Z],x),{}):a),e.complete())}}))}})}let _m=(()=>{class n{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Pl=(()=>{class n extends _m{}return n.\u0275fac=function(){let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ho=new h.OlP("NgValueAccessor"),Zw={provide:ho,useExisting:(0,h.Gpc)(()=>ym),multi:!0};let ym=(()=>{class n extends Pl{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,s){1&e&&h.NdJ("change",function(c){return s.onChange(c.target.checked)})("blur",function(){return s.onTouched()})},features:[h._Bn([Zw]),h.qOj]}),n})();const OS={provide:ho,useExisting:(0,h.Gpc)(()=>Wv),multi:!0},Qw=new h.OlP("CompositionEventMode");let Wv=(()=>{class n extends _m{constructor(e,s,a){super(e,s),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Qw,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&h.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[h._Bn([OS]),h.qOj]}),n})();const Hi=new h.OlP("NgValidators"),Dr=new h.OlP("NgAsyncValidators");function Em(n){return null!=n}function zv(n){const t=(0,h.QGY)(n)?(0,Vr.D)(n):n;return(0,h.CqO)(t),t}function qv(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Af(n,t){return t.map(e=>e(n))}function kS(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function Yv(n){return null!=n?function(n){if(!n)return null;const t=n.filter(Em);return 0==t.length?null:function(e){return qv(Af(e,t))}}(kS(n)):null}function Td(n){return null!=n?function(n){if(!n)return null;const t=n.filter(Em);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,iu.k)(t))return Df(t,null);if((0,MS.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Df(e.map(s=>t[s]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return Df(n=1===n.length&&(0,iu.k)(n[0])?n[0]:n,null).pipe((0,xt.U)(e=>t(...e)))}return Df(n,null)}(Af(e,t).map(zv)).pipe((0,xt.U)(qv))}}(kS(n)):null}function Jv(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Sf(n){return n?Array.isArray(n)?n:[n]:[]}function bm(n,t){return Array.isArray(n)?n.includes(t):n===t}function iT(n,t){const e=Sf(t);return Sf(n).forEach(a=>{bm(e,a)||e.push(a)}),e}function Xv(n,t){return Sf(t).filter(e=>!bm(n,e))}let eE=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Yv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Td(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,s){return!!this.control&&this.control.hasError(e,s)}getError(e,s){return this.control?this.control.getError(e,s):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=h.lG2({type:n}),n})(),Mi=(()=>{class n extends eE{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();class Nl extends eE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let sT=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,s,a;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(a=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===a?void 0:a[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(Nl,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&h.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[h.qOj]}),n})();function Tm(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(Jv(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const s=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(Jv(s,t.asyncValidator)):"function"==typeof s&&n.setAsyncValidators([s]);const a=()=>n.updateValueAndValidity();sE(t._rawValidators,a),sE(t._rawAsyncValidators,a)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&VS(n,t)})}(n,t),function(n,t){const e=(s,a)=>{t.valueAccessor.writeValue(s),a&&t.viewToModelUpdate(s)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&VS(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function sE(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function VS(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Pf="VALID",Im="INVALID",Mf="PENDING",Dm="DISABLED";function dT(n){return(Nf(n)?n.validators:n)||null}function hT(n){return Array.isArray(n)?Yv(n):n||null}function fT(n,t){return(Nf(t)?t.asyncValidators:n)||null}function pT(n){return Array.isArray(n)?Td(n):n||null}function Nf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ol{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=hT(this._rawValidators),this._composedAsyncValidatorFn=pT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Pf}get invalid(){return this.status===Im}get pending(){return this.status==Mf}get disabled(){return this.status===Dm}get enabled(){return this.status!==Dm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=hT(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=pT(t)}addValidators(t){this.setValidators(iT(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(iT(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Xv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Xv(t,this._rawAsyncValidators))}hasValidator(t){return bm(this._rawValidators,t)}hasAsyncValidator(t){return bm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Mf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Dm,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Pf,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pf||this.status===Mf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dm:Pf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Mf,this._hasOwnPendingAsyncValidator=!0;const e=zv(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let s=n;return t.forEach(a=>{s=s instanceof uE?s.controls.hasOwnProperty(a)?s.controls[a]:null:s instanceof HS&&s.at(a)||null}),s}(this,t)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Dm:this.errors?Im:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mf)?Mf:this._anyControlsHaveStatus(Im)?Im:Pf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nf(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Of extends Ol{constructor(t=null,e,s){super(dT(e),fT(s,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){lE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){lE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class uE extends Ol{constructor(t,e,s){super(dT(e),fT(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,a)=>{s.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e instanceof Of?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const s=this.controls[e];if(this.contains(e)&&t(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,s)=>((e.enabled||this.disabled)&&(t[s]=e.value),t))}_reduceChildren(t,e){let s=t;return this._forEachChild((a,c)=>{s=e(s,a,c)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,s)=>{if(void 0===t[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class HS extends Ol{constructor(t,e,s){super(dT(e),fT(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,s={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((s,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((s,a)=>{this.at(a)&&this.at(a).patchValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((s,a)=>{s.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Of?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,s)=>!!s._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,s)=>{t(e,s)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,s)=>{if(void 0===t[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ZS={provide:Nl,useExisting:(0,h.Gpc)(()=>hE)},xf=(()=>Promise.resolve(null))();let hE=(()=>{class n extends Nl{constructor(e,s,a,c){super(),this.control=new Of,this._registered=!1,this.update=new h.vpe,this._parent=e,this._setValidators(s),this._setAsyncValidators(a),this.valueAccessor=function(n,t){if(!t)return null;let e,s,a;return Array.isArray(t),t.forEach(c=>{c.constructor===Wv?e=c:function(n){return Object.getPrototypeOf(n.constructor)===Pl}(c)?s=c:a=c}),a||s||e||null}(0,c)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Tm(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){xf.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const s=e.isDisabled.currentValue,a=""===s||s&&"false"!==s;xf.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(Mi,9),h.Y36(Hi,10),h.Y36(Dr,10),h.Y36(ho,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([ZS]),h.qOj,h.TTD]}),n})(),QS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const nR={provide:ho,useExisting:(0,h.Gpc)(()=>Ff),multi:!0};function vT(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Ff=(()=>{class n extends Pl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const s=this._getOptionId(e);null==s&&this.setProperty("selectedIndex",-1);const a=vT(s,e);this.setProperty("value",a)}registerOnChange(e){this.onChange=s=>{this.value=this._getOptionValue(s),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s),e))return s;return null}_getOptionValue(e){const s=function(n){return n.split(":")[0]}(e);return this._optionMap.has(s)?this._optionMap.get(s):e}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,s){1&e&&h.NdJ("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([nR]),h.qOj]}),n})(),yE=(()=>{class n{constructor(e,s,a){this._element=e,this._renderer=s,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(vT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Ff,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const rR={provide:ho,useExisting:(0,h.Gpc)(()=>EE),multi:!0};function vE(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let EE=(()=>{class n extends Pl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let s;if(this.value=e,Array.isArray(e)){const a=e.map(c=>this._getOptionId(c));s=(c,f)=>{c._setSelected(a.indexOf(f.toString())>-1)}}else s=(a,c)=>{a._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(e){this.onChange=s=>{const a=[];if(void 0!==s.selectedOptions){const c=s.selectedOptions;for(let f=0;f<c.length;f++){const y=c.item(f),b=this._getOptionValue(y.value);a.push(b)}}else{const c=s.options;for(let f=0;f<c.length;f++){const y=c.item(f);if(y.selected){const b=this._getOptionValue(y.value);a.push(b)}}}this.value=a,e(a)}}_registerOption(e){const s=(this._idCounter++).toString();return this._optionMap.set(s,e),s}_getOptionId(e){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s)._value,e))return s;return null}_getOptionValue(e){const s=function(n){return n.split(":")[0]}(e);return this._optionMap.has(s)?this._optionMap.get(s)._value:e}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,s){1&e&&h.NdJ("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([rR]),h.qOj]}),n})(),Pm=(()=>{class n{constructor(e,s,a){this._element=e,this._renderer=s,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(vE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(vE(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(EE,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),IE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[QS]]}),n})(),lR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[IE]}),n})();function PT(n,t){if(1&n&&(h.TgZ(0,"option",7),h._uU(1),h.qZA()),2&n){const e=t.$implicit;h.Q6J("value",e.id),h.xp6(1),h.Oqu(e.name)}}const cR=[{path:"",component:RS,data:{animation:"Main"}},{path:"settings",component:(()=>{class n{constructor(e){this.settings=e,this._theme="light",this._currentBG="",this._showControls=!1,this._theme=e.theme,this._currentBG=e.bg,this._showControls=e.showControls}ngOnInit(){}set theme(e){this._theme=e,this.settings.theme=e}get theme(){return this._theme}set currentBG(e){this._currentBG=e,this.settings.bg=e}get currentBG(){return this._currentBG}get bgs(){return As}set showControls(e){this._showControls=e,this.settings.showControls=e}get showControls(){return this._showControls}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(ru))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-settings"]],decls:19,vars:5,consts:[[3,"notMain"],["appThemed","",3,"ngModel","ngModelChange"],["value","light"],["value","dark"],["value",""],[3,"value",4,"ngFor","ngForOf"],["appThemed","","type","checkbox",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,s){1&e&&(h.TgZ(0,"app-screen",0),h.TgZ(1,"h1"),h._uU(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),h.qZA(),h.TgZ(3,"label"),h._uU(4,"\u0422\u0435\u043c\u0430: "),h.TgZ(5,"select",1),h.NdJ("ngModelChange",function(c){return s.theme=c}),h.TgZ(6,"option",2),h._uU(7,"\u0421\u0432\u0435\u0442\u043b\u0430\u044f"),h.qZA(),h.TgZ(8,"option",3),h._uU(9,"\u0422\u0451\u043c\u043d\u0430\u044f"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"label"),h._uU(11,"\u0424\u043e\u043d: "),h.TgZ(12,"select",1),h.NdJ("ngModelChange",function(c){return s.currentBG=c}),h.TgZ(13,"option",4),h._uU(14,"\u0426\u0432\u0435\u0442 \u0442\u0435\u043c\u044b"),h.qZA(),h.YNc(15,PT,2,2,"option",5),h.qZA(),h.qZA(),h.TgZ(16,"label"),h._uU(17,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f "),h.TgZ(18,"input",6),h.NdJ("ngModelChange",function(c){return s.showControls=c}),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("notMain",!0),h.xp6(5),h.Q6J("ngModel",s.theme),h.xp6(7),h.Q6J("ngModel",s.currentBG),h.xp6(3),h.Q6J("ngForOf",s.bgs),h.xp6(3),h.Q6J("ngModel",s.showControls))},directives:[Cd,Ff,dl,sT,hE,yE,Pm,rn,ym],styles:["div.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:5px;gap:5px;width:-moz-fit-content;width:fit-content;align-items:center;font-family:sans-serif}table[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-family:sans-serif}h1[_ngcontent-%COMP%]{font-size:48px;margin:10px;text-align:center}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border-collapse:collapse;border:2px solid gray}td[_ngcontent-%COMP%]{padding:5px}"]}),n})()},{path:"rules",component:PS},{path:"highscores",component:Hv}];function dR(){return"undefined"!=typeof window&&void 0!==window.document}function MT(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Bu(n){switch(n.length){case 0:return new Io;case 1:return n[0];default:return new tu(n)}}function DE(n,t,e,s,a={},c={}){const f=[],y=[];let b=-1,T=null;if(s.forEach(x=>{const k=x.offset,Z=k==b,pe=Z&&T||{};Object.keys(x).forEach(Ie=>{let Ve=Ie,ze=x[Ie];if("offset"!==Ie)switch(Ve=t.normalizePropertyName(Ve,f),ze){case"!":ze=a[Ie];break;case Ji:ze=c[Ie];break;default:ze=t.normalizeStyleValue(Ie,Ve,ze,f)}pe[Ve]=ze}),Z||y.push(pe),T=pe,b=k}),f.length){const x="\n - ";throw new Error(`Unable to animate due to the following errors:${x}${f.join(x)}`)}return y}function Nm(n,t,e,s){switch(t){case"start":n.onStart(()=>s(e&&AE(e,"start",n)));break;case"done":n.onDone(()=>s(e&&AE(e,"done",n)));break;case"destroy":n.onDestroy(()=>s(e&&AE(e,"destroy",n)))}}function AE(n,t,e){const s=e.totalTime,c=SE(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==s?n.totalTime:s,!!e.disabled),f=n._data;return null!=f&&(c._data=f),c}function SE(n,t,e,s,a="",c=0,f){return{element:n,triggerName:t,fromState:e,toState:s,phaseName:a,totalTime:c,disabled:!!f}}function Es(n,t,e){let s;return n instanceof Map?(s=n.get(t),s||n.set(t,s=e)):(s=n[t],s||(s=n[t]=e)),s}function NT(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Om=(n,t)=>!1,OT=(n,t)=>!1,xm=(n,t,e)=>[];const hR=MT();(hR||"undefined"!=typeof Element)&&(Om=dR()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),OT=(()=>{if(hR||Element.prototype.matches)return(n,t)=>n.matches(t);{const n=Element.prototype,t=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return t?(e,s)=>t.apply(e,[s]):OT}})(),xm=(n,t,e)=>{let s=[];if(e){const a=n.querySelectorAll(t);for(let c=0;c<a.length;c++)s.push(a[c])}else{const a=n.querySelector(t);a&&s.push(a)}return s});let xl=null,kT=!1;function Dd(n){xl||(xl=("undefined"!=typeof document?document.body:null)||{},kT=!!xl.style&&"WebkitAppearance"in xl.style);let t=!0;return xl.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in xl.style,!t&&kT&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in xl.style)),t}const RE=OT,km=Om,Ba=xm;function PE(n){const t={};return Object.keys(n).forEach(e=>{const s=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[s]=n[e]}),t}let Fm=(()=>{class n{validateStyleProperty(e){return Dd(e)}matchesElement(e,s){return RE(e,s)}containsElement(e,s){return km(e,s)}query(e,s,a){return Ba(e,s,a)}computeStyle(e,s,a){return a||""}animate(e,s,a,c,f,y=[],b){return new Io(a,c)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Lf=(()=>{class n{}return n.NOOP=new Fm,n})();const Uf="ng-enter",Bf="ng-leave",Lm="ng-trigger",Vm=".ng-trigger",mR="ng-animating",Ad=".ng-animating";function ju(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:FT(parseFloat(t[1]),t[2])}function FT(n,t){switch(t){case"s":return 1e3*n;default:return n}}function ME(n,t,e){return n.hasOwnProperty("duration")?n:function(n,t,e){let a,c=0,f="";if("string"==typeof n){const y=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===y)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};a=FT(parseFloat(y[1]),y[2]);const b=y[3];null!=b&&(c=FT(parseFloat(b),y[4]));const T=y[5];T&&(f=T)}else a=n;if(!e){let y=!1,b=t.length;a<0&&(t.push("Duration values below 0 are not allowed for this animation step."),y=!0),c<0&&(t.push("Delay values below 0 are not allowed for this animation step."),y=!0),y&&t.splice(b,0,`The provided timing value "${n}" is invalid.`)}return{duration:a,delay:c,easing:f}}(n,t,e)}function Sd(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function kl(n,t,e={}){if(t)for(let s in n)e[s]=n[s];else Sd(n,e);return e}function VT(n,t,e){return e?t+":"+e+";":""}function UT(n){let t="";for(let e=0;e<n.style.length;e++){const s=n.style.item(e);t+=VT(0,s,n.style.getPropertyValue(s))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=VT(0,ER(e),n.style[e]));n.setAttribute("style",t)}function ja(n,t,e){n.style&&(Object.keys(t).forEach(s=>{const a=NE(s);e&&!e.hasOwnProperty(s)&&(e[s]=n.style[a]),n.style[a]=t[s]}),MT()&&UT(n))}function $u(n,t){n.style&&(Object.keys(t).forEach(e=>{const s=NE(e);n.style[s]=""}),MT()&&UT(n))}function jf(n){return Array.isArray(n)?1==n.length?n[0]:eu(n):n}const BT=new RegExp("{{\\s*(.+?)\\s*}}","g");function yR(n){let t=[];if("string"==typeof n){let e;for(;e=BT.exec(n);)t.push(e[1]);BT.lastIndex=0}return t}function Um(n,t,e){const s=n.toString(),a=s.replace(BT,(c,f)=>{let y=t[f];return t.hasOwnProperty(f)||(e.push(`Please provide a value for the animation param ${f}`),y=""),y.toString()});return a==s?n:a}function Bm(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const vR=/-+([a-z0-9])/g;function NE(n){return n.replace(vR,(...t)=>t[1].toUpperCase())}function ER(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Bs(n,t){return 0===n||0===t}function jT(n,t,e){const s=Object.keys(e);if(s.length&&t.length){let c=t[0],f=[];if(s.forEach(y=>{c.hasOwnProperty(y)||f.push(y),c[y]=e[y]}),f.length)for(var a=1;a<t.length;a++){let y=t[a];f.forEach(function(b){y[b]=OE(n,b)})}}return t}function Cs(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function OE(n,t){return window.getComputedStyle(n)[t]}function FM(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(s=>function(n,t,e){if(":"==n[0]){const b=function(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,s)=>parseFloat(s)>parseFloat(e);case":decrement":return(e,s)=>parseFloat(s)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof b)return void t.push(b);n=b}const s=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const a=s[1],c=s[2],f=s[3];t.push(xE(a,f));"<"==c[0]&&!("*"==a&&"*"==f)&&t.push(xE(f,a))}(s,e,t)):e.push(n),e}const $m=new Set(["true","1"]),Fl=new Set(["false","0"]);function xE(n,t){const e=$m.has(n)||Fl.has(n),s=$m.has(t)||Fl.has(t);return(a,c)=>{let f="*"==n||n==a,y="*"==t||t==c;return!f&&e&&"boolean"==typeof a&&(f=a?$m.has(n):Fl.has(n)),!y&&s&&"boolean"==typeof c&&(y=c?$m.has(t):Fl.has(t)),f&&y}}const TR=new RegExp("s*:selfs*,?","g");function $T(n,t,e){return new LM(n).build(t,e)}class LM{constructor(t){this._driver=t}build(t,e){const s=new AR(e);return this._resetContextStyleTimingState(s),Cs(this,jf(t),s)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let s=e.queryCount=0,a=e.depCount=0;const c=[],f=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(y=>{if(this._resetContextStyleTimingState(e),0==y.type){const b=y,T=b.name;T.toString().split(/\s*,\s*/).forEach(x=>{b.name=x,c.push(this.visitState(b,e))}),b.name=T}else if(1==y.type){const b=this.visitTransition(y,e);s+=b.queryCount,a+=b.depCount,f.push(b)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:c,transitions:f,queryCount:s,depCount:a,options:null}}visitState(t,e){const s=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(s.containsDynamicStyles){const c=new Set,f=a||{};if(s.styles.forEach(y=>{if(FE(y)){const b=y;Object.keys(b).forEach(T=>{yR(b[T]).forEach(x=>{f.hasOwnProperty(x)||c.add(x)})})}}),c.size){const y=Bm(c.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${y.join(", ")}`)}}return{type:0,name:t.name,style:s,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const s=Cs(this,jf(t.animation),e);return{type:1,matchers:FM(t.expr,e.errors),animation:s,queryCount:e.queryCount,depCount:e.depCount,options:Hu(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(s=>Cs(this,s,e)),options:Hu(t.options)}}visitGroup(t,e){const s=e.currentTime;let a=0;const c=t.steps.map(f=>{e.currentTime=s;const y=Cs(this,f,e);return a=Math.max(a,e.currentTime),y});return e.currentTime=a,{type:3,steps:c,options:Hu(t.options)}}visitAnimate(t,e){const s=function(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return LE(ME(n,t).duration,0,"");const s=n;if(s.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=LE(0,0,"");return c.dynamic=!0,c.strValue=s,c}return e=e||ME(s,t),LE(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=s;let a,c=t.styles?t.styles:fs({});if(5==c.type)a=this.visitKeyframes(c,e);else{let f=t.styles,y=!1;if(!f){y=!0;const T={};s.easing&&(T.easing=s.easing),f=fs(T)}e.currentTime+=s.duration+s.delay;const b=this.visitStyle(f,e);b.isEmptyStep=y,a=b}return e.currentAnimateTimings=null,{type:4,timings:s,style:a,options:null}}visitStyle(t,e){const s=this._makeStyleAst(t,e);return this._validateStyleAst(s,e),s}_makeStyleAst(t,e){const s=[];Array.isArray(t.styles)?t.styles.forEach(f=>{"string"==typeof f?f==Ji?s.push(f):e.errors.push(`The provided style string value ${f} is not allowed.`):s.push(f)}):s.push(t.styles);let a=!1,c=null;return s.forEach(f=>{if(FE(f)){const y=f,b=y.easing;if(b&&(c=b,delete y.easing),!a)for(let T in y)if(y[T].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:s,easing:c,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const s=e.currentAnimateTimings;let a=e.currentTime,c=e.currentTime;s&&c>0&&(c-=s.duration+s.delay),t.styles.forEach(f=>{"string"!=typeof f&&Object.keys(f).forEach(y=>{if(!this._driver.validateStyleProperty(y))return void e.errors.push(`The provided animation property "${y}" is not a supported CSS property for animations`);const b=e.collectedStyles[e.currentQuerySelector],T=b[y];let x=!0;T&&(c!=a&&c>=T.startTime&&a<=T.endTime&&(e.errors.push(`The CSS property "${y}" that exists between the times of "${T.startTime}ms" and "${T.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${a}ms"`),x=!1),c=T.startTime),x&&(b[y]={startTime:c,endTime:a}),e.options&&function(n,t,e){const s=t.params||{},a=yR(n);a.length&&a.forEach(c=>{s.hasOwnProperty(c)||e.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(f[y],e.options,e.errors)})})}visitKeyframes(t,e){const s={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),s;let c=0;const f=[];let y=!1,b=!1,T=0;const x=t.steps.map($t=>{const Dt=this._makeStyleAst($t,e);let dn=null!=Dt.offset?Dt.offset:function(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(FE(e)&&e.hasOwnProperty("offset")){const s=e;t=parseFloat(s.offset),delete s.offset}});else if(FE(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(Dt.styles),Ht=0;return null!=dn&&(c++,Ht=Dt.offset=dn),b=b||Ht<0||Ht>1,y=y||Ht<T,T=Ht,f.push(Ht),Dt});b&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),y&&e.errors.push("Please ensure that all keyframe offsets are in order");const k=t.steps.length;let Z=0;c>0&&c<k?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(Z=1/(k-1));const pe=k-1,Ie=e.currentTime,Ve=e.currentAnimateTimings,ze=Ve.duration;return x.forEach(($t,Dt)=>{const dn=Z>0?Dt==pe?1:Z*Dt:f[Dt],Ht=dn*ze;e.currentTime=Ie+Ve.delay+Ht,Ve.duration=Ht,this._validateStyleAst($t,e),$t.offset=dn,s.styles.push($t)}),s}visitReference(t,e){return{type:8,animation:Cs(this,jf(t.animation),e),options:Hu(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Hu(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Hu(t.options)}}visitQuery(t,e){const s=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;const[c,f]=function(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(TR,"")),[n=n.replace(/@\*/g,Vm).replace(/@\w+/g,e=>Vm+"-"+e.substr(1)).replace(/:animating/g,Ad),t]}(t.selector);e.currentQuerySelector=s.length?s+" "+c:c,Es(e.collectedStyles,e.currentQuerySelector,{});const y=Cs(this,jf(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=s,{type:11,selector:c,limit:a.limit||0,optional:!!a.optional,includeSelf:f,animation:y,originalSelector:t.selector,options:Hu(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const s="full"===t.timings?{duration:0,delay:0,easing:"full"}:ME(t.timings,e.errors,!0);return{type:12,animation:Cs(this,jf(t.animation),e),timings:s,options:null}}}class AR{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function FE(n){return!Array.isArray(n)&&"object"==typeof n}function Hu(n){return n?(n=Sd(n)).params&&(n.params=function(n){return n?Sd(n):null}(n.params)):n={},n}function LE(n,t,e){return{duration:n,delay:t,easing:e}}function bs(n,t,e,s,a,c,f=null,y=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:s,duration:a,delay:c,totalTime:a+c,easing:f,subTimeline:y}}class VE{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let s=this._map.get(t);s||this._map.set(t,s=[]),s.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const WT=new RegExp(":enter","g"),zT=new RegExp(":leave","g");function $f(n,t,e,s,a,c={},f={},y,b,T=[]){return(new UE).buildKeyframes(n,t,e,s,a,c,f,y,b,T)}class UE{buildKeyframes(t,e,s,a,c,f,y,b,T,x=[]){T=T||new VE;const k=new Pd(t,e,T,a,c,x,[]);k.options=b,k.currentTimeline.setStyles([f],null,k.errors,b),Cs(this,s,k);const Z=k.timelines.filter(pe=>pe.containsAnimation());if(Z.length&&Object.keys(y).length){const pe=Z[Z.length-1];pe.allowOnlyTimelineStyles()||pe.setStyles([y],null,k.errors,b)}return Z.length?Z.map(pe=>pe.buildKeyframes()):[bs(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const s=e.subInstructions.consume(e.element);if(s){const a=e.createSubContext(t.options),c=e.currentTimeline.currentTime,f=this._visitSubInstructions(s,a,a.options);c!=f&&e.transformIntoNewTimeline(f)}e.previousNode=t}visitAnimateRef(t,e){const s=e.createSubContext(t.options);s.transformIntoNewTimeline(),this.visitReference(t.animation,s),e.transformIntoNewTimeline(s.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,s){let c=e.currentTimeline.currentTime;const f=null!=s.duration?ju(s.duration):null,y=null!=s.delay?ju(s.delay):null;return 0!==f&&t.forEach(b=>{const T=e.appendInstructionToTimeline(b,f,y);c=Math.max(c,T.duration+T.delay)}),c}visitReference(t,e){e.updateOptions(t.options,!0),Cs(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const s=e.subContextCount;let a=e;const c=t.options;if(c&&(c.params||c.delay)&&(a=e.createSubContext(c),a.transformIntoNewTimeline(),null!=c.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Rd);const f=ju(c.delay);a.delayNextStep(f)}t.steps.length&&(t.steps.forEach(f=>Cs(this,f,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>s&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const s=[];let a=e.currentTimeline.currentTime;const c=t.options&&t.options.delay?ju(t.options.delay):0;t.steps.forEach(f=>{const y=e.createSubContext(t.options);c&&y.delayNextStep(c),Cs(this,f,y),a=Math.max(a,y.currentTimeline.currentTime),s.push(y.currentTimeline)}),s.forEach(f=>e.currentTimeline.mergeTimelineCollectedStyles(f)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const s=t.strValue;return ME(e.params?Um(s,e.params,e.errors):s,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const s=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;s.delay&&(e.incrementTime(s.delay),a.snapshotCurrentStyles());const c=t.style;5==c.type?this.visitKeyframes(c,e):(e.incrementTime(s.duration),this.visitStyle(c,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const s=e.currentTimeline,a=e.currentAnimateTimings;!a&&s.getCurrentStyleProperties().length&&s.forwardFrame();const c=a&&a.easing||t.easing;t.isEmptyStep?s.applyEmptyStep(c):s.setStyles(t.styles,c,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const s=e.currentAnimateTimings,a=e.currentTimeline.duration,c=s.duration,y=e.createSubContext().currentTimeline;y.easing=s.easing,t.styles.forEach(b=>{y.forwardTime((b.offset||0)*c),y.setStyles(b.styles,b.easing,e.errors,e.options),y.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(y),e.transformIntoNewTimeline(a+c),e.previousNode=t}visitQuery(t,e){const s=e.currentTimeline.currentTime,a=t.options||{},c=a.delay?ju(a.delay):0;c&&(6===e.previousNode.type||0==s&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Rd);let f=s;const y=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=y.length;let b=null;y.forEach((T,x)=>{e.currentQueryIndex=x;const k=e.createSubContext(t.options,T);c&&k.delayNextStep(c),T===e.element&&(b=k.currentTimeline),Cs(this,t.animation,k),k.currentTimeline.applyStylesToKeyframe(),f=Math.max(f,k.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(f),b&&(e.currentTimeline.mergeTimelineCollectedStyles(b),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const s=e.parentContext,a=e.currentTimeline,c=t.timings,f=Math.abs(c.duration),y=f*(e.currentQueryTotal-1);let b=f*e.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":b=y-b;break;case"full":b=s.currentStaggerTime}const x=e.currentTimeline;b&&x.delayNextStep(b);const k=x.currentTime;Cs(this,t.animation,e),e.previousNode=t,s.currentStaggerTime=a.currentTime-k+(a.startTime-s.currentTimeline.startTime)}}const Rd={};class Pd{constructor(t,e,s,a,c,f,y,b){this._driver=t,this.element=e,this.subInstructions=s,this._enterClassName=a,this._leaveClassName=c,this.errors=f,this.timelines=y,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=b||new Wu(this._driver,e,0),y.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const s=t;let a=this.options;null!=s.duration&&(a.duration=ju(s.duration)),null!=s.delay&&(a.delay=ju(s.delay));const c=s.params;if(c){let f=a.params;f||(f=this.options.params={}),Object.keys(c).forEach(y=>{(!e||!f.hasOwnProperty(y))&&(f[y]=Um(c[y],f,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const s=t.params={};Object.keys(e).forEach(a=>{s[a]=e[a]})}}return t}createSubContext(t=null,e,s){const a=e||this.element,c=new Pd(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,s||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(t),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(t){return this.previousNode=Rd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,s){const a={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+t.delay,easing:""},c=new qT(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(c),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,s,a,c,f){let y=[];if(a&&y.push(this.element),t.length>0){t=(t=t.replace(WT,"."+this._enterClassName)).replace(zT,"."+this._leaveClassName);let T=this._driver.query(this.element,t,1!=s);0!==s&&(T=s<0?T.slice(T.length+s,T.length):T.slice(0,s)),y.push(...T)}return!c&&0==y.length&&f.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),y}}class Wu{constructor(t,e,s,a){this._driver=t,this.element=e,this.startTime=s,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Wu(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Ji,this._currentKeyframe[e]=Ji}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,s,a){e&&(this._previousKeyframe.easing=e);const c=a&&a.params||{},f=function(n,t){const e={};let s;return n.forEach(a=>{"*"===a?(s=s||Object.keys(t),s.forEach(c=>{e[c]=Ji})):kl(a,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(f).forEach(y=>{const b=Um(f[y],c,s);this._pendingStyles[y]=b,this._localTimelineStyles.hasOwnProperty(y)||(this._backFill[y]=this._globalTimelineStyles.hasOwnProperty(y)?this._globalTimelineStyles[y]:Ji),this._updateStyle(y,b)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(s=>{this._currentKeyframe[s]=t[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const s=this._styleSummary[e],a=t._styleSummary[e];(!s||a.time>s.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,s=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((y,b)=>{const T=kl(y,!0);Object.keys(T).forEach(x=>{const k=T[x];"!"==k?t.add(x):k==Ji&&e.add(x)}),s||(T.offset=b/this.duration),a.push(T)});const c=t.size?Bm(t.values()):[],f=e.size?Bm(e.values()):[];if(s){const y=a[0],b=Sd(y);y.offset=0,b.offset=1,a=[y,b]}return bs(this.element,a,c,f,this.duration,this.startTime,this.easing,!1)}}class qT extends Wu{constructor(t,e,s,a,c,f,y=!1){super(t,e,f.delay),this.keyframes=s,this.preStyleProps=a,this.postStyleProps=c,this._stretchStartingKeyframe=y,this.timings={duration:f.duration,delay:f.delay,easing:f.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:s,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const c=[],f=s+e,y=e/f,b=kl(t[0],!1);b.offset=0,c.push(b);const T=kl(t[0],!1);T.offset=BE(y),c.push(T);const x=t.length-1;for(let k=1;k<=x;k++){let Z=kl(t[k],!1);Z.offset=BE((e+Z.offset*s)/f),c.push(Z)}s=f,e=0,a="",t=c}return bs(this.element,t,this.preStyleProps,this.postStyleProps,s,e,a,!0)}}function BE(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Hm{}class NR extends Hm{normalizePropertyName(t,e){return NE(t)}normalizeStyleValue(t,e,s,a){let c="";const f=s.toString().trim();if(jE[e]&&0!==s&&"0"!==s)if("number"==typeof s)c="px";else{const y=s.match(/^[+-]?[\d\.]+([a-z]*)$/);y&&0==y[1].length&&a.push(`Please provide a CSS unit value for ${t}:${s}`)}return f+c}}const jE=(()=>function(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ni(n,t,e,s,a,c,f,y,b,T,x,k,Z){return{type:0,element:n,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:c,toState:s,toStyles:f,timelines:y,queriedElements:b,preStyleProps:T,postStyleProps:x,totalTime:k,errors:Z}}const Gu={};class Hf{constructor(t,e,s){this._triggerName=t,this.ast=e,this._stateStyles=s}match(t,e,s,a){return function(n,t,e,s,a){return n.some(c=>c(t,e,s,a))}(this.ast.matchers,t,e,s,a)}buildStyles(t,e,s){const a=this._stateStyles["*"],c=this._stateStyles[t],f=a?a.buildStyles(e,s):{};return c?c.buildStyles(e,s):f}build(t,e,s,a,c,f,y,b,T,x){const k=[],Z=this.ast.options&&this.ast.options.params||Gu,Ie=this.buildStyles(s,y&&y.params||Gu,k),Ve=b&&b.params||Gu,ze=this.buildStyles(a,Ve,k),$t=new Set,Dt=new Map,dn=new Map,Ht="void"===a,yi={params:Object.assign(Object.assign({},Z),Ve)},xi=x?[]:$f(t,e,this.ast.animation,c,f,Ie,ze,yi,T,k);let ws=0;if(xi.forEach(Ju=>{ws=Math.max(Ju.duration+Ju.delay,ws)}),k.length)return Ni(e,this._triggerName,s,a,Ht,Ie,ze,[],[],Dt,dn,ws,k);xi.forEach(Ju=>{const Xu=Ju.element,RN=Es(Dt,Xu,{});Ju.preStyleProps.forEach(Qf=>RN[Qf]=!0);const QE=Es(dn,Xu,{});Ju.postStyleProps.forEach(Qf=>QE[Qf]=!0),Xu!==e&&$t.add(Xu)});const Qu=Bm($t.values());return Ni(e,this._triggerName,s,a,Ht,Ie,ze,xi,Qu,Dt,dn,ws)}}class Wm{constructor(t,e,s){this.styles=t,this.defaultParams=e,this.normalizer=s}buildStyles(t,e){const s={},a=Sd(this.defaultParams);return Object.keys(t).forEach(c=>{const f=t[c];null!=f&&(a[c]=f)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const f=c;Object.keys(f).forEach(y=>{let b=f[y];b.length>1&&(b=Um(b,a,e));const T=this.normalizer.normalizePropertyName(y,e);b=this.normalizer.normalizeStyleValue(y,T,b,e),s[T]=b})}}),s}}class ZT{constructor(t,e,s){this.name=t,this.ast=e,this._normalizer=s,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new Wm(a.style,a.options&&a.options.params||{},s)}),YT(this.states,"true","1"),YT(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new Hf(t,a,this.states))}),this.fallbackTransition=function(n,t,e){return new Hf(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(f,y)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,s,a){return this.transitionFactories.find(f=>f.match(t,e,s,a))||null}matchStyles(t,e,s){return this.fallbackTransition.buildStyles(t,e,s)}}function YT(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const xR=new VE;class kR{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(t,e){const s=[],a=$T(this._driver,e,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[t]=a}_buildPlayer(t,e,s){const a=t.element,c=DE(0,this._normalizer,0,t.keyframes,e,s);return this._driver.animate(a,c,t.duration,t.delay,t.easing,[],!0)}create(t,e,s={}){const a=[],c=this._animations[t];let f;const y=new Map;if(c?(f=$f(this._driver,e,c,Uf,Bf,{},{},s,xR,a),f.forEach(x=>{const k=Es(y,x.element,{});x.postStyleProps.forEach(Z=>k[Z]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),f=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);y.forEach((x,k)=>{Object.keys(x).forEach(Z=>{x[Z]=this._driver.computeStyle(k,Z,Ji)})});const T=Bu(f.map(x=>{const k=y.get(x.element);return this._buildPlayer(x,{},k)}));return this._playersById[t]=T,T.onDestroy(()=>this.destroy(t)),this.players.push(T),T}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const s=this.players.indexOf(e);s>=0&&this.players.splice(s,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,s,a){const c=SE(e,"","","");return Nm(this._getPlayer(t),s,c,a),()=>{}}command(t,e,s,a){if("register"==s)return void this.register(t,a[0]);if("create"==s)return void this.create(t,e,a[0]||{});const c=this._getPlayer(t);switch(s){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t)}}}const QT="ng-animate-queued",XT="ng-animate-disabled",eI=".ng-animate-disabled",Wf=[],zm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},LR={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},js="__ng_removed";class HE{constructor(t,e=""){this.namespaceId=e;const s=t&&t.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(s?t.value:t),s){const c=Sd(t);delete c.value,this.options=c}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const s=this.options.params;Object.keys(e).forEach(a=>{null==s[a]&&(s[a]=e[a])})}}}const zu="void",WE=new HE(zu);class tI{constructor(t,e,s){this.id=t,this.hostElement=e,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Hs(e,this._hostClassName)}listen(t,e,s,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${e}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(s))throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${e}" is not supported!`);const c=Es(this._elementListeners,t,[]),f={name:e,phase:s,callback:a};c.push(f);const y=Es(this._engine.statesByElement,t,{});return y.hasOwnProperty(e)||(Hs(t,Lm),Hs(t,Lm+"-"+e),y[e]=WE),()=>{this._engine.afterFlush(()=>{const b=c.indexOf(f);b>=0&&c.splice(b,1),this._triggers[e]||delete y[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,s,a=!0){const c=this._getTrigger(e),f=new GE(this.id,e,t);let y=this._engine.statesByElement.get(t);y||(Hs(t,Lm),Hs(t,Lm+"-"+e),this._engine.statesByElement.set(t,y={}));let b=y[e];const T=new HE(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&b&&T.absorbOptions(b.options),y[e]=T,b||(b=WE),T.value!==zu&&b.value===T.value){if(!function(n,t){const e=Object.keys(n),s=Object.keys(t);if(e.length!=s.length)return!1;for(let a=0;a<e.length;a++){const c=e[a];if(!t.hasOwnProperty(c)||n[c]!==t[c])return!1}return!0}(b.params,T.params)){const Ve=[],ze=c.matchStyles(b.value,b.params,Ve),$t=c.matchStyles(T.value,T.params,Ve);Ve.length?this._engine.reportError(Ve):this._engine.afterFlush(()=>{$u(t,ze),ja(t,$t)})}return}const Z=Es(this._engine.playersByElement,t,[]);Z.forEach(Ve=>{Ve.namespaceId==this.id&&Ve.triggerName==e&&Ve.queued&&Ve.destroy()});let pe=c.matchTransition(b.value,T.value,t,T.params),Ie=!1;if(!pe){if(!a)return;pe=c.fallbackTransition,Ie=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:pe,fromState:b,toState:T,player:f,isFallbackTransition:Ie}),Ie||(Hs(t,QT),f.onStart(()=>{Zu(t,QT)})),f.onDone(()=>{let Ve=this.players.indexOf(f);Ve>=0&&this.players.splice(Ve,1);const ze=this._engine.playersByElement.get(t);if(ze){let $t=ze.indexOf(f);$t>=0&&ze.splice($t,1)}}),this.players.push(f),Z.push(f),f}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,s)=>{delete e[t]}),this._elementListeners.forEach((e,s)=>{this._elementListeners.set(s,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(s=>s.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const s=this._engine.driver.query(t,Vm,!0);s.forEach(a=>{if(a[js])return;const c=this._engine.fetchNamespacesByElement(a);c.size?c.forEach(f=>f.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,s,a){const c=this._engine.statesByElement.get(t);if(c){const f=[];if(Object.keys(c).forEach(y=>{if(this._triggers[y]){const b=this.trigger(t,y,zu,a);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),s&&Bu(f).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),s=this._engine.statesByElement.get(t);if(e&&s){const a=new Set;e.forEach(c=>{const f=c.name;if(a.has(f))return;a.add(f);const b=this._triggers[f].fallbackTransition,T=s[f]||WE,x=new HE(zu),k=new GE(this.id,f,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:f,transition:b,fromState:T,toState:x,player:k,isFallbackTransition:!0})})}}removeNode(t,e){const s=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(s.totalAnimations){const c=s.players.length?s.playersByQueriedElement.get(t):[];if(c&&c.length)a=!0;else{let f=t;for(;f=f.parentNode;)if(s.statesByElement.get(f)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)s.markElementAsRemoved(this.id,t,!1,e);else{const c=t[js];(!c||c===zm)&&(s.afterFlush(()=>this.clearElementCache(t)),s.destroyInnerAnimations(t),s._onRemovalComplete(t,e))}}insertNode(t,e){Hs(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(s=>{const a=s.player;if(a.destroyed)return;const c=s.element,f=this._elementListeners.get(c);f&&f.forEach(y=>{if(y.name==s.triggerName){const b=SE(c,s.triggerName,s.fromState.value,s.toState.value);b._data=t,Nm(s.player,y.phase,b,y.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(s)}),this._queue=[],e.sort((s,a)=>{const c=s.transition.ast.depCount,f=a.transition.ast.depCount;return 0==c||0==f?c-f:this._engine.driver.containsElement(s.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(s=>s.element===t)||e,e}}class nI{constructor(t,e,s){this.bodyNode=t,this.driver=e,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,c)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(s=>{s.queued&&t.push(s)})}),t}createNamespace(t,e){const s=new tI(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(s,e):(this.newHostElements.set(e,s),this.collectEnterElement(e)),this._namespaceLookup[t]=s}_balanceNamespaceList(t,e){const s=this._namespaceList.length-1;if(s>=0){let a=!1;for(let c=s;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,e)){this._namespaceList.splice(c+1,0,t),a=!0;break}a||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let s=this._namespaceLookup[t];return s||(s=this.createNamespace(t,e)),s}registerTrigger(t,e,s){let a=this._namespaceLookup[t];a&&a.register(e,s)&&this.totalAnimations++}destroy(t,e){if(!t)return;const s=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[t];const a=this._namespaceList.indexOf(s);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>s.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,s=this.statesByElement.get(t);if(s){const a=Object.keys(s);for(let c=0;c<a.length;c++){const f=s[a[c]].namespaceId;if(f){const y=this._fetchNamespace(f);y&&e.add(y)}}}return e}trigger(t,e,s,a){if($s(e)){const c=this._fetchNamespace(t);if(c)return c.trigger(e,s,a),!0}return!1}insertNode(t,e,s,a){if(!$s(e))return;const c=e[js];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const f=this.collectedLeaveElements.indexOf(e);f>=0&&this.collectedLeaveElements.splice(f,1)}if(t){const f=this._fetchNamespace(t);f&&f.insertNode(e,s)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Hs(t,XT)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Zu(t,XT))}removeNode(t,e,s,a){if($s(e)){const c=t?this._fetchNamespace(t):null;if(c?c.removeNode(e,a):this.markElementAsRemoved(t,e,!1,a),s){const f=this.namespacesByHostElement.get(e);f&&f.id!==t&&f.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(t,e,s,a){this.collectedLeaveElements.push(e),e[js]={namespaceId:t,setForRemoval:a,hasAnimation:s,removedBeforeQueried:!1}}listen(t,e,s,a,c){return $s(e)?this._fetchNamespace(t).listen(e,s,a,c):()=>{}}_buildInstruction(t,e,s,a,c){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,s,a,t.fromState.options,t.toState.options,e,c)}destroyInnerAnimations(t){let e=this.driver.query(t,Vm,!0);e.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Ad,!0),e.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Bu(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[js];if(e&&e.setForRemoval){if(t[js]=zm,e.namespaceId){this.destroyInnerAnimations(t);const s=this._fetchNamespace(e.namespaceId);s&&s.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,eI)&&this.markElementAsDisabled(t,!1),this.driver.query(t,eI,!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,a)=>this._balanceNamespaceList(s,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)Hs(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{e=this._flushAnimations(s,t)}finally{for(let a=0;a<s.length;a++)s[a]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],e.length?Bu(e).onDone(()=>{s.forEach(a=>a())}):s.forEach(a=>a())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const s=new VE,a=[],c=new Map,f=[],y=new Map,b=new Map,T=new Map,x=new Set;this.disabledNodes.forEach(nt=>{x.add(nt);const Ct=this.driver.query(nt,".ng-animate-queued",!0);for(let qt=0;qt<Ct.length;qt++)x.add(Ct[qt])});const k=this.bodyNode,Z=Array.from(this.statesByElement.keys()),pe=Ku(Z,this.collectedEnterElements),Ie=new Map;let Ve=0;pe.forEach((nt,Ct)=>{const qt=Uf+Ve++;Ie.set(Ct,qt),nt.forEach(Pn=>Hs(Pn,qt))});const ze=[],$t=new Set,Dt=new Set;for(let nt=0;nt<this.collectedLeaveElements.length;nt++){const Ct=this.collectedLeaveElements[nt],qt=Ct[js];qt&&qt.setForRemoval&&(ze.push(Ct),$t.add(Ct),qt.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(Pn=>$t.add(Pn)):Dt.add(Ct))}const dn=new Map,Ht=Ku(Z,Array.from($t));Ht.forEach((nt,Ct)=>{const qt=Bf+Ve++;dn.set(Ct,qt),nt.forEach(Pn=>Hs(Pn,qt))}),t.push(()=>{pe.forEach((nt,Ct)=>{const qt=Ie.get(Ct);nt.forEach(Pn=>Zu(Pn,qt))}),Ht.forEach((nt,Ct)=>{const qt=dn.get(Ct);nt.forEach(Pn=>Zu(Pn,qt))}),ze.forEach(nt=>{this.processLeaveNode(nt)})});const yi=[],xi=[];for(let nt=this._namespaceList.length-1;nt>=0;nt--)this._namespaceList[nt].drainQueuedTransitions(e).forEach(qt=>{const Pn=qt.player,ki=qt.element;if(yi.push(Pn),this.collectedEnterElements.length){const Bl=ki[js];if(Bl&&Bl.setForMove)return void Pn.destroy()}const Ul=!k||!this.driver.containsElement(k,ki),go=dn.get(ki),Fd=Ie.get(ki),Ur=this._buildInstruction(qt,s,Fd,go,Ul);if(Ur.errors&&Ur.errors.length)xi.push(Ur);else{if(Ul)return Pn.onStart(()=>$u(ki,Ur.fromStyles)),Pn.onDestroy(()=>ja(ki,Ur.toStyles)),void a.push(Pn);if(qt.isFallbackTransition)return Pn.onStart(()=>$u(ki,Ur.fromStyles)),Pn.onDestroy(()=>ja(ki,Ur.toStyles)),void a.push(Pn);Ur.timelines.forEach(Bl=>Bl.stretchStartingKeyframe=!0),s.append(ki,Ur.timelines),f.push({instruction:Ur,player:Pn,element:ki}),Ur.queriedElements.forEach(Bl=>Es(y,Bl,[]).push(Pn)),Ur.preStyleProps.forEach((Bl,JE)=>{const fI=Object.keys(Bl);if(fI.length){let Jf=b.get(JE);Jf||b.set(JE,Jf=new Set),fI.forEach(fP=>Jf.add(fP))}}),Ur.postStyleProps.forEach((Bl,JE)=>{const fI=Object.keys(Bl);let Jf=T.get(JE);Jf||T.set(JE,Jf=new Set),fI.forEach(fP=>Jf.add(fP))})}});if(xi.length){const nt=[];xi.forEach(Ct=>{nt.push(`@${Ct.triggerName} has failed due to:\n`),Ct.errors.forEach(qt=>nt.push(`- ${qt}\n`))}),yi.forEach(Ct=>Ct.destroy()),this.reportError(nt)}const ws=new Map,Qu=new Map;f.forEach(nt=>{const Ct=nt.element;s.has(Ct)&&(Qu.set(Ct,Ct),this._beforeAnimationBuild(nt.player.namespaceId,nt.instruction,ws))}),a.forEach(nt=>{const Ct=nt.element;this._getPreviousPlayers(Ct,!1,nt.namespaceId,nt.triggerName,null).forEach(Pn=>{Es(ws,Ct,[]).push(Pn),Pn.destroy()})});const Ju=ze.filter(nt=>sI(nt,b,T)),Xu=new Map;zf(Xu,this.driver,Dt,T,Ji).forEach(nt=>{sI(nt,b,T)&&Ju.push(nt)});const QE=new Map;pe.forEach((nt,Ct)=>{zf(QE,this.driver,new Set(nt),b,"!")}),Ju.forEach(nt=>{const Ct=Xu.get(nt),qt=QE.get(nt);Xu.set(nt,Object.assign(Object.assign({},Ct),qt))});const Qf=[],PN=[],MN={};f.forEach(nt=>{const{element:Ct,player:qt,instruction:Pn}=nt;if(s.has(Ct)){if(x.has(Ct))return qt.onDestroy(()=>ja(Ct,Pn.toStyles)),qt.disabled=!0,qt.overrideTotalTime(Pn.totalTime),void a.push(qt);let ki=MN;if(Qu.size>1){let go=Ct;const Fd=[];for(;go=go.parentNode;){const Ur=Qu.get(go);if(Ur){ki=Ur;break}Fd.push(go)}Fd.forEach(Ur=>Qu.set(Ur,ki))}const Ul=this._buildAnimation(qt.namespaceId,Pn,ws,c,QE,Xu);if(qt.setRealPlayer(Ul),ki===MN)Qf.push(qt);else{const go=this.playersByElement.get(ki);go&&go.length&&(qt.parentPlayer=Bu(go)),a.push(qt)}}else $u(Ct,Pn.fromStyles),qt.onDestroy(()=>ja(Ct,Pn.toStyles)),PN.push(qt),x.has(Ct)&&a.push(qt)}),PN.forEach(nt=>{const Ct=c.get(nt.element);if(Ct&&Ct.length){const qt=Bu(Ct);nt.setRealPlayer(qt)}}),a.forEach(nt=>{nt.parentPlayer?nt.syncPlayerEvents(nt.parentPlayer):nt.destroy()});for(let nt=0;nt<ze.length;nt++){const Ct=ze[nt],qt=Ct[js];if(Zu(Ct,Bf),qt&&qt.hasAnimation)continue;let Pn=[];if(y.size){let Ul=y.get(Ct);Ul&&Ul.length&&Pn.push(...Ul);let go=this.driver.query(Ct,Ad,!0);for(let Fd=0;Fd<go.length;Fd++){let Ur=y.get(go[Fd]);Ur&&Ur.length&&Pn.push(...Ur)}}const ki=Pn.filter(Ul=>!Ul.destroyed);ki.length?rI(this,Ct,ki):this.processLeaveNode(Ct)}return ze.length=0,Qf.forEach(nt=>{this.players.push(nt),nt.onDone(()=>{nt.destroy();const Ct=this.players.indexOf(nt);this.players.splice(Ct,1)}),nt.play()}),Qf}elementContainsData(t,e){let s=!1;const a=e[js];return a&&a.setForRemoval&&(s=!0),this.playersByElement.has(e)&&(s=!0),this.playersByQueriedElement.has(e)&&(s=!0),this.statesByElement.has(e)&&(s=!0),this._fetchNamespace(t).elementContainsData(e)||s}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,s,a,c){let f=[];if(e){const y=this.playersByQueriedElement.get(t);y&&(f=y)}else{const y=this.playersByElement.get(t);if(y){const b=!c||c==zu;y.forEach(T=>{T.queued||!b&&T.triggerName!=a||f.push(T)})}}return(s||a)&&(f=f.filter(y=>!(s&&s!=y.namespaceId||a&&a!=y.triggerName))),f}_beforeAnimationBuild(t,e,s){const c=e.element,f=e.isRemovalTransition?void 0:t,y=e.isRemovalTransition?void 0:e.triggerName;for(const b of e.timelines){const T=b.element,x=T!==c,k=Es(s,T,[]);this._getPreviousPlayers(T,x,f,y,e.toState).forEach(pe=>{const Ie=pe.getRealPlayer();Ie.beforeDestroy&&Ie.beforeDestroy(),pe.destroy(),k.push(pe)})}$u(c,e.fromStyles)}_buildAnimation(t,e,s,a,c,f){const y=e.triggerName,b=e.element,T=[],x=new Set,k=new Set,Z=e.timelines.map(Ie=>{const Ve=Ie.element;x.add(Ve);const ze=Ve[js];if(ze&&ze.removedBeforeQueried)return new Io(Ie.duration,Ie.delay);const $t=Ve!==b,Dt=function(n){const t=[];return zE(n,t),t}((s.get(Ve)||Wf).map(ws=>ws.getRealPlayer())).filter(ws=>!!ws.element&&ws.element===Ve),dn=c.get(Ve),Ht=f.get(Ve),yi=DE(0,this._normalizer,0,Ie.keyframes,dn,Ht),xi=this._buildPlayer(Ie,yi,Dt);if(Ie.subTimeline&&a&&k.add(Ve),$t){const ws=new GE(t,y,Ve);ws.setRealPlayer(xi),T.push(ws)}return xi});T.forEach(Ie=>{Es(this.playersByQueriedElement,Ie.element,[]).push(Ie),Ie.onDone(()=>function(n,t,e){let s;if(n instanceof Map){if(s=n.get(t),s){if(s.length){const a=s.indexOf(e);s.splice(a,1)}0==s.length&&n.delete(t)}}else if(s=n[t],s){if(s.length){const a=s.indexOf(e);s.splice(a,1)}0==s.length&&delete n[t]}return s}(this.playersByQueriedElement,Ie.element,Ie))}),x.forEach(Ie=>Hs(Ie,mR));const pe=Bu(Z);return pe.onDestroy(()=>{x.forEach(Ie=>Zu(Ie,mR)),ja(b,e.toStyles)}),k.forEach(Ie=>{Es(a,Ie,[]).push(pe)}),pe}_buildPlayer(t,e,s){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,s):new Io(t.duration,t.delay)}}class GE{constructor(t,e,s){this.namespaceId=t,this.triggerName=e,this.element=s,this._player=new Io,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(s=>Nm(t,e,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Es(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function $s(n){return n&&1===n.nodeType}function qu(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function zf(n,t,e,s,a){const c=[];e.forEach(b=>c.push(qu(b)));const f=[];s.forEach((b,T)=>{const x={};b.forEach(k=>{const Z=x[k]=t.computeStyle(T,k,a);(!Z||0==Z.length)&&(T[js]=LR,f.push(T))}),n.set(T,x)});let y=0;return e.forEach(b=>qu(b,c[y++])),f}function Ku(n,t){const e=new Map;if(n.forEach(y=>e.set(y,[])),0==t.length)return e;const a=new Set(t),c=new Map;function f(y){if(!y)return 1;let b=c.get(y);if(b)return b;const T=y.parentNode;return b=e.has(T)?T:a.has(T)?1:f(T),c.set(y,b),b}return t.forEach(y=>{const b=f(y);1!==b&&e.get(b).push(y)}),e}const qm="$$classes";function Hs(n,t){if(n.classList)n.classList.add(t);else{let e=n[qm];e||(e=n[qm]={}),e[t]=!0}}function Zu(n,t){if(n.classList)n.classList.remove(t);else{let e=n[qm];e&&delete e[t]}}function rI(n,t,e){Bu(e).onDone(()=>n.processLeaveNode(t))}function zE(n,t){for(let e=0;e<n.length;e++){const s=n[e];s instanceof tu?zE(s.players,t):t.push(s)}}function sI(n,t,e){const s=e.get(n);if(!s)return!1;let a=t.get(n);return a?s.forEach(c=>a.add(c)):t.set(n,s),e.delete(n),!0}class Km{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(a,c)=>{},this._transitionEngine=new nI(t,e,s),this._timelineEngine=new kR(t,e,s),this._transitionEngine.onRemovalComplete=(a,c)=>this.onRemovalComplete(a,c)}registerTrigger(t,e,s,a,c){const f=t+"-"+a;let y=this._triggerCache[f];if(!y){const b=[],T=$T(this._driver,c,b);if(b.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${b.join("\n - ")}`);y=function(n,t,e){return new ZT(n,t,e)}(a,T,this._normalizer),this._triggerCache[f]=y}this._transitionEngine.registerTrigger(e,a,y)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,s,a){this._transitionEngine.insertNode(t,e,s,a)}onRemove(t,e,s,a){this._transitionEngine.removeNode(t,e,a||!1,s)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,s,a){if("@"==s.charAt(0)){const[c,f]=NT(s);this._timelineEngine.command(c,e,f,a)}else this._transitionEngine.trigger(t,e,s,a)}listen(t,e,s,a,c){if("@"==s.charAt(0)){const[f,y]=NT(s);return this._timelineEngine.listen(f,e,y,c)}return this._transitionEngine.listen(t,e,s,a,c)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function KE(n,t){let e=null,s=null;return Array.isArray(t)&&t.length?(e=qf(t[0]),t.length>1&&(s=qf(t[t.length-1]))):t&&(e=qf(t)),e||s?new Yu(n,e,s):null}let Yu=(()=>{class n{constructor(e,s,a){this._element=e,this._startStyles=s,this._endStyles=a,this._state=0;let c=n.initialStylesByElement.get(e);c||n.initialStylesByElement.set(e,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&ja(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ja(this._element,this._initialStyles),this._endStyles&&(ja(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&($u(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($u(this._element,this._endStyles),this._endStyles=null),ja(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function qf(n){let t=null;const e=Object.keys(n);for(let s=0;s<e.length;s++){const a=e[s];BR(a)&&(t=t||{},t[a]=n[a])}return t}function BR(n){return"display"===n||"position"===n}const $R="animation",HR="animationend";class HM{constructor(t,e,s,a,c,f,y){this._element=t,this._name=e,this._duration=s,this._delay=a,this._easing=c,this._fillMode=f,this._onDoneFn=y,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=b=>this._handleCallback(b)}apply(){(function(n,t){const e=lI(n,"").trim();let s=0;e.length&&(function(n,t){let e=0;for(let s=0;s<n.length;s++)","===n.charAt(s)&&e++;return e}(e)+1,t=`${e}, ${t}`),Zm(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),zR(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){oI(this._element,this._name,"paused")}resume(){oI(this._element,this._name,"running")}setPosition(t){const e=GR(this._element,this._name);this._position=t*this._duration,Zm(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),zR(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,t){const s=lI(n,"").split(","),a=aI(s,t);a>=0&&(s.splice(a,1),Zm(n,"",s.join(",")))}(this._element,this._name))}}function oI(n,t,e){Zm(n,"PlayState",e,GR(n,t))}function GR(n,t){const e=lI(n,"");return e.indexOf(",")>0?aI(e.split(","),t):aI([e],t)}function aI(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function zR(n,t,e){e?n.removeEventListener(HR,t):n.addEventListener(HR,t)}function Zm(n,t,e,s){const a=$R+t;if(null!=s){const c=n.style[a];if(c.length){const f=c.split(",");f[s]=e,e=f.join(",")}}n.style[a]=e}function lI(n,t){return n.style[$R+t]||""}class r{constructor(t,e,s,a,c,f,y,b){this.element=t,this.keyframes=e,this.animationName=s,this._duration=a,this._delay=c,this._finalStyles=y,this._specialStyles=b,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=f||"linear",this.totalTime=a+c,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new HM(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(t[s]=e?this._finalStyles[s]:OE(this.element,s))})}this.currentSnapshot=t}}class i extends Io{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=PE(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class u{constructor(){this._count=0}validateStyleProperty(t){return Dd(t)}matchesElement(t,e){return RE(t,e)}containsElement(t,e){return km(t,e)}query(t,e,s){return Ba(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,s){s=s.map(y=>PE(y));let a=`@keyframes ${e} {\n`,c="";s.forEach(y=>{c=" ";const b=parseFloat(y.offset);a+=`${c}${100*b}% {\n`,c+=" ",Object.keys(y).forEach(T=>{const x=y[T];switch(T){case"offset":return;case"easing":return void(x&&(a+=`${c}animation-timing-function: ${x};\n`));default:return void(a+=`${c}${T}: ${x};\n`)}}),a+=`${c}}\n`}),a+="}\n";const f=document.createElement("style");return f.textContent=a,f}animate(t,e,s,a,c,f=[],y){const b=f.filter(ze=>ze instanceof r),T={};Bs(s,a)&&b.forEach(ze=>{let $t=ze.currentSnapshot;Object.keys($t).forEach(Dt=>T[Dt]=$t[Dt])});const x=function(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(s=>{Object.keys(s).forEach(a=>{"offset"==a||"easing"==a||(t[a]=s[a])})}),t}(e=jT(t,e,T));if(0==s)return new i(t,x);const k="gen_css_kf_"+this._count++,Z=this.buildKeyframeElement(t,k,e);(function(n){var t;const e=null===(t=n.getRootNode)||void 0===t?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(Z);const Ie=KE(t,e),Ve=new r(t,e,k,s,a,c,x,Ie);return Ve.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(Z)),Ve}}class D{constructor(t,e,s,a){this.element=t,this.keyframes=e,this.options=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,s){return t.animate(e,s)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:OE(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class M{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(W().toString()),this._cssKeyframesDriver=new u}validateStyleProperty(t){return Dd(t)}matchesElement(t,e){return RE(t,e)}containsElement(t,e){return km(t,e)}query(t,e,s){return Ba(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,s,a,c,f=[],y){if(!y&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,s,a,c,f);const x={duration:s,delay:a,fill:0==a?"both":"forwards"};c&&(x.easing=c);const k={},Z=f.filter(Ie=>Ie instanceof D);Bs(s,a)&&Z.forEach(Ie=>{let Ve=Ie.currentSnapshot;Object.keys(Ve).forEach(ze=>k[ze]=Ve[ze])});const pe=KE(t,e=jT(t,e=e.map(Ie=>kl(Ie,!1)),k));return new D(t,e,x,pe)}}function W(){return dR()&&Element.prototype.animate||{}}let ie=(()=>{class n extends hc{constructor(e,s){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(s.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(e){const s=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?eu(e):e;return Fe(this._renderer,null,s,"register",[a]),new ye(s,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(h.FYo),h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ye extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ce(this._id,t,e||{},this._renderer)}}class ce{constructor(t,e,s,a){this.id=t,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Fe(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Fe(n,t,e,s,a){return n.setProperty(t,`@@${e}:${s}`,a)}const it="@.disabled";let It=(()=>{class n{constructor(e,s,a){this.delegate=e,this.engine=s,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(c,f)=>{f&&f.parentNode(c)&&f.removeChild(c.parentNode,c)}}createRenderer(e,s){const c=this.delegate.createRenderer(e,s);if(!(e&&s&&s.data&&s.data.animation)){let x=this._rendererCache.get(c);return x||(x=new on("",c,this.engine),this._rendererCache.set(c,x)),x}const f=s.id,y=s.id+"-"+this._currentId;this._currentId++,this.engine.register(y,e);const b=x=>{Array.isArray(x)?x.forEach(b):this.engine.registerTrigger(f,y,e,x.name,x)};return s.data.animation.forEach(b),new zr(this,y,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,s,a){e>=0&&e<this._microtaskId?this._zone.run(()=>s(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[f,y]=c;f(y)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(h.FYo),h.LFG(Km),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class on{constructor(t,e,s){this.namespaceId=t,this.delegate=e,this.engine=s,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,s,a=!0){this.delegate.insertBefore(t,e,s),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,s){this.engine.onRemove(this.namespaceId,e,this.delegate,s)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,s,a){this.delegate.setAttribute(t,e,s,a)}removeAttribute(t,e,s){this.delegate.removeAttribute(t,e,s)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,s,a){this.delegate.setStyle(t,e,s,a)}removeStyle(t,e,s){this.delegate.removeStyle(t,e,s)}setProperty(t,e,s){"@"==e.charAt(0)&&e==it?this.disableAnimations(t,!!s):this.delegate.setProperty(t,e,s)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,s){return this.delegate.listen(t,e,s)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class zr extends on{constructor(t,e,s,a){super(e,s,a),this.factory=t,this.namespaceId=e}setProperty(t,e,s){"@"==e.charAt(0)?"."==e.charAt(1)&&e==it?this.disableAnimations(t,s=void 0===s||!!s):this.engine.process(this.namespaceId,t,e.substr(1),s):this.delegate.setProperty(t,e,s)}listen(t,e,s){if("@"==e.charAt(0)){const a=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let c=e.substr(1),f="";return"@"!=c.charAt(0)&&([c,f]=function(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(c)),this.engine.listen(this.namespaceId,a,c,f,y=>{this.factory.scheduleListenerCallback(y._data||-1,s,y)})}return this.delegate.listen(t,e,s)}}let Md=(()=>{class n extends Km{constructor(e,s,a){super(e.body,s,a)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(oe),h.LFG(Lf),h.LFG(Hm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ym=new h.OlP("AnimationModuleType"),Qm=[{provide:hc,useClass:ie},{provide:Hm,useFactory:function(){return new NR}},{provide:Km,useClass:Md},{provide:h.FYo,useFactory:function(n,t,e){return new It(n,t,e)},deps:[Ui,Km,h.R0b]}],Jm=[{provide:Lf,useFactory:function(){return"function"==typeof W()?new M:new u}},{provide:Ym,useValue:"BrowserAnimations"},...Qm],Xm=[{provide:Lf,useClass:Fm},{provide:Ym,useValue:"NoopAnimations"},...Qm];let zN=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Xm:Jm}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Jm,imports:[Xe]}),n})();const qR_firebase={projectId:"physics-2048",appId:"1:526814158756:web:df7f08432d9da85120ab31",databaseURL:"https://physics-2048-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"physics-2048.appspot.com",apiKey:"AIzaSyDXjjpDKxVEKxF1YbE2Bc7OvOYEYb6AHJc",authDomain:"physics-2048.firebaseapp.com",messagingSenderId:"526814158756",measurementId:"G-LSD6TN3RNP"};class KR{constructor(t){return t}}class ZM{constructor(){return(0,Un.vb)("auth")}}const ZR=new h.OlP("angularfire2.auth-instances");function KN(n){return(t,e)=>{const s=t.runOutsideAngular(()=>n(e));return new KR(s)}}const ZN={provide:ZM,deps:[[new h.FiY,ZR]]},YN={provide:KR,useFactory:function(n,t){const e=(0,Un.JM)("auth",n,t);return e&&new KR(e)},deps:[[new h.FiY,ZR],xu]};let QN=(()=>{class n{constructor(){(0,Sl.KN)("angularfire",Un.q4.full,"auth")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[YN,ZN]}),n})();function JN(n,...t){return{ngModule:QN,providers:[{provide:ZR,useFactory:KN(n),multi:!0,deps:[h.R0b,h.zs3,Un.HU,sm,[new h.FiY,Cf],...t]}]}}const XN=(0,Un.u3)(tC.n,!0);class YR{constructor(t){return t}}const YM="database",QR=new h.OlP("angularfire2.database-instances");function nO(n){return(t,e)=>{const s=t.runOutsideAngular(()=>n(e));return new YR(s)}}const rO={provide:class{constructor(){return(0,Un.vb)(YM)}},deps:[[new h.FiY,QR]]},iO={provide:YR,useFactory:function(n,t){const e=(0,Un.JM)(YM,n,t);return e&&new YR(e)},deps:[[new h.FiY,QR],xu]};let sO=(()=>{class n{constructor(){(0,Sl.KN)("angularfire",Un.q4.full,"rtdb")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[iO,rO]}),n})();function oO(n,...t){return{ngModule:sO,providers:[{provide:QR,useFactory:nO(n),multi:!0,deps:[h.R0b,h.zs3,Un.HU,sm,[new h.FiY,ZM],[new h.FiY,Cf],...t]}]}}const aO=(0,Un.u3)(mA,!0);N(3328);const QM="@firebase/performance",JR="0.5.5",XR="FB-PERF-TRACE-MEASURE",rN="@firebase/performance/config",iN="@firebase/performance/configexpire",sN="Performance",Wi=new B.LL("performance",sN,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Vl=new Lc.Yd(sN);let eP,oN,aN,nP;Vl.logLevel=Lc.in.INFO;class Oi{constructor(t){if(this.window=t,!t)throw Wi.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){!this.performance||!this.performance.mark||this.performance.mark(t)}measure(t,e,s){!this.performance||!this.performance.measure||this.performance.measure(t,e,s)}getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]}getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,B.zI)()?!!(0,B.hl)()||(Vl.info("IndexedDB is not supported by current browswer"),!1):(Vl.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(t,e){this.PerformanceObserver&&new this.PerformanceObserver(a=>{for(const c of a.getEntries())e(c)}).observe({entryTypes:[t]})}static getInstance(){return void 0===eP&&(eP=new Oi(oN)),eP}}function tP(){return aN}function lN(n,t){const e=n.length-t.length;if(e<0||e>1)throw Wi.create("invalid String merger input");const s=[];for(let a=0;a<n.length;a++)s.push(n.charAt(a)),t.length>a&&s.push(t.charAt(a));return s.join("")}class po{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=lN("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=lN("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===nP&&(nP=new po),nP}}var Zf=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(Zf||(Zf={})),Zf))();const gO=["firebase_","google_","ga_"],mO=new RegExp("^[a-zA-Z]\\w*$");function vO(){const n=Oi.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function uN(){switch(Oi.getInstance().document.visibilityState){case"visible":return Zf.VISIBLE;case"hidden":return Zf.HIDDEN;default:return Zf.UNKNOWN}}function EO(){const t=Oi.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function cN(n){var t;const e=null===(t=n.options)||void 0===t?void 0:t.appId;if(!e)throw Wi.create("no app id");return e}const MO="Could not fetch config, will use default configs";function dN(n){if(!n)return n;const t=po.getInstance(),e=n.entries||{};return t.loggingEnabled=void 0===e.fpr_enabled||"true"===String(e.fpr_enabled),e.fpr_log_source&&(t.logSource=Number(e.fpr_log_source)),e.fpr_log_endpoint_url&&(t.logEndPointUrl=e.fpr_log_endpoint_url),e.fpr_log_transport_key&&(t.transportKey=e.fpr_log_transport_key),void 0!==e.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(e.fpr_vc_network_request_sampling_rate)),void 0!==e.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(e.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=hN(t.tracesSamplingRate),t.logNetworkAfterSampling=hN(t.networkRequestsSamplingRate),n}function hN(n){return Math.random()<=n}let iP,rP=1;function fN(n){return rP=2,iP=iP||function(n){return function(){const n=Oi.getInstance().document;return new Promise(t=>{if(n&&"complete"!==n.readyState){const e=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()})}().then(()=>function(n){const t=n.getId();return t.then(e=>{aN=e}),t}(n.installations)).then(t=>function(n,t){const e=function(){const n=Oi.getInstance().localStorage;if(!n)return;const t=n.getItem(iN);if(!t||!function(n){return Number(n)>Date.now()}(t))return;const e=n.getItem(rN);if(e)try{return JSON.parse(e)}catch(s){return}}();return e?(dN(e),Promise.resolve()):function(n,t){return function(n){const t=n.getToken();return t.then(e=>{}),t}(n.installations).then(e=>{const s=function(n){var t;const e=null===(t=n.options)||void 0===t?void 0:t.projectId;if(!e)throw Wi.create("no project id");return e}(n.app),a=function(n){var t;const e=null===(t=n.options)||void 0===t?void 0:t.apiKey;if(!e)throw Wi.create("no api key");return e}(n.app),f=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${s}/namespaces/fireperf:fetch?key=${a}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${e}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:cN(n.app),app_version:"0.5.5",sdk_version:"0.0.1"})});return fetch(f).then(y=>{if(y.ok)return y.json();throw Wi.create("RC response not ok")})}).catch(()=>{Vl.info(MO)})}(n,t).then(dN).then(s=>function(n){const t=Oi.getInstance().localStorage;!n||!t||(t.setItem(rN,JSON.stringify(n)),t.setItem(iN,String(Date.now()+60*po.getInstance().configTimeToLive*60*1e3)))}(s),()=>{})}(n,t)).then(()=>pN(),()=>pN())}(n),iP}function pN(){rP=3}let oP,uI=3,xd=[],mN=!1;function cI(n){setTimeout(()=>{if(0!==uI){if(!xd.length)return cI(1e4);!function(){const n=xd.splice(0,1e3),t=n.map(s=>({source_extension_json_proto3:s.message,event_time_ms:String(s.eventTime)}));(function(n,t){return function(n){const t=po.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(n)})}(n).then(e=>(e.ok||Vl.info("Call to Firebase backend failed."),e.json())).then(e=>{const s=Number(e.nextRequestWaitMillis);let a=1e4;isNaN(s)||(a=Math.max(s,a));const c=e.logResponseDetails;Array.isArray(c)&&c.length>0&&"RETRY_REQUEST_LATER"===c[0].responseAction&&(xd=[...t,...xd],Vl.info("Retry transport request later.")),uI=3,cI(a)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:po.getInstance().logSource,log_event:t},n).catch(()=>{xd=[...n,...xd],uI--,Vl.info(`Tries left: ${uI}.`),cI(1e4)})}()}},n)}function _N(n,t){oP||(oP=function(n){return(...t)=>{!function(n){if(!n.eventTime||!n.message)throw Wi.create("invalid cc log");xd=[...xd,n]}({message:n(...t),eventTime:Date.now()})}}(zO)),oP(n,t)}function dI(n){const t=po.getInstance();!t.instrumentationEnabled&&n.isAuto||!t.dataCollectionEnabled&&!n.isAuto||!Oi.getInstance().requiredApisAvailable()||n.isAuto&&uN()!==Zf.VISIBLE||(3===rP?aP(n):fN(n.performanceController).then(()=>aP(n),()=>aP(n)))}function aP(n){if(!tP())return;const t=po.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(()=>_N(n,1),0)}function zO(n,t){return 0===t?function(n){const t={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},e={application_info:yN(n.performanceController.app),network_request_metric:t};return JSON.stringify(e)}(n):function(n){const t={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(t.counters=n.counters);const e=n.getAttributes();0!==Object.keys(e).length&&(t.custom_attributes=e);const s={application_info:yN(n.performanceController.app),trace_metric:t};return JSON.stringify(s)}(n)}function yN(n){return{google_app_id:cN(n),app_instance_id:tP(),web_app_info:{sdk_version:"0.5.5",page_url:Oi.getInstance().getUrl(),service_worker_status:vO(),visibility_state:uN(),effective_connection_type:EO()},application_process_state:0}}const QO=["_fp","_fcp","_fid"];class kd{constructor(t,e,s=!1,a){this.performanceController=t,this.name=e,this.isAuto=s,this.state=1,this.customAttributes={},this.counters={},this.api=Oi.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=a||`${XR}-${this.randomId}-${this.name}`,a&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Wi.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Wi.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),dI(this)}record(t,e,s){if(t<=0)throw Wi.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Wi.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),s&&s.attributes&&(this.customAttributes=Object.assign({},s.attributes)),s&&s.metrics)for(const a of Object.keys(s.metrics))isNaN(Number(s.metrics[a]))||(this.counters[a]=Number(Math.floor(s.metrics[a])));dI(this)}incrementMetric(t,e=1){this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)}putMetric(t,e){if(!function(n,t){return!(0===n.length||n.length>100)&&(t&&t.startsWith("_wt_")&&QO.indexOf(n)>-1||!n.startsWith("_"))}(t,this.name))throw Wi.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function(n){const t=Math.floor(n);return t<n&&Vl.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}(e)}getMetric(t){return this.counters[t]||0}putAttribute(t,e){const s=function(n){return!(0===n.length||n.length>40||gO.some(e=>n.startsWith(e))||!n.match(mO))}(t),a=function(n){return 0!==n.length&&n.length<=100}(e);if(s&&a)this.customAttributes[t]=e;else{if(!s)throw Wi.create("invalid attribute name",{attributeName:t});if(!a)throw Wi.create("invalid attribute value",{attributeValue:e})}}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(t,e,s,a){const c=Oi.getInstance().getUrl();if(!c)return;const f=new kd(t,"_wt_"+c,!0),y=Math.floor(1e3*Oi.getInstance().getTimeOrigin());if(f.setStartTime(y),e&&e[0]&&(f.setDuration(Math.floor(1e3*e[0].duration)),f.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),f.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),f.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),s){const x=s.find(Z=>"first-paint"===Z.name);x&&x.startTime&&f.putMetric("_fp",Math.floor(1e3*x.startTime));const k=s.find(Z=>"first-contentful-paint"===Z.name);k&&k.startTime&&f.putMetric("_fcp",Math.floor(1e3*k.startTime)),a&&f.putMetric("_fid",Math.floor(1e3*a))}dI(f)}static createUserTimingTrace(t,e){dI(new kd(t,e,!1,e))}}function vN(n,t){const e=t;if(!e||void 0===e.responseStart)return;const s=Oi.getInstance().getTimeOrigin(),a=Math.floor(1e3*(e.startTime+s)),c=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,f=Math.floor(1e3*(e.responseEnd-e.startTime));!function(n){const t=po.getInstance();if(!t.instrumentationEnabled)return;const e=n.url,s=t.logEndPointUrl.split("?")[0],a=t.flTransportEndpointUrl.split("?")[0];e===s||e===a||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(()=>_N(n,0),0)}({performanceController:n,url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:a,timeToResponseInitiatedUs:c,timeToResponseCompletedUs:f})}function EN(n){!tP()||(setTimeout(()=>function(n){const t=Oi.getInstance(),e=t.getEntriesByType("navigation"),s=t.getEntriesByType("paint");if(t.onFirstInputDelay){let a=setTimeout(()=>{kd.createOobTrace(n,e,s),a=void 0},5e3);t.onFirstInputDelay(c=>{a&&(clearTimeout(a),kd.createOobTrace(n,e,s,c))})}else kd.createOobTrace(n,e,s)}(n),0),setTimeout(()=>function(n){const t=Oi.getInstance(),e=t.getEntriesByType("resource");for(const s of e)vN(n,s);t.setupObserver("resource",s=>vN(n,s))}(n),0),setTimeout(()=>function(n){const t=Oi.getInstance(),e=t.getEntriesByType("measure");for(const s of e)CN(n,s);t.setupObserver("measure",s=>CN(n,s))}(n),0))}function CN(n,t){const e=t.name;e.substring(0,XR.length)!==XR&&kd.createUserTimingTrace(n,e)}class ix{constructor(t,e){this.app=t,this.installations=e,this.initialized=!1}_init(t){this.initialized||(void 0!==(null==t?void 0:t.dataCollectionEnabled)&&(this.dataCollectionEnabled=t.dataCollectionEnabled),void 0!==(null==t?void 0:t.instrumentationEnabled)&&(this.instrumentationEnabled=t.instrumentationEnabled),Oi.getInstance().requiredApisAvailable()?(0,B.eu)().then(e=>{e&&(mN||(cI(5500),mN=!0),fN(this).then(()=>EN(this),()=>EN(this)),this.initialized=!0)}).catch(e=>{Vl.info(`Environment doesn't support IndexedDB: ${e}`)}):Vl.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){po.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return po.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){po.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return po.getInstance().dataCollectionEnabled}}function ox(n=(0,Di.getApp)()){return n=(0,B.m9)(n),(0,Di._getProvider)(n,"performance").getImmediate()}(0,Di._registerComponent)(new Aa.wA("performance",(n,{options:t})=>{const e=n.getProvider("app").getImmediate(),s=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==e.name)throw Wi.create("FB not default");if("undefined"==typeof window)throw Wi.create("no window");!function(n){oN=n}(window);const a=new ix(e,s);return a._init(t),a},"PUBLIC")),(0,Di.registerVersion)(QM,JR),(0,Di.registerVersion)(QM,JR,"esm2017");class lP{constructor(t){return t}}const bN="performance",uP=new h.OlP("angularfire2.performance-instances");function dx(n){return(t,e,s)=>{if(!Jo(e))return null;const a=t.runOutsideAngular(()=>n(s));return new lP(a)}}const hx={provide:class{constructor(){return(0,Un.vb)(bN)}},deps:[[new h.FiY,uP]]},fx={provide:lP,useFactory:function(n,t,e){if(!Jo(e))return null;const s=(0,Un.JM)(bN,n,t);return s&&new lP(s)},deps:[[new h.FiY,uP],xu,h.Lbi]};let px=(()=>{class n{constructor(){(0,Sl.KN)("angularfire",Un.q4.full,"perf")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[fx,hx]}),n})();function gx(n,...t){return{ngModule:px,providers:[{provide:uP,useFactory:dx(n),multi:!0,deps:[h.R0b,h.Lbi,h.zs3,Un.HU,sm,...t]}]}}const mx=(0,Un.u3)(ox,!0);var _x=N(1524),yx=N(205),vx=N(9105);function cP(n,t,e,s){return(0,vx.m)(e)&&(s=e,e=void 0),s?cP(n,t,e).pipe((0,xt.U)(a=>(0,iu.k)(a)?s(...a):s(a))):new ti.y(a=>{wN(n,t,function(f){a.next(arguments.length>1?Array.prototype.slice.call(arguments):f)},a,e)})}function wN(n,t,e,s,a){let c;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const f=n;n.addEventListener(t,e,a),c=()=>f.removeEventListener(t,e,a)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const f=n;n.on(t,e),c=()=>f.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const f=n;n.addListener(t,e),c=()=>f.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let f=0,y=n.length;f<y;f++)wN(n[f],t,e,s,a)}s.add(c)}var wx=N(8640);const Yf=new ti.y(wx.Z);var TN=N(4458),IN=N(3098);class Ax{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new dP(t,this.delay,this.scheduler))}}class dP extends Gn.L{constructor(t,e,s){super(t),this.delay=e,this.scheduler=s,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,s=e.queue,a=t.scheduler,c=t.destination;for(;s.length>0&&s[0].time-a.now()<=0;)s.shift().notification.observe(c);if(s.length>0){const f=Math.max(0,s[0].time-a.now());this.schedule(t,f)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(dP.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,s=new Sx(e.now()+this.delay,t);this.queue.push(s),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(IN.P.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(IN.P.createComplete()),this.unsubscribe()}}class Sx{constructor(t,e){this.time=t,this.notification=e}}const YE="Service workers are disabled or not supported by this browser";class hI{constructor(t){if(this.serviceWorker=t,t){const s=cP(t,"controllerchange").pipe((0,xt.U)(()=>t.controller)),c=Mo(Ec(()=>(0,Et.of)(t.controller)),s);this.worker=c.pipe(Ii(x=>!!x)),this.registration=this.worker.pipe(dr(()=>t.getRegistration()));const T=cP(t,"message").pipe((0,xt.U)(x=>x.data)).pipe(Ii(x=>x&&x.type)).pipe((0,TN.O)(new Pr.xQ));T.connect(),this.events=T}else this.worker=this.events=this.registration=Ec(()=>(0,yx._)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(t,e){return this.worker.pipe(bn(1),(0,di.b)(s=>{s.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithStatus(t,e,s){const a=this.waitForStatus(s),c=this.postMessage(t,e);return Promise.all([a,c]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){return this.events.pipe(Ii(s=>s.type===t))}nextEventOfType(t){return this.eventsOfType(t).pipe(bn(1))}waitForStatus(t){return this.eventsOfType("STATUS").pipe(Ii(e=>e.nonce===t),bn(1),(0,xt.U)(e=>{if(!e.status)throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Px=(()=>{class n{constructor(e){if(this.sw=e,this.subscriptionChanges=new Pr.xQ,!e.isEnabled)return this.messages=Yf,this.notificationClicks=Yf,void(this.subscription=Yf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,xt.U)(a=>a.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,xt.U)(a=>a.data)),this.pushManager=this.sw.registration.pipe((0,xt.U)(a=>a.pushManager));const s=this.pushManager.pipe(dr(a=>a.getSubscription()));this.subscription=(0,Ih.T)(s,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(YE));const s={userVisibleOnly:!0};let a=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),c=new Uint8Array(new ArrayBuffer(a.length));for(let f=0;f<a.length;f++)c[f]=a.charCodeAt(f);return s.applicationServerKey=c,this.pushManager.pipe(dr(f=>f.subscribe(s)),bn(1)).toPromise().then(f=>(this.subscriptionChanges.next(f),f))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(bn(1),dr(s=>{if(null===s)throw new Error("Not subscribed to push notifications.");return s.unsubscribe().then(a=>{if(!a)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(YE))}decodeBase64(e){return atob(e)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(hI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Mx=(()=>{class n{constructor(e){if(this.sw=e,!e.isEnabled)return this.available=Yf,this.activated=Yf,void(this.unrecoverable=Yf);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(YE));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(YE));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}}return n.\u0275fac=function(e){return new(e||n)(h.LFG(hI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class hP{}const DN=new h.OlP("NGSW_REGISTER_SCRIPT");function Nx(n,t,e,s){return()=>{if(!Jo(s)||!("serviceWorker"in navigator)||!1===e.enabled)return;let c;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)c=e.registrationStrategy();else{const[y,...b]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(y){case"registerImmediately":c=(0,Et.of)(null);break;case"registerWithDelay":c=AN(+b[0]||0);break;case"registerWhenStable":c=b[0]?(0,Ih.T)(SN(n),AN(+b[0])):SN(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.get(h.R0b).runOutsideAngular(()=>c.pipe(bn(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(y=>console.error("Service worker registration failed with:",y))))}}function AN(n){return(0,Et.of)(null).pipe(function(n,t=nC.P){const s=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-t.now():Math.abs(n);return a=>a.lift(new Ax(s,t))}(n))}function SN(n){return n.get(h.z2F).isStable.pipe(Ii(e=>e))}function Ox(n,t){return new hI(Jo(t)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let xx=(()=>{class n{static register(e,s={}){return{ngModule:n,providers:[{provide:DN,useValue:e},{provide:hP,useValue:s},{provide:hI,useFactory:Ox,deps:[hP,h.Lbi]},{provide:h.ip1,useFactory:Nx,deps:[h.zs3,DN,hP,h.Lbi],multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Px,Mx]}),n})(),kx=(()=>{class n extends Js{constructor(){super(...arguments),this.overrides={swipe:{direction:_x.DIRECTION_ALL}}}}return n.\u0275fac=function(){let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[AS]}),n.\u0275inj=h.cJS({providers:[{provide:Zi,useClass:kx}],imports:[[Xe,bP.forRoot(cR),zN,Ns.hO.initializeApp(qR_firebase),JN(()=>XN()),oO(()=>aO()),gx(()=>mx()),CS,lR,Yl,xx.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();(0,h.G48)(),Ue().bootstrapModule(Fx).catch(n=>console.error(n))},3394:(We,ve,N)=>{"use strict";N.d(ve,{Z:()=>xe});var h=N(3854),U=N(3910),O=N(8026),ue=N(5422);class ee{constructor(Ee,ae){this._delegate=Ee,this.firebase=ae,(0,O._addComponent)(Ee,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ee,ae=O._DEFAULT_ENTRY_NAME){var de;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(Ee);return!Ce.isInitialized()&&"EXPLICIT"===(null===(de=Ce.getComponent())||void 0===de?void 0:de.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:ae})}_removeServiceInstance(Ee,ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ae)}_addComponent(Ee){(0,O._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,O._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function X(){const be=function(be){const Ee={},ae={__esModule:!0,initializeApp:function(ft,Qt={}){const bt=O.initializeApp(ft,Qt);if((0,h.r3)(Ee,bt.name))return Ee[bt.name];const lt=new be(bt,ae);return Ee[bt.name]=lt,lt},app:Ce,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(ft){const Qt=ft.name,bt=Qt.replace("-compat","");if(O._registerComponent(ft)&&"PUBLIC"===ft.type){const lt=(Mt=Ce())=>{if("function"!=typeof Mt[bt])throw oe.create("invalid-app-argument",{appName:Qt});return Mt[bt]()};void 0!==ft.serviceProps&&(0,h.ZB)(lt,ft.serviceProps),ae[bt]=lt,be.prototype[bt]=function(...Mt){return this._getService.bind(this,Qt).apply(this,ft.multipleInstances?Mt:[])}}return"PUBLIC"===ft.type?ae[bt]:null},removeApp:function(ft){delete Ee[ft]},useAsService:function(ft,Qt){return"serverAuth"===Qt?null:Qt},modularAPIs:O}};function Ce(ft){if(!(0,h.r3)(Ee,ft=ft||O._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:ft});return Ee[ft]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function(){return Object.keys(Ee).map(ft=>Ee[ft])}}),Ce.App=be,ae}(ee);return be.INTERNAL=Object.assign(Object.assign({},be.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function(ae){(0,h.ZB)(be,ae)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),be}(),$=new ue.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const be=self.firebase.SDK_VERSION;be&&be.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=V;(0,O.registerVersion)("@firebase/app-compat","0.1.15",undefined)},8026:(We,ve,N)=>{"use strict";N.r(ve),N.d(ve,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>jn,_DEFAULT_ENTRY_NAME:()=>jr,_addComponent:()=>si,_addOrOverwriteComponent:()=>as,_apps:()=>Wt,_clearComponents:()=>ct,_components:()=>Ut,_getProvider:()=>an,_registerComponent:()=>fr,_removeServiceInstance:()=>Yn,deleteApp:()=>mn,getApp:()=>Oe,getApps:()=>hn,initializeApp:()=>rr,onLog:()=>Tt,registerVersion:()=>$e,setLogLevel:()=>Xn});var h=N(8239),U=N(3910),O=N(5422),ue=N(3854);class ee{constructor(rt){this.container=rt}getPlatformInfoString(){return this.container.getProviders().map(Rt=>{if(function(Qe){const rt=Qe.getComponent();return"VERSION"===(null==rt?void 0:rt.type)}(Rt)){const kt=Rt.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(Rt=>Rt).join(" ")}}const oe="@firebase/app",X=new O.Yd("@firebase/app"),jr="[DEFAULT]",Or={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Wt=new Map,Ut=new Map;function si(Qe,rt){try{Qe.container.addComponent(rt)}catch(Rt){X.debug(`Component ${rt.name} failed to register with FirebaseApp ${Qe.name}`,Rt)}}function as(Qe,rt){Qe.container.addOrOverwriteComponent(rt)}function fr(Qe){const rt=Qe.name;if(Ut.has(rt))return X.debug(`There were multiple attempts to register component ${rt}.`),!1;Ut.set(rt,Qe);for(const Rt of Wt.values())si(Rt,Qe);return!0}function an(Qe,rt){return Qe.container.getProvider(rt)}function Yn(Qe,rt,Rt=jr){an(Qe,rt).clearInstance(Rt)}function ct(){Ut.clear()}const pt=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class xn{constructor(rt,Rt,kt){this._isDeleted=!1,this._options=Object.assign({},rt),this._config=Object.assign({},Rt),this._name=Rt.name,this._automaticDataCollectionEnabled=Rt.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this.checkDestroyed(),this._automaticDataCollectionEnabled=rt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(rt){this._isDeleted=rt}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const jn="9.6.4";function rr(Qe,rt={}){"object"!=typeof rt&&(rt={name:rt});const Rt=Object.assign({name:jr,automaticDataCollectionEnabled:!1},rt),kt=Rt.name;if("string"!=typeof kt||!kt)throw pt.create("bad-app-name",{appName:String(kt)});const An=Wt.get(kt);if(An){if((0,ue.vZ)(Qe,An.options)&&(0,ue.vZ)(Rt,An.config))return An;throw pt.create("duplicate-app",{appName:kt})}const en=new U.H0(kt);for(const Je of Ut.values())en.addComponent(Je);const Le=new xn(Qe,Rt,en);return Wt.set(kt,Le),Le}function Oe(Qe=jr){const rt=Wt.get(Qe);if(!rt)throw pt.create("no-app",{appName:Qe});return rt}function hn(){return Array.from(Wt.values())}function mn(Qe){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(Qe){const rt=Qe.name;Wt.has(rt)&&(Wt.delete(rt),yield Promise.all(Qe.container.getProviders().map(Rt=>Rt.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function $e(Qe,rt,Rt){var kt;let An=null!==(kt=Or[Qe])&&void 0!==kt?kt:Qe;Rt&&(An+=`-${Rt}`);const en=An.match(/\s|\//),Le=rt.match(/\s|\//);if(en||Le){const Je=[`Unable to register library "${An}" with version "${rt}":`];return en&&Je.push(`library name "${An}" contains illegal characters (whitespace or "/")`),en&&Le&&Je.push("and"),Le&&Je.push(`version name "${rt}" contains illegal characters (whitespace or "/")`),void X.warn(Je.join(" "))}fr(new U.wA(`${An}-version`,()=>({library:An,version:rt}),"VERSION"))}function Tt(Qe,rt){if(null!==Qe&&"function"!=typeof Qe)throw pt.create("invalid-log-argument");(0,O.Am)(Qe,rt)}function Xn(Qe){(0,O.Ub)(Qe)}fr(new U.wA("platform-logger",rt=>new ee(rt),"PRIVATE")),$e(oe,"0.7.14",""),$e(oe,"0.7.14","esm2017"),$e("fire-js","")},3910:(We,ve,N)=>{"use strict";N.d(ve,{wA:()=>O,H0:()=>te,zt:()=>ee});var h=N(8239),U=N(3854);class O{constructor(V,$,G){this.name=V,this.instanceFactory=$,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ue="[DEFAULT]";class ee{constructor(V,$){this.name=V,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const $=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has($)){const G=new U.BH;if(this.instancesDeferred.set($,G),this.isInitialized($)||this.shouldAutoInitialize())try{const ge=this.getOrInitializeService({instanceIdentifier:$});ge&&G.resolve(ge)}catch(ge){}}return this.instancesDeferred.get($).promise}getImmediate(V){var $;const G=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),ge=null!==($=null==V?void 0:V.optional)&&void 0!==$&&$;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(Re){if(ge)return null;throw Re}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if("EAGER"===V.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ue})}catch($){}for(const[$,G]of this.instancesDeferred.entries()){const ge=this.normalizeInstanceIdentifier($);try{const Re=this.getOrInitializeService({instanceIdentifier:ge});G.resolve(Re)}catch(Re){}}}}clearInstance(V=ue){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,h.Z)(function*(){const $=Array.from(V.instances.values());yield Promise.all([...$.filter(G=>"INTERNAL"in G).map(G=>G.INTERNAL.delete()),...$.filter(G=>"_delete"in G).map(G=>G._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ue){return this.instances.has(V)}getOptions(V=ue){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:$={}}=V,G=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(G))throw Error(`${this.name}(${G}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ge=this.getOrInitializeService({instanceIdentifier:G,options:$});for(const[Re,xe]of this.instancesDeferred.entries())G===this.normalizeInstanceIdentifier(Re)&&xe.resolve(ge);return ge}onInit(V,$){var G;const ge=this.normalizeInstanceIdentifier($),Re=null!==(G=this.onInitCallbacks.get(ge))&&void 0!==G?G:new Set;Re.add(V),this.onInitCallbacks.set(ge,Re);const xe=this.instances.get(ge);return xe&&V(xe,ge),()=>{Re.delete(V)}}invokeOnInitCallbacks(V,$){const G=this.onInitCallbacks.get($);if(G)for(const ge of G)try{ge(V,$)}catch(Re){}}getOrInitializeService({instanceIdentifier:V,options:$={}}){let G=this.instances.get(V);if(!G&&this.component&&(G=this.component.instanceFactory(this.container,{instanceIdentifier:(X=V,X===ue?void 0:X),options:$}),this.instances.set(V,G),this.instancesOptions.set(V,$),this.invokeOnInitCallbacks(G,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,G)}catch(ge){}var X;return G||null}normalizeInstanceIdentifier(V=ue){return this.component?this.component.multipleInstances?V:ue:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const $=this.getProvider(V.name);if($.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);$.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const $=new ee(V,this);return this.providers.set(V,$),$}getProviders(){return Array.from(this.providers.values())}}},3328:(We,ve,N)=>{"use strict";var h=N(8239),U=N(8026),O=N(3910),ue=N(3854),ee=N(6676);const J="@firebase/installations",X="w:0.5.5",V="FIS_v2",be=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(ne){return ne instanceof ue.ZR&&ne.code.includes("request-failed")}function ae({projectId:ne}){return`https://firebaseinstallations.googleapis.com/v1/projects/${ne}/installations`}function de(ne){return{token:ne.token,requestStatus:2,expiresIn:Qt(ne.expiresIn),creationTime:Date.now()}}function Ce(ne,_e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,h.Z)(function*(ne,_e){const et=(yield _e.json()).error;return be.create("request-failed",{requestName:ne,serverCode:et.code,serverMessage:et.message,serverStatus:et.status})})).apply(this,arguments)}function Ye({apiKey:ne}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":ne})}function vt(ne,{refreshToken:_e}){const Ae=Ye(ne);return Ae.append("Authorization",function(ne){return`${V} ${ne}`}(_e)),Ae}function St(ne){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(ne){const _e=yield ne();return _e.status>=500&&_e.status<600?ne():_e})).apply(this,arguments)}function Qt(ne){return Number(ne.replace("s","000"))}function lt(ne,_e){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(ne,{fid:_e}){const Ae=ae(ne),Ge={method:"POST",headers:Ye(ne),body:JSON.stringify({fid:_e,authVersion:V,appId:ne.appId,sdkVersion:X})},Lt=yield St(()=>fetch(Ae,Ge));if(Lt.ok){const cn=yield Lt.json();return{fid:cn.fid||_e,registrationStatus:2,refreshToken:cn.refreshToken,authToken:de(cn.authToken)}}throw yield Ce("Create Installation",Lt)})).apply(this,arguments)}function st(ne){return new Promise(_e=>{setTimeout(_e,ne)})}const tt=/^[cdef][\w-]{21}$/;function Gi(){try{const ne=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(ne),ne[0]=112+ne[0]%16;const Ae=function(ne){return function(ne){return btoa(String.fromCharCode(...ne)).replace(/\+/g,"-").replace(/\//g,"_")}(ne).substr(0,22)}(ne);return tt.test(Ae)?Ae:""}catch(ne){return""}}function Or(ne){return`${ne.appName}!${ne.appId}`}const Wt=new Map;function Ut(ne,_e){const Ae=Or(ne);fr(Ae,_e),function(ne,_e){const Ae=(!Yn&&"BroadcastChannel"in self&&(Yn=new BroadcastChannel("[Firebase] FID Change"),Yn.onmessage=ne=>{fr(ne.data.key,ne.data.fid)}),Yn);Ae&&Ae.postMessage({key:ne,fid:_e}),0===Wt.size&&Yn&&(Yn.close(),Yn=null)}(Ae,_e)}function fr(ne,_e){const Ae=Wt.get(ne);if(Ae)for(const et of Ae)et(_e)}let Yn=null;const jn="firebase-installations-store";let rr=null;function Oe(){return rr||(rr=(0,ee.openDb)("firebase-installations-database",1,ne=>{switch(ne.oldVersion){case 0:ne.createObjectStore(jn)}})),rr}function hn(ne,_e){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(ne,_e){const Ae=Or(ne),gn=(yield Oe()).transaction(jn,"readwrite"),Ge=gn.objectStore(jn),Lt=yield Ge.get(Ae);return yield Ge.put(_e,Ae),yield gn.complete,(!Lt||Lt.fid!==_e.fid)&&Ut(ne,_e.fid),_e})).apply(this,arguments)}function kn(ne){return $e.apply(this,arguments)}function $e(){return($e=(0,h.Z)(function*(ne){const _e=Or(ne),et=(yield Oe()).transaction(jn,"readwrite");yield et.objectStore(jn).delete(_e),yield et.complete})).apply(this,arguments)}function Tt(ne,_e){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(ne,_e){const Ae=Or(ne),gn=(yield Oe()).transaction(jn,"readwrite"),Ge=gn.objectStore(jn),Lt=yield Ge.get(Ae),cn=_e(Lt);return void 0===cn?yield Ge.delete(Ae):yield Ge.put(cn,Ae),yield gn.complete,cn&&(!Lt||Lt.fid!==cn.fid)&&Ut(ne,cn.fid),cn})).apply(this,arguments)}function wn(ne){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,h.Z)(function*(ne){let _e;const Ae=yield Tt(ne,et=>{const gn=rt(et),Ge=Rt(ne,gn);return _e=Ge.registrationPromise,Ge.installationEntry});return""===Ae.fid?{installationEntry:yield _e}:{installationEntry:Ae,registrationPromise:_e}})).apply(this,arguments)}function rt(ne){return pr(ne||{fid:Gi(),registrationStatus:0})}function Rt(ne,_e){if(0===_e.registrationStatus){if(!navigator.onLine)return{installationEntry:_e,registrationPromise:Promise.reject(be.create("app-offline"))};const Ae={fid:_e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:Ae,registrationPromise:function(ne,_e){return An.apply(this,arguments)}(ne,Ae)}}return 1===_e.registrationStatus?{installationEntry:_e,registrationPromise:en(ne)}:{installationEntry:_e}}function An(){return(An=(0,h.Z)(function*(ne,_e){try{return hn(ne,yield lt(ne,_e))}catch(Ae){throw Ee(Ae)&&409===Ae.customData.serverCode?yield kn(ne):yield hn(ne,{fid:_e.fid,registrationStatus:0}),Ae}})).apply(this,arguments)}function en(ne){return Le.apply(this,arguments)}function Le(){return(Le=(0,h.Z)(function*(ne){let _e=yield Je(ne);for(;1===_e.registrationStatus;)yield st(100),_e=yield Je(ne);if(0===_e.registrationStatus){const{installationEntry:Ae,registrationPromise:et}=yield wn(ne);return et||Ae}return _e})).apply(this,arguments)}function Je(ne){return Tt(ne,_e=>{if(!_e)throw be.create("installation-not-found");return pr(_e)})}function pr(ne){return function(ne){return 1===ne.registrationStatus&&ne.registrationTime+1e4<Date.now()}(ne)?{fid:ne.fid,registrationStatus:0}:ne}function Kt(ne,_e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,h.Z)(function*({appConfig:ne,platformLoggerProvider:_e},Ae){const et=ln(ne,Ae),gn=vt(ne,Ae),Ge=_e.getImmediate({optional:!0});Ge&&gn.append("x-firebase-client",Ge.getPlatformInfoString());const cn={method:"POST",headers:gn,body:JSON.stringify({installation:{sdkVersion:X}})},vr=yield St(()=>fetch(et,cn));if(vr.ok)return de(yield vr.json());throw yield Ce("Generate Auth Token",vr)})).apply(this,arguments)}function ln(ne,{fid:_e}){return`${ae(ne)}/${_e}/authTokens:generate`}function qr(ne){return z.apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(ne,_e=!1){let Ae;const et=yield Tt(ne.appConfig,Ge=>{if(!ot(Ge))throw be.create("not-registered");const Lt=Ge.authToken;if(!_e&&Ft(Lt))return Ge;if(1===Lt.requestStatus)return Ae=H(ne,_e),Ge;{if(!navigator.onLine)throw be.create("app-offline");const cn=Fn(Ge);return Ae=le(ne,cn),cn}});return Ae?yield Ae:et.authToken})).apply(this,arguments)}function H(ne,_e){return Y.apply(this,arguments)}function Y(){return(Y=(0,h.Z)(function*(ne,_e){let Ae=yield De(ne.appConfig);for(;1===Ae.authToken.requestStatus;)yield st(100),Ae=yield De(ne.appConfig);const et=Ae.authToken;return 0===et.requestStatus?qr(ne,_e):et})).apply(this,arguments)}function De(ne){return Tt(ne,_e=>{if(!ot(_e))throw be.create("not-registered");return function(ne){return 1===ne.requestStatus&&ne.requestTime+1e4<Date.now()}(_e.authToken)?Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}}):_e})}function le(ne,_e){return qe.apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(ne,_e){try{const Ae=yield Kt(ne,_e),et=Object.assign(Object.assign({},_e),{authToken:Ae});return yield hn(ne.appConfig,et),Ae}catch(Ae){if(!Ee(Ae)||401!==Ae.customData.serverCode&&404!==Ae.customData.serverCode){const et=Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}});yield hn(ne.appConfig,et)}else yield kn(ne.appConfig);throw Ae}})).apply(this,arguments)}function ot(ne){return void 0!==ne&&2===ne.registrationStatus}function Ft(ne){return 2===ne.requestStatus&&!function(ne){const _e=Date.now();return _e<ne.creationTime||ne.creationTime+ne.expiresIn<_e+36e5}(ne)}function Fn(ne){const _e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},ne),{authToken:_e})}function fe(){return(fe=(0,h.Z)(function*(ne){const _e=ne,{installationEntry:Ae,registrationPromise:et}=yield wn(_e.appConfig);return et?et.catch(console.error):qr(_e).catch(console.error),Ae.fid})).apply(this,arguments)}function K(){return(K=(0,h.Z)(function*(ne,_e=!1){const Ae=ne;return yield we(Ae.appConfig),(yield qr(Ae,_e)).token})).apply(this,arguments)}function we(ne){return je.apply(this,arguments)}function je(){return(je=(0,h.Z)(function*(ne){const{registrationPromise:_e}=yield wn(ne);_e&&(yield _e)})).apply(this,arguments)}function Vn(ne){return be.create("missing-app-config-values",{valueName:ne})}const He="installations";(0,U._registerComponent)(new O.wA(He,ne=>{const _e=ne.getProvider("app").getImmediate();return{app:_e,appConfig:function(ne){if(!ne||!ne.options)throw Vn("App Configuration");if(!ne.name)throw Vn("App Name");const _e=["projectId","apiKey","appId"];for(const Ae of _e)if(!ne.options[Ae])throw Vn(Ae);return{appName:ne.name,projectId:ne.options.projectId,apiKey:ne.options.apiKey,appId:ne.options.appId}}(_e),platformLoggerProvider:(0,U._getProvider)(_e,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,U._registerComponent)(new O.wA("installations-internal",ne=>{const _e=ne.getProvider("app").getImmediate(),Ae=(0,U._getProvider)(_e,He).getImmediate();return{getId:()=>function(ne){return fe.apply(this,arguments)}(Ae),getToken:gn=>function(ne){return K.apply(this,arguments)}(Ae,gn)}},"PRIVATE")),(0,U.registerVersion)(J,"0.5.5"),(0,U.registerVersion)(J,"0.5.5","esm2017")},5422:(We,ve,N)=>{"use strict";N.d(ve,{in:()=>U,Yd:()=>oe,Ub:()=>te,Am:()=>X});const h=[];var U=(()=>{return(V=U||(U={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",U;var V})();const O={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ue=U.INFO,ee={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},J=(V,$,...G)=>{if($<V.logLevel)return;const ge=(new Date).toISOString(),Re=ee[$];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Re](`[${ge}]  ${V.name}:`,...G)};class oe{constructor($){this.name=$,this._logLevel=ue,this._logHandler=J,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in U))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...$),this._logHandler(this,U.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...$),this._logHandler(this,U.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,U.INFO,...$),this._logHandler(this,U.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,U.WARN,...$),this._logHandler(this,U.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...$),this._logHandler(this,U.ERROR,...$)}}function te(V){h.forEach($=>{$.setLogLevel(V)})}function X(V,$){for(const G of h){let ge=null;$&&$.level&&(ge=O[$.level]),G.userLogHandler=null===V?null:(Re,xe,...be)=>{const Ee=be.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch(de){return null}}).filter(ae=>ae).join(" ");xe>=(null!=ge?ge:Re.logLevel)&&V({level:U[xe].toLowerCase(),message:Ee,args:be,type:Re.name})}}}},8239:(We,ve,N)=>{"use strict";function h(O,ue,ee,J,oe,te,X){try{var V=O[te](X),$=V.value}catch(G){return void ee(G)}V.done?ue($):Promise.resolve($).then(J,oe)}function U(O){return function(){var ue=this,ee=arguments;return new Promise(function(J,oe){var te=O.apply(ue,ee);function X($){h(te,J,oe,X,V,"next",$)}function V($){h(te,J,oe,X,V,"throw",$)}X(void 0)})}}N.d(ve,{Z:()=>U})}},We=>{We(We.s=3303)}]);